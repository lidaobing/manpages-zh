.\" -*- nroff -*-
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "SMB.CONF" 5 "" "" ""
.SH NAME
smb.conf \- Samba组件的配置文件 
.SH "总览 SYNOPSIS"

.PP
\fIsmb.conf\fR是Samba组件的配置文件,包含Samba程序运行时的配置信
息.\fIsmb.conf\fR被设计成可由\fBswat\fR (8)程序来配置和管理.本文件包含了
关于smb.conf的文件格式和可能出现的选项的完整描述以供参考.

.SH "文件格式 FILE FORMAT"

.PP
本文件由一系列段和选项构成.一个段由一对方括号中的段名开始,直到下一个段名结束.包含在段中的选项按以下格式定义：

.PP
\fI选项名\fR = \fI选项值\fR

.PP
本文件是基于文本行的.这就是说,每一个以换行符结束的行描述了一个项目(注释,段名,或选项).

.PP
段名和选项名是不区分大小写的.

.PP
只有选项设置中的第一个等号才有意义.第一个等号前后的空格会被忽略.段名和选项名的前后以及中间包含的空格是无关的.选项值前后的空格会被忽略.选项值中包含的空格会原样保留.

.PP
所有以';'和'#'符开头的行都会被忽略,就象只有空格的行那样.

.PP
按照UNIX上的惯例,以'\'符号结尾的行续下一行.(也就是说：'\'是续行符,如果一行写不下,可以在行尾以'\'结束,在下一行继续写--译注) 

.PP
等号后面跟的是字符串(无需引号)或者逻辑值(可以是yes/no,1/0,或者true/false
来表示).逻辑值是不区分大小写的.字符串值则原样保留了输入的大小写.某些选项
(例如create modes)的值是数值型的.

.SH "段描述 SECTION DESCRIPTIONS"

.PP
配置文件的每一段([global]段除外)描述一项共享资源.段名就是共享名,段内的选项设置确定了该共享资源的属性.

.PP
三个特殊段([global],[homes],[printers])将在后面'special sections'单独说明,以下的内容是普通段的说明.



.PP
一个共享资源由一个文件目录和用户对此目录的操作权限的说明构成.另外,还列入了一些用于内部管理的选项.

.PP
每一段定义了一项文件服务(客户端可以把它看作其本机文件系统的延伸)或打印服务(客户端可以通过它来使用服务器提供的打印服务).

.PP
段可以定义成\fBguest\fR服务类型,在这种情况下,客户无需口令就可以访问该资源.一个特定的UNIX系统下的\fBguest account\fR通常用来指定这种情况下的客户访问权限.

.PP
除了guest服务类型以外,其他类型的段定义的共享资源都需要口令才能访问.用户名是由客户端提供的.由于某些老的客户端只提供口令,没有用户名,你需要在共享定义中使用"user="选项来指定一个用户列表,以便根据这个用户列表进行口令验证.对于象Windos95/98和WindowsNT这样的现代客户端程序,这个选项是不需要的.

.PP
注意,对于资源的操作权限还取决于主机系统赋予指定用户或来访者账户的权限.samba提供的服务权限不能超出主机系统指定的权限范围.

.PP
下面的示范段定义了一项文件服务,用户拥有对\fI/home/bar\fR目录进行写操作的权限.这个共享资源是通过共享名"foo"来访问的.

.nf
[foo]
	path = /home/bar
	read only = no
.fi

.PP
下面示范段定义了一项打印服务,此共享资源是只读的,但是可以进行打印操作.也就是说,唯一允许的写操作只能是打开、写入并关闭一个打印假脱机文件.其中的\fIguest ok\fR选项定义意味着允许以缺省的guest用户(在别处定义的)权限进行访问.

.nf
[aprinter]
	path = /usr/spool/public
	read only = yes
	printable = yes
	guest ok = yes
.fi

.SH "特殊段 SPECIAL SECTIONS"

.SS "[global] 全局选项段 "

.PP
这一段中定义的选项是服务器的全局性设置,如果在其他段中没有再对这些选项进行重新设置的话还可以作为它们的缺省选项.更多的说明请参阅'PARAMETERS'部分的内容.

.SS "[homes] 个人目录段"

.PP
如果配置文件中包含名为'homes'的段,就可以建立客户到自己在服务器上的个人目录的连接.

.PP
当服务器收到连接请求时,首先在已定义的段中搜索,如果段名与被请求的共享资源名一致,则该段的内容就被采用.如果没有找到匹配的段,则被请求的资源就被当作是一个用户名,同时服务器查看本地的口令文件.如果该用户名在口令文件中存在且用户给出了正确的口令,服务器就会复制[homes]段的内容来生成一个共享资源(供该用户访问).


.PP
对新建共享会做以下修改： 

.TP 3
共享名从'homes'改为查到的用户名.
.TP
如果没有指定访问路径,则设置为该用户的个人目录.

.LP

.PP
如果要在[homes]段中定义访问路径\fBpath=\fR,宏%S也许对你很有用.举例如下：

.PP
\fBpath = /data/pchome/%S\fR

.PP
如果你的PC 有与UNIX服务器上个人目录不同的目录,象上面这样的设置会很有用的.

.PP
这是为大量用户提供对他们个人目录的访问的一种快速简洁的办法.

.PP
如果被请求访问的共享资源名就是'homes',那么,除了共享名不被改变为发出请求的用户名外,其他处理过程和前面提到的过程是类似的.这种方式适合于不同用户共享一台终端的情况.

.PP
在[homes]段中可以定义所有普通段中可以使用的选项,可是有些选项更有意义.下面是一个实用的、典型的[homes]段的例子：

.nf
[homes]
	read only = no
.fi

.PP
注意,很重要的一点是：如果在[homes]段中定义了允许以guest账户访问的话,任何人都可以\fB无须口令\fR而访问所有账户的宿主目录.也许在某些特殊情况下,这正是想要的结果,在这种情况下,你最好同时把[homes]段设置成\fB只读\fR.

.PP
注意,自动的宿主目录共享资源的\fB可浏览\fR标志是从[global]段继承来的,而不是[homes]段.这样,当在[homes]段中设置\fRbrowseable=no\fR时,用户就看不到单独的'homes'共享,但可以看到自动的宿主目录.

.SS "[printers] 打印机共享设置段"

.PP
这一段很象[homes]段,不过是用于设置共享打印机的.

.PP
如果在本配置文件中存在[printers]段,用户就可以连接到在主机上的printcap文件
中指定的任一打印机.

.PP
当服务器收到连接请求时,首先在已定义的段中搜索,如果有段名与被请求的共享资源名一致,则该段的内容就被采用.如果没有找到匹配的段,且在配置文件中存在[homes]段,则按照前面所说的方式处理.否则,被请求的资源就被当作是一个打印机名,服务器在适当的printcap文件中查找,检验被请求的共享资源名是否是有效的打印机共享名.如果共享名匹配,服务器就会复制[printers]段的内容来生成一个共享打印服务.

.PP
对新建共享的修改：

.TP 3
共享名被设置为查找到的打印机名.

.TP
如果未给出打印机名,则把打印机名设为前面查找到的打印机名.

.TP
如果该共享资源不允许以guest身份进行访问,且没有给出用户名,那么用户名就被设为前面查找到的打印机名.

.LP

.PP
注意,[printers]段必须设置为可打印,如果你不这样设置,服务器会拒绝装载配置文件.

.PP
指定的典型路径应该设为一个公用的可写假脱机目录(spooling)并且设置sticky标志.一个典型的[printers]段如下所示：

.nf
[printers]
	path = /usr/spool/public
	guest ok = yes
	printable = yes 
.fi

.PP
上台打印机在printcap文件中列出的所有别名都是服务器相关的有效打印机名.如果你系统的打印子系统的工作方式不是这样,你就必须设置一个伪printcap文件,其中包含一行或多行如下格式的设置：

.nf
别名1|别名2|别名3|别名4... 
.fi

.PP
每个别名必须是你的打印子系统可以接受的打印机名.在[global]段中指定这个新文件作为你的printcap文件.这个伪printcap文件可以包含任何你要的别名,而服务器只识别在此文件中列出的名字.这个技术可以很方便的用于限制对本地打印机子集的访问.

.PP
顺便提一下,printcap文件中的别名用每个记录第一项的任何部分来定义.记录由换行进行分隔.如果一条记录中有多个部分,中间用"|"符号分隔.
.RS
.Sh "Note"

.PP
注意,在SYSV系统中,用lpstat可以确定系统中安装了什么样的打印机.你可以设置"printcap name = lpstat"来自动获得打印机列表.详情参见"printcap name"选项.

.RE

.SH "选项 PARAMETERS"

.PP
选项定义了每个段的属性.

.PP
有些选项是在[global]段中设定的(比如有关\fB安全\fR特性的设置),有些可以用在任何段中的(比如\fB建立方式\fR ),剩下的就只能用在普通的段中了.在以下的描述中,[homes]和[printers]段被看作是普通段.标记(\fBG\fR)表示此选项只能在[global]段中使用,标记(\fBS\fR)表示此选项可以在服务定义段中使用.注意,有(\fBS\fR)标记的选项也可以用在[global]段中,在这种情况下,这个选项设置被当作所有其他段的缺省设置.

.PP
选项的详细说明是按照字母顺序排列的,这样也许不是最好的分类方式,但至少保证你可以找得到他们.如果有多个同义词,那么我们只对首选的那个作详细说明,其他的同义词都只指明参阅那个首选的选项名.

.SH "变量替换 VARIABLE SUBSTITUTIONS"

.PP
在配置文件中可以用很多字符串进行替换.例如,当用户以john的名称建立连接后,选项"path = /tmp/%u"就被解释成"path = /tmp/john".


.PP
这些置换会在后面的描述中说明,这里说明一些可以用在任何地方的通用置换.它们是：

.TP
%U
对话用户名(客户端想要的用户名不一定与取得的一致.)


.TP
%G
%U的用户组名 


.TP
%h
运行Samba的主机的internet主机名 


.TP
%m
客户机的NetBIOS名(非常有用) 


.TP
%L
服务器的NetBIOS名.这使得你可以根据调用的客户端来改变你的配置,这样你的服务器就可以拥有"双重个性". 

Note that this parameter is not available when Samba listens on port 445, as clients no longer send this information


.TP
%M
客户端的internet主机名 


.TP
%R
协议协商后选择的协议,它可以是CORE,COREPLUS,LANMAN1,LANMAN2或NT1中的一种.

.TP
%d
当前samba服务器的进程号.


.TP
%a
远程主机的结构.现在只能认出来某些类型,并且不是100%可靠.目前支持的有Samba、WfWg、WinNT和Win95.任何其他的都被认作"UNKNOWN".如果出现错误就给samba-bugs@samba.org发一个3级的日志以便修复这个bug.

.TP
%I
客户机的IP地址.


.TP
%T
当前的日期和时间.


.TP
%D
Name of the domain or workgroup of the current user\&.


.TP
%$(\fIenvvar\fR)
The value of the environment variable \fIenvar\fR\&.


.PP
The following substitutes apply only to some configuration options(only those that are used when a connection has been established):

.TP
%S
当前服务名 


.TP
%P
当前服务的根目录 


.TP
%u
当前服务的用户名 


.TP
%g
%u的用户组名 


.TP
%H
%u所表示的用户的宿主目录 

.TP
%N
tNIS服务器的名字.它从auto.map获得.如果没有用\fB--with-auto-mount\fR选项编译samba,那么它的值和%L相同.

.TP
%p
用户宿主目录的路径.它由NIS的auot.map得到.NIS的auot.map入口项被分为"%N:%p".

.PP
灵活运用这些置换和其他的smb.conf选项可以做出非常有创造性的事情来.

.SH NAME

.PP
Samba支持"名称修正",这样dos和windows客户端就可以使用与8.3格式不一致的文件.也可以用来调整8.3格式文件名的大小写.

.PP

有一些选项可以控制名称修正的执行,下面集中列出来.对于缺省情况请看testparm程序的输出结果.

.PP
所有这些选项都可以针对每个服务项单独设置(当然也可以设为全局变量).

.PP
这些选项是: 

.TP
mangle case = yes/no
作用是控制是否对不符合缺省写法的名称进行修正.例如,如果设为yes,象"Mail"这样的文件名就会被修正.缺省设置是\fBno\fR.

.TP
case sensitive = yes/no
控制文件名是否区分大小写.如果不区分的话,Samba就必须在传递名称时查找并匹配文件名.缺省设置是\fBno\fR.

.TP
default case = upper/lower
控制新文件名大小写缺省值.缺省设置是\fB小写\fR.


.TP
preserve case = yes/no
控制建新文件时是否用客户所提供的大小写形式,或强制用缺省形式.缺省为\fByes\fR.


.TP
short preserve case = yes/no
控制新建8.3格式的文件名时是全部用大写及合适长度,还是强制用缺省情况.它可以和上面的"preserve case = yes"联用以允许长文件名保持大小写不变,而短文件名为小写.本项的缺省设置是\fByes\fR.


.PP
缺省情况下,Samba3.0与Windows NT相同,就是不区分大小写但保持大小写形式.

.SH "用户名/口令检验中的注意事项 NOTE ABOUT USERNAME/PASSWORD VALIDATION"

.PP
用户有多种连接到服务项的方式.服务器按照下面的步骤来确定是否允许客户对指定服务的连接.如果下面步骤全部失败,则拒绝用户的连接请求.如果某一步通过,余下的检验就不再进行.

.PP
如果被请求的服务项设置为\fIguest only = yes\fR，并且，服务运行在共享级安全模式(\fIsecurity = share\fR) ,则跳过1--5步检查.

.TP 3
第一步：
如果客户端提供一对用户名和口令,且这对用户名和口令经unix系统口令程序检验为有效,那么就以该用户名建立连接.注意,这包括用\fI\\\\server\\service%username\fR方式传递用户名.

.TP
第二步：
如果客户端事先在系统上注册了一个用户名,并且提供了正确的口令,就允许建立连接.

.TP
第三步：
根据提供的口令检查客户端的netbios名及以前用过的用户名,如匹配,就允许以该用户名建立连接.

.TP
第四步：
如果客户端以前有合法的用户名和口令,并获得了有效的令牌,就允许以该用户名建立连接.

.TP
第五步：
如果在\fIsmb.conf\fR里设置了"user = "字段,且客户端提供了一个口令,口令经UNIX系统检验,并与"user="字段里某一个用户匹配,那么就允许以"user="里匹配到的用户名建立连接.如果"user="字段是以@开始,那么该名字会展开为同名组里的用户名列表 .

.TP
第六步：
如果这是一个提供给guest用的服务项,那么连接以"guest account ="里给出的用户名建立,而不考虑提供的口令.

.LP

.SH "全局选项完整列表 COMPLETE LIST OF GLOBAL PARAMETERS"

.PP
以下列出了所有的全局选项,各选项的详细说明请参看后面的相应段落.注意,有些选项的意义是相同的.

.TP 3
\(bu
\fIabort shutdown script\fR

.TP
\(bu
\fIadd group script\fR

.TP
\(bu
\fIadd machine script\fR

.TP
\(bu
\fIaddprinter command\fR

.TP
\(bu
\fIadd share command\fR

.TP
\(bu
\fIadd user script\fR

.TP
\(bu
\fIadd user to group script\fR

.TP
\(bu
\fIafs username map\fR

.TP
\(bu
\fIalgorithmic rid base\fR

.TP
\(bu
\fIallow trusted domains\fR

.TP
\(bu
\fIannounce as\fR

.TP
\(bu
\fIannounce version\fR

.TP
\(bu
\fIauth methods\fR

.TP
\(bu
\fIauto services\fR

.TP
\(bu
\fIbind interfaces only\fR

.TP
\(bu
\fIbrowse list\fR

.TP
\(bu
\fIchange notify timeout\fR

.TP
\(bu
\fIchange share command\fR

.TP
\(bu
\fIclient lanman auth\fR

.TP
\(bu
\fIclient ntlmv2 auth\fR

.TP
\(bu
\fIclient plaintext auth\fR

.TP
\(bu
\fIclient schannel\fR

.TP
\(bu
\fIclient signing\fR

.TP
\(bu
\fIclient use spnego\fR

.TP
\(bu
\fIconfig file\fR

.TP
\(bu
\fIdeadtime\fR

.TP
\(bu
\fIdebug hires timestamp\fR

.TP
\(bu
\fIdebuglevel\fR

.TP
\(bu
\fIdebug pid\fR

.TP
\(bu
\fIdebug timestamp\fR

.TP
\(bu
\fIdebug uid\fR

.TP
\(bu
\fIdefault\fR

.TP
\(bu
\fIdefault service\fR

.TP
\(bu
\fIdelete group script\fR

.TP
\(bu
\fIdeleteprinter command\fR

.TP
\(bu
\fIdelete share command\fR

.TP
\(bu
\fIdelete user from group script\fR

.TP
\(bu
\fIdelete user script\fR

.TP
\(bu
\fIdfree command\fR

.TP
\(bu
\fIdisable netbios\fR

.TP
\(bu
\fIdisable spoolss\fR

.TP
\(bu
\fIdisplay charset\fR

.TP
\(bu
\fIdns proxy\fR

.TP
\(bu
\fIdomain logons\fR

.TP
\(bu
\fIdomain master\fR

.TP
\(bu
\fIdos charset\fR

.TP
\(bu
\fIenable rid algorithm\fR

.TP
\(bu
\fIencrypt passwords\fR

.TP
\(bu
\fIenhanced browsing\fR

.TP
\(bu
\fIenumports command\fR

.TP
\(bu
\fIget quota command\fR

.TP
\(bu
\fIgetwd cache\fR

.TP
\(bu
\fIguest account\fR

.TP
\(bu
\fIhide local users\fR

.TP
\(bu
\fIhomedir map\fR

.TP
\(bu
\fIhost msdfs\fR

.TP
\(bu
\fIhostname lookups\fR

.TP
\(bu
\fIhosts equiv\fR

.TP
\(bu
\fIidmap backend\fR

.TP
\(bu
\fIidmap gid\fR

.TP
\(bu
\fIidmap uid\fR

.TP
\(bu
\fIinclude\fR

.TP
\(bu
\fIinterfaces\fR

.TP
\(bu
\fIkeepalive\fR

.TP
\(bu
\fIkernel change notify\fR

.TP
\(bu
\fIkernel oplocks\fR

.TP
\(bu
\fIlanman auth\fR

.TP
\(bu
\fIlarge readwrite\fR

.TP
\(bu
\fIldap admin dn\fR

.TP
\(bu
\fIldap delete dn\fR

.TP
\(bu
\fIldap filter\fR

.TP
\(bu
\fIldap group suffix\fR

.TP
\(bu
\fIldap idmap suffix\fR

.TP
\(bu
\fIldap machine suffix\fR

.TP
\(bu
\fIldap passwd sync\fR

.TP
\(bu
\fIldap port\fR

.TP
\(bu
\fIldap server\fR

.TP
\(bu
\fIldap ssl\fR

.TP
\(bu
\fIldap suffix\fR

.TP
\(bu
\fIldap user suffix\fR

.TP
\(bu
\fIlm announce\fR

.TP
\(bu
\fIlm interval\fR

.TP
\(bu
\fIload printers\fR

.TP
\(bu
\fIlocal master\fR

.TP
\(bu
\fIlock dir\fR

.TP
\(bu
\fIlock directory\fR

.TP
\(bu
\fIlock spin count\fR

.TP
\(bu
\fIlock spin time\fR

.TP
\(bu
\fIlog file\fR

.TP
\(bu
\fIlog level\fR

.TP
\(bu
\fIlogon drive\fR

.TP
\(bu
\fIlogon home\fR

.TP
\(bu
\fIlogon path\fR

.TP
\(bu
\fIlogon script\fR

.TP
\(bu
\fIlpq cache time\fR

.TP
\(bu
\fImachine password timeout\fR

.TP
\(bu
\fImangled stack\fR

.TP
\(bu
\fImangle prefix\fR

.TP
\(bu
\fImangling method\fR

.TP
\(bu
\fImap to guest\fR

.TP
\(bu
\fImax disk size\fR

.TP
\(bu
\fImax log size\fR

.TP
\(bu
\fImax mux\fR

.TP
\(bu
\fImax open files\fR

.TP
\(bu
\fImax protocol\fR

.TP
\(bu
\fImax smbd processes\fR

.TP
\(bu
\fImax ttl\fR

.TP
\(bu
\fImax wins ttl\fR

.TP
\(bu
\fImax xmit\fR

.TP
\(bu
\fImessage command\fR

.TP
\(bu
\fImin passwd length\fR

.TP
\(bu
\fImin password length\fR

.TP
\(bu
\fImin protocol\fR

.TP
\(bu
\fImin wins ttl\fR

.TP
\(bu
\fIname cache timeout\fR

.TP
\(bu
\fIname resolve order\fR

.TP
\(bu
\fInetbios aliases\fR

.TP
\(bu
\fInetbios name\fR

.TP
\(bu
\fInetbios scope\fR

.TP
\(bu
\fInis homedir\fR

.TP
\(bu
\fIntlm auth\fR

.TP
\(bu
\fInt pipe support\fR

.TP
\(bu
\fInt status support\fR

.TP
\(bu
\fInull passwords\fR

.TP
\(bu
\fIobey pam restrictions\fR

.TP
\(bu
\fIoplock break wait time\fR

.TP
\(bu
\fIos2 driver map\fR

.TP
\(bu
\fIos level\fR

.TP
\(bu
\fIpam password change\fR

.TP
\(bu
\fIpanic action\fR

.TP
\(bu
\fIparanoid server security\fR

.TP
\(bu
\fIpassdb backend\fR

.TP
\(bu
\fIpasswd chat\fR

.TP
\(bu
\fIpasswd chat debug\fR

.TP
\(bu
\fIpasswd program\fR

.TP
\(bu
\fIpassword level\fR

.TP
\(bu
\fIpassword server\fR

.TP
\(bu
\fIpid directory\fR

.TP
\(bu
\fIprefered master\fR

.TP
\(bu
\fIpreferred master\fR

.TP
\(bu
\fIpreload\fR

.TP
\(bu
\fIpreload modules\fR

.TP
\(bu
\fIprintcap\fR

.TP
\(bu
\fIprivate dir\fR

.TP
\(bu
\fIprotocol\fR

.TP
\(bu
\fIread bmpx\fR

.TP
\(bu
\fIread raw\fR

.TP
\(bu
\fIread size\fR

.TP
\(bu
\fIrealm\fR

.TP
\(bu
\fIremote announce\fR

.TP
\(bu
\fIremote browse sync\fR

.TP
\(bu
\fIrestrict anonymous\fR

.TP
\(bu
\fIroot\fR

.TP
\(bu
\fIroot dir\fR

.TP
\(bu
\fIroot directory\fR

.TP
\(bu
\fIsecurity\fR

.TP
\(bu
\fIserver schannel\fR

.TP
\(bu
\fIserver signing\fR

.TP
\(bu
\fIserver string\fR

.TP
\(bu
\fIset primary group script\fR

.TP
\(bu
\fIset quota command\fR

.TP
\(bu
\fIshow add printer wizard\fR

.TP
\(bu
\fIshutdown script\fR

.TP
\(bu
\fIsmb passwd file\fR

.TP
\(bu
\fIsmb ports\fR

.TP
\(bu
\fIsocket address\fR

.TP
\(bu
\fIsocket options\fR

.TP
\(bu
\fIsource environment\fR

.TP
\(bu
\fIstat cache\fR

.TP
\(bu
\fIsyslog\fR

.TP
\(bu
\fIsyslog only\fR

.TP
\(bu
\fItemplate homedir\fR

.TP
\(bu
\fItemplate primary group\fR

.TP
\(bu
\fItemplate shell\fR

.TP
\(bu
\fItime offset\fR

.TP
\(bu
\fItime server\fR

.TP
\(bu
\fItimestamp logs\fR

.TP
\(bu
\fIunicode\fR

.TP
\(bu
\fIunix charset\fR

.TP
\(bu
\fIunix extensions\fR

.TP
\(bu
\fIunix password sync\fR

.TP
\(bu
\fIupdate encrypted\fR

.TP
\(bu
\fIuse mmap\fR

.TP
\(bu
\fIusername level\fR

.TP
\(bu
\fIusername map\fR

.TP
\(bu
\fIuse spnego\fR

.TP
\(bu
\fIutmp\fR

.TP
\(bu
\fIutmp directory\fR

.TP
\(bu
\fIwinbind cache time\fR

.TP
\(bu
\fIwinbind enable local accounts\fR

.TP
\(bu
\fIwinbind enum groups\fR

.TP
\(bu
\fIwinbind enum users\fR

.TP
\(bu
\fIwinbind gid\fR

.TP
\(bu
\fIwinbind separator\fR

.TP
\(bu
\fIwinbind trusted domains only\fR

.TP
\(bu
\fIwinbind uid\fR

.TP
\(bu
\fIwinbind use default domain\fR

.TP
\(bu
\fIwins hook\fR

.TP
\(bu
\fIwins partners\fR

.TP
\(bu
\fIwins proxy\fR

.TP
\(bu
\fIwins server\fR

.TP
\(bu
\fIwins support\fR

.TP
\(bu
\fIworkgroup\fR

.TP
\(bu
\fIwrite raw\fR

.TP
\(bu
\fIwtmp directory\fR

.LP

.SH "服务选项完整列表 COMPLETE LIST OF SERVICE PARAMETERS"

.PP
以下列出了所有关于服务项的选项,各选项的详细说明请参见后面的相应段落.注意,有些选项的意义是相同的.

.TP 3
\(bu
\fIacl compatibility\fR

.TP
\(bu
\fIadmin users\fR

.TP
\(bu
\fIafs share\fR

.TP
\(bu
\fIallow hosts\fR

.TP
\(bu
\fIavailable\fR

.TP
\(bu
\fIblocking locks\fR

.TP
\(bu
\fIblock size\fR

.TP
\(bu
\fIbrowsable\fR

.TP
\(bu
\fIbrowseable\fR

.TP
\(bu
\fIcase sensitive\fR

.TP
\(bu
\fIcasesignames\fR

.TP
\(bu
\fIcomment\fR

.TP
\(bu
\fIcopy\fR

.TP
\(bu
\fIcreate mask\fR

.TP
\(bu
\fIcreate mode\fR

.TP
\(bu
\fIcsc policy\fR

.TP
\(bu
\fIdefault case\fR

.TP
\(bu
\fIdefault devmode\fR

.TP
\(bu
\fIdelete readonly\fR

.TP
\(bu
\fIdelete veto files\fR

.TP
\(bu
\fIdeny hosts\fR

.TP
\(bu
\fIdirectory\fR

.TP
\(bu
\fIdirectory mask\fR

.TP
\(bu
\fIdirectory mode\fR

.TP
\(bu
\fIdirectory security mask\fR

.TP
\(bu
\fIdont descend\fR

.TP
\(bu
\fIdos filemode\fR

.TP
\(bu
\fIdos filetime resolution\fR

.TP
\(bu
\fIdos filetimes\fR

.TP
\(bu
\fIexec\fR

.TP
\(bu
\fIfake directory create times\fR

.TP
\(bu
\fIfake oplocks\fR

.TP
\(bu
\fIfollow symlinks\fR

.TP
\(bu
\fIforce create mode\fR

.TP
\(bu
\fIforce directory mode\fR

.TP
\(bu
\fIforce directory security mode\fR

.TP
\(bu
\fIforce group\fR

.TP
\(bu
\fIforce security mode\fR

.TP
\(bu
\fIforce user\fR

.TP
\(bu
\fIfstype\fR

.TP
\(bu
\fIgroup\fR

.TP
\(bu
\fIguest account\fR

.TP
\(bu
\fIguest ok\fR

.TP
\(bu
\fIguest only\fR

.TP
\(bu
\fIhide dot files\fR

.TP
\(bu
\fIhide files\fR

.TP
\(bu
\fIhide special files\fR

.TP
\(bu
\fIhide unreadable\fR

.TP
\(bu
\fIhide unwriteable files\fR

.TP
\(bu
\fIhosts allow\fR

.TP
\(bu
\fIhosts deny\fR

.TP
\(bu
\fIinherit acls\fR

.TP
\(bu
\fIinherit permissions\fR

.TP
\(bu
\fIinvalid users\fR

.TP
\(bu
\fIlevel2 oplocks\fR

.TP
\(bu
\fIlocking\fR

.TP
\(bu
\fIlppause command\fR

.TP
\(bu
\fIlpq command\fR

.TP
\(bu
\fIlpresume command\fR

.TP
\(bu
\fIlprm command\fR

.TP
\(bu
\fImagic output\fR

.TP
\(bu
\fImagic script\fR

.TP
\(bu
\fImangle case\fR

.TP
\(bu
\fImangled map\fR

.TP
\(bu
\fImangled names\fR

.TP
\(bu
\fImangling char\fR

.TP
\(bu
\fImap acl inherit\fR

.TP
\(bu
\fImap archive\fR

.TP
\(bu
\fImap hidden\fR

.TP
\(bu
\fImap system\fR

.TP
\(bu
\fImax connections\fR

.TP
\(bu
\fImax print jobs\fR

.TP
\(bu
\fImax reported print jobs\fR

.TP
\(bu
\fImin print space\fR

.TP
\(bu
\fImsdfs proxy\fR

.TP
\(bu
\fImsdfs root\fR

.TP
\(bu
\fInt acl support\fR

.TP
\(bu
\fIonly guest\fR

.TP
\(bu
\fIonly user\fR

.TP
\(bu
\fIoplock contention limit\fR

.TP
\(bu
\fIoplocks\fR

.TP
\(bu
\fIpath\fR

.TP
\(bu
\fIposix locking\fR

.TP
\(bu
\fIpostexec\fR

.TP
\(bu
\fIpreexec\fR

.TP
\(bu
\fIpreexec close\fR

.TP
\(bu
\fIpreserve case\fR

.TP
\(bu
\fIprintable\fR

.TP
\(bu
\fIprintcap name\fR

.TP
\(bu
\fIprint command\fR

.TP
\(bu
\fIprinter\fR

.TP
\(bu
\fIprinter admin\fR

.TP
\(bu
\fIprinter name\fR

.TP
\(bu
\fIprinting\fR

.TP
\(bu
\fIprint ok\fR

.TP
\(bu
\fIprofile acls\fR

.TP
\(bu
\fIpublic\fR

.TP
\(bu
\fIqueuepause command\fR

.TP
\(bu
\fIqueueresume command\fR

.TP
\(bu
\fIread list\fR

.TP
\(bu
\fIread only\fR

.TP
\(bu
\fIroot postexec\fR

.TP
\(bu
\fIroot preexec\fR

.TP
\(bu
\fIroot preexec close\fR

.TP
\(bu
\fIsecurity mask\fR

.TP
\(bu
\fIset directory\fR

.TP
\(bu
\fIshare modes\fR

.TP
\(bu
\fIshort preserve case\fR

.TP
\(bu
\fIstrict allocate\fR

.TP
\(bu
\fIstrict locking\fR

.TP
\(bu
\fIstrict sync\fR

.TP
\(bu
\fIsync always\fR

.TP
\(bu
\fIuse client driver\fR

.TP
\(bu
\fIuser\fR

.TP
\(bu
\fIusername\fR

.TP
\(bu
\fIusers\fR

.TP
\(bu
\fIuse sendfile\fR

.TP
\(bu
\fI-valid\fR

.TP
\(bu
\fIvalid users\fR

.TP
\(bu
\fIveto files\fR

.TP
\(bu
\fIveto oplock files\fR

.TP
\(bu
\fIvfs object\fR

.TP
\(bu
\fIvfs objects\fR

.TP
\(bu
\fIvolume\fR

.TP
\(bu
\fIwide links\fR

.TP
\(bu
\fIwritable\fR

.TP
\(bu
\fIwriteable\fR

.TP
\(bu
\fIwrite cache size\fR

.TP
\(bu
\fIwrite list\fR

.TP
\(bu
\fIwrite ok\fR

.LP

.SH "每一个选项的详细解释  EXPLANATION OF EACH PARAMETER"

.TP
abort shutdown script (G)
\fBThis parameter only exists in the HEAD cvs branch\fR This a full path name to a script called by \fBsmbd\fR(8) that should stop a shutdown procedure issued by the \fIshutdown script\fR\&.


This command will be run as user\&.


缺省设置: \fBNone\fR\&.


示例: \fBabort shutdown script = /sbin/shutdown -c\fR


.TP
acl compatibility (S)
This parameter specifies what OS ACL semantics should be compatible with\&. Possible values are \fBwinnt\fR for Windows NT 4, \fBwin2k\fR for Windows 2000 and above and \fBauto\fR\&. If you specify \fBauto\fR, the value for this parameter will be based upon the version of the client\&. There should be no reason to change this parameter from the default\&.


缺省设置: \fBacl compatibility = Auto\fR


示例: \fBacl compatibility = win2k\fR


.TP
add group script (G)
This is the full pathname to a script that will be run \fBAS ROOT\fR by \fBsmbd\fR(8) when a new group is requested\&. It will expand any \fI%g\fR to the group name passed\&. This script is only useful for installations using the Windows NT domain administration tools\&. The script is free to create a group with an arbitrary name to circumvent unix group name restrictions\&. In that case the script must print the numeric gid of the created group on stdout\&.


.TP
add machine script (G)
This is the full pathname to a script that will be run by \fBsmbd\fR(8) when a machine is added to it's domain using the administrator username and password method\&.


This option is only required when using sam back-ends tied to the Unix uid method of RID calculation such as smbpasswd\&. This option is only available in Samba 3\&.0\&.


缺省设置: \fBadd machine script = <空字符串>\fR


示例: \fBadd machine script = /usr/sbin/adduser -n -g machines -c Machine -d /dev/null -s /bin/false %u\fR


.TP
addprinter command (G)
With the introduction of MS-RPC based printing support for Windows NT/2000 clients in Samba 2\&.2, The MS Add Printer Wizard (APW) icon is now also available in the "Printers\&.\&.\&." folder displayed a share listing\&. The APW allows for printers to be add remotely to a Samba or Windows NT/2000 print server\&.


For a Samba host this means that the printer must be physically added to the underlying printing system\&. The \fIadd printer command\fR defines a script to be run which will perform the necessary operations for adding the printer to the print system and to add the appropriate service definition to the \fIsmb\&.conf\fR file in order that it can be shared by \fBsmbd\fR(8)\&.


The \fIaddprinter command\fR is automatically invoked with the following parameter (in order):


\fIprinter name\fR

\fIshare name\fR

\fIport name\fR

\fIdriver name\fR

\fIlocation\fR

\fIWindows 9x driver location\fR

All parameters are filled in from the PRINTER_INFO_2 structure sent by the Windows NT/2000 client with one exception\&. The "Windows 9x driver location" parameter is included for backwards compatibility only\&. The remaining fields in the structure are generated from answers to the APW questions\&.


Once the \fIaddprinter command\fR has been executed, \fBsmbd\fR will reparse the \fI smb\&.conf\fR to determine if the share defined by the APW exists\&. If the sharename is still invalid, then \fBsmbd \fR will return an ACCESS_DENIED error to the client\&.


The "add printer command" program can output a single line of text, which Samba will set as the port the new printer is connected to\&. If this line isn't output, Samba won't reload its printer shares\&.


参见 \fI deleteprinter command\fR, \fIprinting\fR, \fIshow add printer wizard\fR


缺省设置: \fBnone\fR


示例: \fBaddprinter command = /usr/bin/addprinter\fR


.TP
add share command (G)
Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The \fIadd share command\fR is used to define an external program or script which will add a new service definition to \fIsmb\&.conf\fR\&. In order to successfully execute the \fIadd share command\fR, \fBsmbd\fR requires that the administrator be connected using a root account (i\&.e\&. uid == 0)\&.


When executed, \fBsmbd\fR will automatically invoke the \fIadd share command\fR with four parameters\&.


\fIconfigFile\fR - the location of the global \fIsmb\&.conf\fR file\&.

\fIshareName\fR - the name of the new share\&.

\fIpathName\fR - path to an **existing** directory on disk\&.

\fIcomment\fR - comment string to associate with the new share\&.

This parameter is only used for add file shares\&. To add printer shares, see the \fIaddprinter command\fR\&.


参见 \fIchange share command\fR, \fIdelete share command\fR\&.


缺省设置: \fBnone\fR


示例: \fBadd share command = /usr/local/bin/addshare\fR


.TP
add user script (G)
这个选项指出一个脚本的完整文件路径,这个脚本将在特定环境下(下面有详细解释)由\fBsmbd\fR (8)\fB以root身份\fR执行.

通常,samba服务器需要为所有访问服务器上文件的用户建立UNIX用户账号.但是在使用Windows NT账号数据库作为主用户数据库的站点,建立这些用户并在与NT的主域控制器保持用户列表同步是一件很麻烦的事情.这个选项使smbd可以在用户访问时\fB根据需要\fR自动生成UNIX用户账号.

为了使用这个选项,\fBsmbd\fR\fB必须\fR被设置成\fIsecurity=server\fR或者\fIsecurity=domain\fR,并且\fIadd user script\fR必须设为用\fI%u\fR参数来建立unix帐号的脚本文件的全路径,\fI%u\fR扩展成建立的unix帐号名.

当windows用户尝试访问samba服务器时,在登陆时(建立SMB协议会话),\fBsmbd\fR与\fI口令服务器\fR联系,并尝试验证用户名和口令.如果成功,\fBsmbd\fR就会根据unix的口令文件试着将这个windows用户映射成一个unix用户.如果查找失败,但设置了\fIadd user script \fR,smbd就会以\fBroot\fR的身份调用这个脚本,将\fI%u\fR扩展成该要建立的用户账号.

如果这个脚本执行成功,\fBsmbd\fR就认为这个用户已经存在.用这种方式,可以动态建立UNIX用户账号并匹配已有的NT账号.

参见 \fI security\fR, \fIpassword server\fR, \fIdelete user script\fR.


缺省设置: \fBadd user script = <空字符串>\fR


示例: \fBadd user script = /usr/local/samba/bin/add_user %u\fR


.TP
add user to group script (G)
Full path to the script that will be called when a user is added to a group using the Windows NT domain administration tools\&. It will be run by \fBsmbd\fR(8) \fBAS ROOT\fR\&. Any \fI%g\fR will be replaced with the group name and any \fI%u\fR will be replaced with the user name\&.


缺省设置: \fBadd user to group script = \fR


示例: \fBadd user to group script = /usr/sbin/adduser %u %g\fR


.TP
admin users (S)
admin users定义一组对共享有管理特权的用户.就相当于这些用户可以象超级用户那样操作所有的文件.

小心使用该选项,因为在这个名单里的用户可以对共享资源作任何他们想做的事.

缺省设置: \fB没有 admin users\fR


示例: \fBadmin users = jason\fR


.TP
afs share (S)
This parameter controls whether special AFS features are enabled for this share\&. If enabled, it assumes that the directory exported via the \fIpath\fR parameter is a local AFS import\&. The special AFS features include the attempt to hand-craft an AFS token if you enabled --with-fake-kaserver in configure\&.


缺省设置: \fBafs share = no\fR


示例: \fBafs share = yes\fR


.TP
afs username map (G)
If you are using the fake kaserver AFS feature, you might want to hand-craft the usernames you are creating tokens for\&. For example this is necessary if you have users from several domain in your AFS Protection Database\&. One possible scheme to code users as DOMAIN+User as it is done by winbind with the + as a separator\&.


The mapped user name must contain the cell name to log into, so without setting this parameter there will be no token\&.


缺省设置: \fBnone\fR


示例: \fBafs username map = %u@afs.samba.org\fR


.TP
algorithmic rid base (G)
This determines how Samba will use its algorithmic mapping from uids/gid to the RIDs needed to construct NT Security Identifiers\&.


Setting this option to a larger value could be useful to sites transitioning from WinNT and Win2k, as existing user and group rids would otherwise clash with sytem users etc\&.


All UIDs and GIDs must be able to be resolved into SIDs for the correct operation of ACLs on the server\&. As such the algorithmic mapping can't be 'turned off', but pushing it 'out of the way' should resolve the issues\&. Users and groups can then be assigned 'low' RIDs in arbitary-rid supporting backends\&.


缺省设置: \fBalgorithmic rid base = 1000\fR


示例: \fBalgorithmic rid base = 100000\fR


.TP
allow hosts (S)
和\fIhosts allow\fR同义. 


.TP
allow trusted domains (G)
这个选项只在\fIsecurity\fR选项被设成\fBserver\fR或\fBdomain\fR模式时才有效果.如果设为no的话,尝试联接到smbd运行的域或工作组以外的资源时会失败,即使那个域是由远程服务器验证为可信的也不行.


如果你只需要在域中对成员提供服务资源的话这个选项是非常有用的.举例来说,假设有两个域DOMA和DOMB,DOMA已经向DOMB进行了委托,而samba服务器位于DOMA中.在通常情况下,在DOMB中有账号的用户可以用同样的samba服务器账号名访问UNIX上的资源.而无须他在DOMA上有账号.不过这样就使安全界线更难分清了.


缺省设置: \fBallow trusted domains = yes\fR


.TP
announce as (G)
这个选项定义\fBnmbd\fR(8) 对网络邻居声称的服务器类型.缺省为windows NT.可选项有"NT",它与"NT Server"同义,"NT Server","NT Workstation","Win95"或"WfW",它们分别代表Windows NT Server,Windows NT Workstation,Windows 95和Windows for Workgroups.除非有特殊的需要不想让samba以windows NT的身份出现,一般不要改动这个选项,因为这可能会影响samba作为浏览服务器的正确性.


缺省设置: \fBannounce as = NT Server\fR


示例: \fBannounce as = Win95\fR


.TP
announce version (G)
此选项定义nmbd用于声明服务器版本号的主版本号和次版本号.缺省版本号的是4.9。除非有特殊的必要想将samba设为低版本,一般不要改动这个选项.

缺省设置: \fBannounce version = 4.9\fR


示例: \fBannounce version = 2.0\fR


.TP
auth methods (G)
This option allows the administrator to chose what authentication methods \fBsmbd\fR will use when authenticating a user\&. This option defaults to sensible values based on \fIsecurity\fR\&. This should be considered a developer option and used only in rare circumstances\&. In the majority (if not all) of production servers, the default setting should be adequate\&.


Each entry in the list attempts to authenticate the user in turn, until the user authenticates\&. In practice only one method will ever actually be able to complete the authentication\&.


Possible options include \fBguest\fR (anonymous access), \fBsam\fR (lookups in local list of accounts based on netbios name or domain name), \fBwinbind\fR (relay authentication requests for remote users through winbindd), \fBntdomain\fR (pre-winbindd method of authentication for remote domain users; deprecated in favour of winbind method), \fBtrustdomain\fR (authenticate trusted users by contacting the remote DC directly from smbd; deprecated in favour of winbind method)\&.


缺省设置: \fBauth methods = <空字符串>\fR


示例: \fBauth methods = guest sam winbind\fR


.TP
auto services (G)
与 \fIpreload\fR 同义.


.TP
available (S)
这个选项可以用来关掉一个服务项.如果\fIavailable = no\fR,那么\fB所有\fR对该服务的连接都会失败.而这些失败会被记录下来.

缺省设置: \fBavailable = yes\fR


.TP
bind interfaces only (G)
这个全局选项允许samba管理员限制一台主机的某一个网络接口用于响应请求.这会对于\fBsmbd\fR(8)文件服务和\fBnmbd\fR(8)名字服务造成些许影响.

对于名字服务,它将使\fBnmbd\fR 绑定到'interfaces'选项里列出的网络接口的137和138端口上.为了读取广播消息,\fBnmbd\fR也会绑定到"所有地址"接口(0.0.0.0)的137和138端口上.如果没有设置这个选项,\fBnmbd\fR将在所有的接口上响应名字服务请求.如果设置了"bind interfaces only",那么\fBnmbd\fR将在广播接口上检查任何分组的源地址,丢弃任何不匹配\fIinterfaces\fR选项所列接口之广播地址的分组.当在其它接口上收到单播分组,此选项使nmbd拒绝对任何不是是\fIinterfaces\fR选项所列接口来发送分组的主机的服务.IP源地址哄骗可以使这个简单的检查失效,所以不要将\fBnmbd\fR安全功能用于严肃场合.

对于文件服务,该选项使\fBsmbd\fR(8)只在'interfaces'选项所列的网络接口上绑定.这就限制\fBsmbd\fR 只响应那些接口上发出的分组.注意,不应该在PPP和时断时续的机器上或非广播网络接口上使用这个选项,因为它处理不了非永久连接的接口.

如果设置了\fIbind interfaces only\fR,除非网络地址\fB127.0.0.1\fR被加到\fIinterfaces\fR选项的列表中,否则\fBsmbpasswd\fR(8)和\fBswat\fR(8) 可能不会象我们所期望的那样工作,原因如下:

为了改变用户SMB口令,\fBsmbpasswd\fR缺省情况下会以smb客户端的身份连接本地主机地址\fBlocalhost - 127.0.0.1\fR,发出更改口令请求.如果设置了\fIbind interfaces only\fR,\fBsmbpasswd\fR在缺省情况下将会连接失败,除非\fB127.0.0.1\fR已被加入到\fIinterfaces\fR选项.另外,可以用\fI-r remote machine\fR选项指定本地主机的主网络接口ip地址,这样\fBsmbpasswd\fR就会强制使用本地的主ip地址.

\fBswat\fR的状态页面会在\fB127.0.0.1\fR尝试连接\fBsmbd\fR和 \fBnmbd\fR,以确定它们是否正在运行.如果不加入\fB127.0.0.1\fR,将会使\fBsmbd\fR和\fBnmbd\fR 总表示没有运行甚至实际情况并不是这样.这就阻止了\fB swat\fR启动/停止/重启动\fBsmbd\fR 和\fBnmbd\fR进程.

缺省设置: \fBbind interfaces only = no\fR


.TP
blocking locks (S)
此项控制在客户为了在打开文件处获得一个字节范围的锁定而发出请求时\fBsmbd\fR(8)的动作,同时
该请求会有一个与之相关的时限.

如果设置了这个选项,锁定范围请求不能立即满足的话,samba将会在内部对请求进行排队,并且周期性地尝试获得锁定,直到超时.


如果这个选项设置为\fBno\fR,samba就会同以前版本那样,在锁定范围无法获得时立即使锁定请求失败.

缺省设置: \fBblocking locks = yes\fR


.TP
block size (S)
This parameter controls the behavior of \fBsmbd\fR(8) when reporting disk free sizes\&. By default, this reports a disk block size of 1024 bytes\&.


Changing this parameter may have some effect on the efficiency of client writes, this is not yet confirmed\&. This parameter was added to allow advanced administrators to change it (usually to a higher value) and test the effect it has on client write performance without re-compiling the code\&. As this is an experimental option it may be removed in a future release\&.


Changing this option does not change the disk free reporting size, just the block size unit reported to the client\&.


.TP
browsable (S)
与 \fIbrowseable\fR 同义。


.TP
browseable (S)
这个选项控制共享资源在可获得共享列表、net view命令及浏览列表里是否可见.

缺省设置: \fBbrowseable = yes\fR


.TP
browse list (G)
它控制\fBsmbd\fR(8)是否执行一个\fBNetServerEnum\fR调用来为客户提供一个浏览列表.正常情况它被设为\fByes\fR.这个选项可能永远不需要改动.

缺省设置: \fBbrowse list = yes\fR


.TP
case sensitive (S)
参见NAME MANGLING段的讨论.


缺省设置: \fBcase sensitive = no\fR


.TP
casesignames (S)
与 \fIcase sensitive\fR 同义.

.TP
change notify timeout (G)
samba允许客户端告诉服务器监视某个特定目录的任何变化,仅当有变化发生的时候回复SMB请求.这种连续不断的扫描在unix系统上代价很高,因此,\fBsmbd\fR(8)只在等待\fIchange notify timeout\fR时间后才对每个请求的目录执行一次扫描.


缺省设置: \fBchange notify timeout = 60\fR


示例: \fBchange notify timeout = 300\fR


这将把扫描时间改为每5分钟一次.


.TP
change share command (G)
Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The \fIchange share command\fR is used to define an external program or script which will modify an existing service definition in \fIsmb\&.conf\fR\&. In order to successfully execute the \fIchange share command\fR, \fBsmbd\fR requires that the administrator be connected using a root account (i\&.e\&. uid == 0)\&.


When executed, \fBsmbd\fR will automatically invoke the \fIchange share command\fR with four parameters\&.


\fIconfigFile\fR - the location of the global \fIsmb\&.conf\fR file\&.

\fIshareName\fR - the name of the new share\&.

\fIpathName\fR - path to an **existing** directory on disk\&.

\fIcomment\fR - comment string to associate with the new share\&.

This parameter is only used modify existing file shares definitions\&. To modify printer shares, use the "Printers\&.\&.\&." folder as seen when browsing the Samba host\&.


参见 \fIadd share command\fR, \fIdelete share command\fR\&.


缺省设置: \fBnone\fR


示例: \fBchange share command = /usr/local/bin/addshare\fR


.TP
client lanman auth (G)
This parameter determines whether or not \fBsmbclient\fR(8) and other samba client tools will attempt to authenticate itself to servers using the weaker LANMAN password hash\&. If disabled, only server which support NT password hashes (e\&.g\&. Windows NT/2000, Samba, etc\&.\&.\&. but not Windows 95/98) will be able to be connected from the Samba client\&.


The LANMAN encrypted response is easily broken, due to it's case-insensitive nature, and the choice of algorithm\&. Clients without Windows 95/98 servers are advised to disable this option\&.


Disabling this option will also disable the \fBclient plaintext auth\fR option


Likewise, if the \fBclient ntlmv2 auth\fR parameter is enabled, then only NTLMv2 logins will be attempted\&. Not all servers support NTLMv2, and most will require special configuration to us it\&.


Default : \fBclient lanman auth = yes\fR


.TP
client ntlmv2 auth (G)
This parameter determines whether or not \fBsmbclient\fR(8) will attempt to authenticate itself to servers using the NTLMv2 encrypted password response\&.


If enabled, only an NTLMv2 and LMv2 response (both much more secure than earlier versions) will be sent\&. Many servers (including NT4 < SP4, Win9x and Samba 2\&.2) are not compatible with NTLMv2\&.


Similarly, if enabled, NTLMv1, \fBclient lanman auth\fR and \fBclient plaintext auth\fR authentication will be disabled\&. This also disables share-level authentication\&.


If disabled, an NTLM response (and possibly a LANMAN response) will be sent by the client, depending on the value of \fBclient lanman auth\fR\&.


Note that some sites (particularly those following 'best practice' security polices) only allow NTLMv2 responses, and not the weaker LM or NTLM\&.


Default : \fBclient ntlmv2 auth = no\fR


.TP
client plaintext auth (G)
Specifies whether a client should send a plaintext password if the server does not support encrypted passwords\&.


缺省设置: \fBclient plaintext auth = yes\fR


.TP
client schannel (G)
This controls whether the client offers or even demands the use of the netlogon schannel\&. \fIclient schannel = no\fR does not offer the schannel, \fIserver schannel = auto\fR offers the schannel but does not enforce it, and \fIserver schannel = yes\fR denies access if the server is not able to speak netlogon schannel\&.


缺省设置: \fBclient schannel = auto\fR


示例: \fBclient schannel = yes\fR


.TP
client signing (G)
This controls whether the client offers or requires the server it talks to to use SMB signing\&. Possible values are \fBauto\fR, \fBmandatory\fR and \fBdisabled\fR\&.


When set to auto, SMB signing is offered, but not enforced\&. When set to mandatory, SMB signing is required and if set to disabled, SMB signing is not offered either\&.


缺省设置: \fBclient signing = auto\fR


.TP
client use spnego (G)
This variable controls controls whether samba clients will try to use Simple and Protected NEGOciation (as specified by rfc2478) with WindowsXP and Windows2000 servers to agree upon an authentication mechanism\&. SPNEGO client support for SMB Signing is currently broken, so you might want to turn this option off when operating with Windows 2003 domain controllers in particular\&.


缺省设置: \fBclient use spnego = yes\fR


.TP
comment (S)
这是一段当客户用\fB网上邻居\fR(\fBnet view\fR)察看服务器上共享资源时显示的说明文字.

如果想设置机器名后的说明文字请参考 \fI server string\fR 命令.


缺省设置: \fBNo comment string\fR


示例: \fBcomment = Fred's Files\fR


.TP
config file (G)
这可以使samba使用指定的配置文件来替代缺省的配置文件,(通常是\fIsmb\&.conf\fR).如果设置了这个选项,会出现一个先有鸡还是先有蛋的问题!


由于这个原因,如果在加载这个选项的时候发现配置文件名变化了,就会从新的配置文件里重新加载选项.


这个选项作为常用的替换非常有用.

如果这个配置文件不存在,那么就不会被加载.(允许你特殊地处理少数客户的配置文件)



示例: \fBconfig file = /usr/local/samba/lib/smb.conf.%m\fR


.TP
copy (S)
这使你可以克隆服务. 指定的服务以当前服务的名字进行简单的复制,当前服务里定义的选项将替代被拷服务里任何相应的选项.


这个特性允许建立一个服务的'模版',可以很容易的生成相似的服务.注意,被拷贝的服务在配置文件里必须先于拷贝的服务出现.

缺省设置: \fBno value\fR


示例: \fBcopy = otherservice\fR


.TP
create mask (S)
与 \fIcreate mode\fR 同义.

当生成一个文件的时候,需要知道从dos模式映射到unix下的文件权限.最后的结果用这个参数进行逐位的与运算得到.这个选项可以理解成unix下文件的位掩码.在生成文件的时候,任何\fB没有\fR设置的位将会从创建模式中去掉.


这个选项的缺省值是从unix的文件创建模式中去掉组和其他用户的写和执行标志位.

根据这个规则,samba将会把这个选项生成的unix文件创建模式和由\fIforce create mode\fR设置的选项进行逐位的或运算,\fIforce create mode\fR 的缺省选项是000.

这个选项不会影响目录创建模式.细节参见\fIdirectory mode \fR .

参考\fIforce create mode\fR以进一步了解在创建文件时设置的特殊位.关于创建目录模式参见\fIdirectory mode\fR选项.参见 \fIinherit permissions\fR parameter.


Note that this parameter does not apply to permissions set by Windows NT/2000 ACL editors\&. If the administrator wishes to enforce a mask on access control lists also, they need to set the \fIsecurity mask\fR\&.


缺省设置: \fBcreate mask = 0744\fR


示例: \fBcreate mask = 0775\fR


.TP
create mode (S)
与 \fI create mask\fR 同义.


.TP
csc policy (S)
This stands for \fBclient-side caching policy\fR, and specifies how clients capable of offline caching will cache the files in the share\&. The valid values are: manual, documents, programs, disable\&.


These values correspond to those used on Windows servers\&.


For example, shares containing roaming profiles can have offline caching disabled using \fBcsc policy = disable\fR\&.


缺省设置: \fBcsc policy = manual\fR


示例: \fBcsc policy = programs\fR


.TP
deadtime (G)
这个值(十进制整数)定义连接发呆超时,单位是分钟.如果一个连接发超过了这个时间就会被断开.如果有文件被打开了,这个时间就不起作用.

这可以保护服务器不被过多的发呆连接耗尽资源.


多数客户端有连接断开后的自动重连功能,所以大多数情况下,这个选项对用户应该是透明的


对多数系统建议使用较短的发呆超时的选项.


发呆超时选项被设为0意味着不会自动断开连接..


缺省设置: \fBdeadtime = 0\fR


示例: \fBdeadtime = 15\fR


.TP
debug hires timestamp (G)
有些时候记录信息需要比秒更高层次的时间标识,用这个布尔量选项可以向时间标识信息头中加入以微秒级的频率.

注意要使用这个选项,必须打开\fI debug timestamp\fR选项.



缺省设置: \fBdebug hires timestamp = no\fR


.TP
debuglevel (G)
与 \fI log level\fR 同义.


.TP
debug pid (G)
为很多从\fBsmbd\fR(8)fork出来的进程使用同一个记录文件时，很难精确地跟踪信息是哪个进程输出的.用这个布尔量选项向时间标识信息头中自动添加进程号.

注意要使用这个选项,必须打开\fI debug timestamp\fR 选项.


缺省设置: \fBdebug pid = no\fR


.TP
debug timestamp (G)
samba缺省会给调试纪录信息加上时间标识.如果运行的是高级别\fIdebug level\fR的调试,这个时间标识可以被转移.用这个选项可以将时间标识关闭.


缺省设置: \fBdebug timestamp = yes\fR


.TP
debug uid (G)
samba有时以root身份运行,而有时以已联接的用户来运行.使用这个布尔量选项可以向记录文件的时间标识信息头中自动插入当前的euid,egid,uid和gid标识.

Note that the parameter  must be on for this to have an effect\&.
注意要使用这个选项,必须打开\fI debug timestamp\fR选项.

缺省设置: \fBdebug uid = no\fR


.TP
default (G)
与 \fI default service\fR 同义.


.TP
default case (S)
参见"NAME MANGLING"段. 也注意一下\fIshort preserve case\fR选项. 


缺省设置: \fBdefault case = lower\fR


.TP
default devmode (S)
This parameter is only applicable to printable services\&. When smbd is serving Printer Drivers to Windows NT/2k/XP clients, each printer on the Samba server has a Device Mode which defines things such as paper size and orientation and duplex settings\&. The device mode can only correctly be generated by the printer driver itself (which can only be executed on a Win32 platform)\&. Because smbd is unable to execute the driver code to generate the device mode, the default behavior is to set this field to NULL\&.


Most problems with serving printer drivers to Windows NT/2k/XP clients can be traced to a problem with the generated device mode\&. Certain drivers will do things such as crashing the client's Explorer\&.exe with a NULL devmode\&. However, other printer drivers can cause the client's spooler service (spoolsv\&.exe) to die if the devmode was not created by the driver itself (i\&.e\&. smbd generates a default devmode)\&.


This parameter should be used with care and tested with the printer driver in question\&. It is better to leave the device mode to NULL and let the Windows client set the correct values\&. Because drivers do not do this all the time, setting \fBdefault devmode = yes\fR will instruct smbd to generate a default one\&.


For more information on Windows NT/2k printing and Device Modes, see the MSDN documentation\&.


缺省设置: \fBdefault devmode = no\fR


.TP
default service (G)
这个选项定义一个当指定服务找不到时的缺省服务.注意,在选项值里\fB没有\fR方括号(看示例！).

这个选项没有缺省值. 如果没给出这个选项的话,对不存在的服务的请求将返回错误.

缺省服务一般是那些允许\fIguest ok\fR, \fIread-only\fR的服务.


外在的服务名可能被替换成请求的服务名,这样就可以用象\fI%S\fR这样的宏来做一个通用的服务.

注意在缺省服务选项指定的服务名里, 字符'_'被映射为'/'. 这样可能会出现有趣的事情.


示例:

.nf
[global]
	default service = pub
[pub]
	path = /%S
.fi

.TP
delete group script (G)
This is the full pathname to a script that will be run \fBAS ROOT\fR \fBsmbd\fR(8) when a group is requested to be deleted\&. It will expand any \fI%g\fR to the group name passed\&. This script is only useful for installations using the Windows NT domain administration tools\&.


.TP
deleteprinter command (G)
With the introduction of MS-RPC based printer support for Windows NT/2000 clients in Samba 2\&.2, it is now possible to delete printer at run time by issuing the DeletePrinter() RPC call\&.


For a Samba host this means that the printer must be physically deleted from underlying printing system\&. The \fI deleteprinter command\fR defines a script to be run which will perform the necessary operations for removing the printer from the print system and from \fIsmb\&.conf\fR\&.


The \fIdeleteprinter command\fR is automatically called with only one parameter: \fI "printer name"\fR\&.


Once the \fIdeleteprinter command\fR has been executed, \fBsmbd\fR will reparse the \fI smb\&.conf\fR to associated printer no longer exists\&. If the sharename is still valid, then \fBsmbd \fR will return an ACCESS_DENIED error to the client\&.


参见 \fI addprinter command\fR, \fIprinting\fR, \fIshow add printer wizard\fR


缺省设置: \fBnone\fR


示例: \fBdeleteprinter command = /usr/bin/removeprinter\fR


.TP
delete readonly (S)
这个选项允许删除只读文件,这个只读不是通常dos里的含义,而是unix中的.


这个选项对于rcs这样的应用很有用,在这种情况下,unix文件的属主不允许改变权限,dos文件只读.


缺省设置: \fBdelete readonly = no\fR


.TP
delete share command (G)
Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The \fIdelete share command\fR is used to define an external program or script which will remove an existing service definition from \fIsmb\&.conf\fR\&. In order to successfully execute the \fIdelete share command\fR, \fBsmbd\fR requires that the administrator be connected using a root account (i\&.e\&. uid == 0)\&.


When executed, \fBsmbd\fR will automatically invoke the \fIdelete share command\fR with two parameters\&.


\fIconfigFile\fR - the location of the global \fIsmb\&.conf\fR file\&.

\fIshareName\fR - the name of the existing service\&.

This parameter is only used to remove file shares\&. To delete printer shares, see the \fIdeleteprinter command\fR\&.


参见 \fIadd share command\fR, \fIchange share command\fR\&.


缺省设置: \fBnone\fR


示例: \fBdelete share command = /usr/local/bin/delshare\fR


.TP
delete user from group script (G)
Full path to the script that will be called when a user is removed from a group using the Windows NT domain administration tools\&. It will be run by \fBsmbd\fR(8) \fBAS ROOT\fR\&. Any \fI%g\fR will be replaced with the group name and any \fI%u\fR will be replaced with the user name\&.


缺省设置: \fBdelete user from group script = \fR


示例: \fBdelete user from group script = /usr/sbin/deluser %u %g\fR


.TP
delete user script (G)
它定义一个在使用RPC(NT)工具管理用户时，fBsmbd\fR(8)以root身份运行的包括路径的一个脚本.


当远程客户使用'User Manager for Domains' 或是 \fBrpcclient\fR 从服务器上删除一个用户时执行此操作。


这个脚本删除给定的unix用户。

缺省设置: \fBdelete user script = <空字符串>\fR


示例: \fBdelete user script = /usr/local/samba/bin/del_user %u\fR


.TP
delete veto files (S)
这个选项用于samba试图删除一个或多个包含禁止文件的目录的情况(参见\fIveto files\fR选项). 如果这个选项设置为\fBno\fR(缺省情况),那么如果一个禁止目录里包含了任何非禁止的文件或目录,删除就会失败.这通常正是你所希望的.


如果这个选项被设为了 \fByes\fR,Samba将试图递归删除在被禁止目录里的任何文件和目录.这对于整合象NetAtalk这样的文件服务系统很有用,它通常会在目录里生成Dos/windows用户看不见的中间文件(e.g. \fI.AppleDouble\fR).


设置\fBdelete veto files = yes\fR 使那些有权限的用户可以在删除父目录的时候透明的删除子目录.



参见 \fIveto files\fR 选项.


缺省设置: \fBdelete veto files = no\fR


.TP
deny hosts (S)
与 \fIhosts deny\fR 同义.


.TP
dfree command (G)
\fIdfree command\fR只需在磁盘空间计算有问题的系统上使用.这个空间计算的问题仅在Ultrix系统上发生过,但在其他的操作系统上也有可能发生.发生这个问题的现象是在每个目录列表最后发生错误并提示"Abort Retry Ignore".


这个设置允许用外部程序代替内部程序来计算总共的磁盘空间和可用的磁盘空间.下面的例子给出了一个能完成这个功能的脚本.


这个外部程序的输入是文件系统里一个需要计算的目录,典型的包括\fI./\fR字符串.以ascii码返回两个整数.第一个是总共的磁盘空间(以块为单位),第二个是可用块树.可选的第三个返回值可以以字节为单位给出块的大小.缺省的块的大小是1024字节.

注意:这个脚本应该属主为root,\fB只有\fRroot可写,并且\fB不能\fR带有用户标识位和组标识位(setuid or setgid)!


缺省设置: \fB缺省用内部程序来计算磁盘容量和可用空间. \fR


示例: \fBdfree command = /usr/local/samba/bin/dfree\fR


如下这个dfree脚本必须是可执行的.


.nf
 
#!/bin/sh
df $1 | tail -1 | awk '{print $2" "$4}'
.fi


在Sys V一类的系统上可能是:

.nf
 
#!/bin/sh
/usr/bin/df -k $1 | tail -1 | awk '{print $3" "$5}'
.fi


注意在特定的系统上可能需要给出相应的带有全路径的命令.


.TP
directory (S)
与 \fIpath\fR 同义.


.TP
directory mask (S)
这个选项是8进制的模式。用来控制在生成UNIX目录时，将其从dos模式转换为unix模式。

当生成一个路径的时候,必须指定的目录权限从dos模式映射到unix模式,然后这个结果和这个选项进行逐位的与运算.这个选项可以理解成unix模式下的位掩码.这个选项里任何\fB没有\fR设置的位在生成unix下的目录时将会被去掉


缺省情况下,这个选项把组和其他用户的写权限位去掉,只允许目录的属主对目录进行修改.

Samba将把这个选项和\fIforce directory mode\fR的选项进行逐位的或运算,这个选项缺省时设置为000(也就是不加额外的限制).


Note that this parameter does not apply to permissions set by Windows NT/2000 ACL editors. If the administrator wishes to enforce a mask on access control lists also, they need to set the \fIdirectory security mask\fR.

在生成目录时如果需要设置特殊的模式位,参见\fIforce directory mode\fR选项.

关于生成文件时的模式位参见\fIcreate mode \fR选项和\fIdirectory security mask\fR选项.


Also refer to the \fI inherit permissions\fR parameter.


缺省设置: \fBdirectory mask = 0755\fR


示例: \fBdirectory mask = 0775\fR


.TP
directory mode (S)
与 \fI directory mask\fR 同义。


.TP
directory security mask (S)
此选项控制了NT客户在他的本地NT安全对话框中操纵unix目录权限时可以修改哪些权限位.


这个选项以掩码来实现改变权限位,所以在修改时要防止不在掩码中涉及的那些位.实际上,在这个掩码中的位0可以使用户无法改变任何东东.

如果没有明确设定的话,这个选项会用与directory mask选项同样的值.要允许用户在目录中可以修改所有的user/group/world权限,可以把这个选项设为0777.


\fB注意\fR,能访问samba服务器的用户通过其它方法也可以很容易地绕过这个限制,所以对独立工作的系统来说这个选项是最根本最有用的.很多系统管理的管理员都会把它设为默认的\fB0777\fR.


参见\fI force directory security mode\fR, \fIsecurity mask\fR, \fIforce security mode \fR 选项。


缺省设置: \fBdirectory security mask = 0777\fR


示例: \fBdirectory security mask = 0700\fR


.TP
disable netbios (G)
Enabling this parameter will disable netbios support in Samba\&. Netbios is the only available form of browsing in all windows versions except for 2000 and XP\&.


Note that clients that only support netbios won't be able to see your samba server when netbios support is disabled\&.

缺省设置: \fBdisable netbios = no\fR


示例: \fBdisable netbios = yes\fR


.TP
disable spoolss (G)
Enabling this parameter will disable Samba's support for the SPOOLSS set of MS-RPC's and will yield identical behavior as Samba 2\&.0\&.x\&. Windows NT/2000 clients will downgrade to using Lanman style printing commands\&. Windows 9x/ME will be uneffected by the 选项。 However, this will also disable the ability to upload printer drivers to a Samba server via the Windows NT Add Printer Wizard or by using the NT printer properties dialog window\&. It will also disable the capability of Windows NT/2000 clients to download print drivers from the Samba host upon demand\&. \fBBe very careful about enabling this 选项。\fR


See also use client driver


Default : \fBdisable spoolss = no\fR


.TP
display charset (G)
Specifies the charset that samba will use to print messages to stdout and stderr and SWAT will use\&. Should generally be the same as the \fBunix charset\fR\&.


缺省设置: \fBdisplay charset = ASCII\fR


示例: \fBdisplay charset = UTF8\fR


.TP
dns proxy (G)
指定\fBnmbd\fR(8)象WINS服务器那样寻找没有登记的NetBIOS名,象对待DNS名那样逐字的对待NetBIOS名,向DNS服务器查询该名称所代表的客户端.


注意,NetBISO名的最大长度是15个字符,所以DNS名(或DNS别名)同样最多只能有15个字符.


\fBnmbd\fR 在做DNS名查询的时候将自身复制一份,因为域名查询是一个阻塞的动作.


参见 \fI wins support\fR 。


缺省设置: \fBdns proxy = yes\fR


.TP
domain logons (G)
如果这个选项为\fByes\fR,Samba服务器将为\fIworkgroup\fR提供Windows 95/98 登陆域服务.Samba 2.2只能实现Windows NT 4 域中域控制器的有限功能。有关设置这个功能的更详细信息参见Samba 文档中的Samba-PDC-HOWTO。


缺省设置: \fBdomain logons = no\fR


.TP
domain master (G)
这个选项告诉\fBsmbd\fR(8)收集广域网内的浏览列表.设置这个选项后,\fBnmbd\fR用一个特定的NetBIOS名向它的\fI工作组\fR标识它自己是一个主控浏览器.在同一\fI工作组\fR不同子网中的本地主控浏览器将把自己的浏览列表传给\fBnmbd\fR,然后向\fBsmbd\fR(8) 请求整个网络上浏览列表的完整拷贝.客户端将和他们的本地主控浏览器联系,得到整个域范围内的浏览列表,而不只是子网上的列表.


注意,windows NT主域控制器默认情况总是占有这个在\fI工作组\fR中的特殊的NetBIOS名，宣称自己是\fI工作组\fR的主域浏览器(也就是说,没有什么方法可以阻止一个Windows NT主域控制器这样做). 这样如果设置了这个选项,并且\fBnmbd\fR 在Windows NT之前向\fI工作组\fR宣称了这个特殊的名字,那么跨子网的浏览行为会变得奇怪,并且可能会失败.


If \fBdomain logons = yes\fR , then the default behavior is to enable the \fIdomain master\fR 选项。 If \fIdomain logons\fR is not enabled (the default setting), then neither will \fIdomain master\fR be enabled by default\&.


缺省设置: \fBdomain master = auto\fR

.\" -=>从此以上为ttao翻译
.\" -=>从此以下为Edwin Chen翻译

.TP
dont descend (S)
有些系统上存在某些特殊的路径(比如linux中的\fI/proc\fR),这些目录不需要(也不希望)客户端关心,甚至可能具有无限的层次深度(递归的).这个选项允许你指定一个由逗号分隔的列表,服务器将把列表内包含的目录始终显示成空目录.


注意,Samba对'dont descend'选项的输入格式十分挑剔.例如他也许要求你输入\fI./proc\fR而不是仅仅是\fI/proc\fR.实践是最好的策略.


缺省设置: \fBnone (也就是说,所有目录的内容会正常的传递给客户端)\fR


示例: \fBdont descend = /proc,/dev\fR


.TP
dos charset (G)
DOS SMB clients assume the server has the same charset as they do\&. This option specifies which charset Samba should talk to DOS clients\&.


The default depends on which charsets you have installed\&. Samba tries to use charset 850 but falls back to ASCII in case it is not available\&. Run \fBtestparm\fR(1) to check the default on your system\&.


.TP
dos filemode (S)
The default behavior in Samba is to provide UNIX-like behavior where only the owner of a file/directory is able to change the permissions on it\&. However, this behavior is often confusing to DOS/Windows users\&. Enabling this parameter allows a user who has write access to the file (by whatever means) to modify the permissions on it\&. Note that a user belonging to the group owning the file will not be allowed to change permissions if the group is only granted read access\&. Ownership of the file/directory is not changed, only the permissions are modified\&.


缺省设置: \fBdos filemode = no\fR


.TP
dos filetime resolution (S)
在DOS和Windows FAT文件系统中,时间的计量精度是2秒。对共享资源设置这个选项,可以使得在一个向\fBsmbd\fR(8)的查询需要1秒精度时，Samba把报告的时间精度降低到2秒左右。


这个选项的主要用于解决Visual C++与Samba的兼容性问题.当共享文件被锁定时(oplocks选项被设置为允许),Visual C++使用两个不同的读取时间的函数调用来检查文件自从最后一次读操作以来是否有改变.其中一个函数使用1秒的时间尺度,而另一个则使用2秒的时间尺度.由于使用基于2秒的方法要舍去任何的奇数秒,当文件的时间记录是奇数秒时,Visual C++的两次函数调用结果就会不一致,Visual C++就会总是认为文件被改变.设置这个选项可以使得两次函数调用的结果一致,Visual C++会很高兴的接受这一切.


缺省设置: \fBdos filetime resolution = no\fR


.TP
dos filetimes (S)
在DOS和Windows操作系统中,如果用户对文件进行写操作,就会改变文件的时间记录.而在POSIX规则中,只有文件的所有者和root才有改变文件时间记录的能力.缺省的,Samba按照POSIX规则运行,如果\fBsmbd\fR的用户不是文件的所有者,那么他对文件的操作不会改变文件的时间记录.如果设置这个选项为\fB yes\fR,那么\fBsmbd\fR(8)就按照DOS的规则运行,并且按照DOS系统的要求改变文件的时间记录.


缺省设置: \fBdos filetimes = no\fR


.TP
enable rid algorithm (G)
This option is used to control whether or not smbd in Samba 3\&.0 should fallback to the algorithm used by Samba 2\&.2 to generate user and group RIDs\&. The longterm development goal is to remove the algorithmic mappings of RIDs altogether, but this has proved to be difficult\&. This parameter is mainly provided so that developers can turn the algorithm on and off and see what breaks\&. This parameter should not be disabled by non-developers because certain features in Samba will fail to work without it\&.


缺省设置: \fBenable rid algorithm = <yes>\fR


.TP
encrypt passwords (G)
这个布尔型值控制着是否与客户端用加密口令进行交谈.注意,NT4.0 SP3 及以上还有WINDOWS 98在缺省情况下使用加密口令进行交谈,除非改变了注册表的相应健值.想要使用加密口令,清参阅Samba HOWTO Collection中的 "User Database" 章节。

想要使加密口令能正确的工作, \fBsmbd\fR(8)必须能访问本地的\fBsmbpasswd\fR(5)文件(如何正确设置和维护这个文件,请参阅\fBsmbpasswd\fR(8)手册),或者,设置选项security= [server|domain|ads],这样设置将使得\fBsmbd\fR依赖其它的服务器来帮它鉴别口令. 


缺省设置: \fBencrypt passwords = yes\fR


.TP
enhanced browsing (G)
This option enables a couple of enhancements to cross-subnet browse propagation that have been added in Samba but which are not standard in Microsoft implementations\&.


The first enhancement to browse propagation consists of a regular wildcard query to a Samba WINS server for all Domain Master Browsers, followed by a browse synchronization with each of the returned DMBs\&. The second enhancement consists of a regular randomised browse synchronization with all currently known DMBs\&.


You may wish to disable this option if you have a problem with empty workgroups not disappearing from browse lists\&. Due to the restrictions of the browse protocols these enhancements can cause a empty workgroup to stay around forever which can be annoying\&.


In general you should leave this option enabled as it makes cross-subnet browse propagation much more reliable\&.


缺省设置: \fBenhanced browsing = yes\fR


.TP
enumports command (G)
The concept of a "port" is fairly foreign to UNIX hosts\&. Under Windows NT/2000 print servers, a port is associated with a port monitor and generally takes the form of a local port (i\&.e\&. LPT1:, COM1:, FILE:) or a remote port (i\&.e\&. LPD Port Monitor, etc\&.\&.\&.)\&. By default, Samba has only one port defined--\fB"Samba Printer Port"\fR\&. Under Windows NT/2000, all printers must have a valid port name\&. If you wish to have a list of ports displayed (\fBsmbd \fR does not use a port name for anything) other than the default \fB"Samba Printer Port"\fR, you can define \fIenumports command\fR to point to a program which should generate a list of ports, one per line, to standard output\&. This listing will then be used in response to the level 1 and 2 EnumPorts() RPC\&.


缺省设置: \fBno enumports command\fR


示例: \fBenumports command = /usr/bin/listports\fR


.TP
exec (S)
与 \fIpreexec\fR 同义。


.TP
fake directory create times (S)
NTFS和Windows VFAT文件系统为每一个文件和目录保留一个创建时间. 这个时间和UNIX下的状态改变时间--ctime不同. 所以, 在缺省状态下, Samba将报告UNIX系统所保持的各种时间属性中的最早的那个作为(文件/目录)建立时间. 如果在一个共享中设置了这个选项, 将会使得Samba伪造一个目录生成时间, 这个时间就是1980.01.01的午夜.


这个选项的主要用于解决Visual C++与Samba的兼容性问题.Visual C++生成makefiles文件时, 包含目标文件所依赖的目的目录. 包含建立目录的规则. 同样的, 当NMAKE比较时间属性时, 它检查目录建立时间. 目标目录不存在的话, 会建立一个；如果存在,它的建立时间总是比它所包含的目标文件的建立时间早.

UNIX的时间规则意味着只要有文件在共享目录中建立或删除,Samba将更新关于该目录建立时间的报告. NMAKE将发现目录中除了最后建立的文件以外的所有目标文件都过期了(与目录的建立时间相比较), 然后重新编译目标文件.设置这个选项值将保证目录的建立时间早于它里面的文件,NMAKE就能够正常工作. 


缺省设置: \fBfake directory create times = no\fR


.TP
fake oplocks (S)
oplocks是这样一个选项, 它允许SMB客户端在本地缓存对服务器的文件操作. 如果服务器允许oplock(opportunistic lock)操作, 客户端可以简单的认为, 它自己是唯一的文件访问者, 可以随意的缓存文件. 有些oplocks类型甚至允许缓存文件的打开和关闭操作. 这个操作换来性能上的巨大提升.


当你设置\fBfake oplocks = yes\fR后,\fBsmbd\fR(8)总是允许oplock请求, 而不管到底有多少的客户端在使用这个文件. 


在通常情况下, 使用真实的\fIoplocks\fR支持总是比使用这个选项好. 


如果你使用这个选项在一些只读的共享上(例如: CDROM共享),或者你知道这个共享只能够被一个客户端所访问(例如: 客户主目录). 你将会注意到性能上的重大提升. 如果你将这个选项用在多个客户端都可以读写的共享上, 由于客户可能同时访问一个共享文件, 这样会造成文件损坏. 请一定小心使用. 


缺省设置: \fBfake oplocks = no\fR


.TP
follow symlinks (S)
这个选项允许Samba管理员禁止某个特殊共享下\fBsmbd\fR(8)对符号链接的访问. 将这个选项设置为\fBno\fR将会阻止这个共享下的任何链接形式的文件或目录被查看(用户将会得到一个错误信息).例如: 这个选项将阻止客户将\fI/etc/passwd\fR文件链接到自己的主目录. (我们看到, 这是很有用的). 但是, 它将会使文件名字的查找速度慢一些.

这个选项缺省是允许(也就是, \fBsmbd\fR将允许访问符号链接) 


缺省设置: \fBfollow symlinks = yes\fR


.TP
force create mode (S)
这个选项设置一组UNIX格式的权限代码, 当Samba建立新文档的时候, \fB总是\fR会使用这个权限设置新文档, 通过将新文档的权限位和这组权限代码做逐位与, 就完成了设置工作.缺省状态下, 这个选项设置为八进制000,在\fIcreate mask\fR加到新建立的文件的权限位上后, 与这个值进行按位与操作, 就得到文件建立时的权限设置. 


参见 \fIcreate mask\fR 来获得关于建立文件时的掩码的详细资料。

另外也参见 \fIinherit permissions\fR 参数.


缺省设置: \fBforce create mode = 000\fR


示例: \fBforce create mode = 0755\fR

这个例子中, 将迫使所有被建立的文档对"同组/其它(用户)"有读和执行权. 对用户自己有读/写/执行权力.


.TP
force directory mode (S)
这个选项设置一组UNIX格式的权限代码, 当Samba建立新目录的时候, \fB总是\fR会使用这个权限设置新目录, 通过将新目录的权限位和这组权限代码做逐位与, 就完成了设置工作.缺省状态下, 这个选项设置为八进制000,在\fIdirectory mask\fR加到新建立的目录的权限位上后,与这个值进行按位与操作, 就得到目录建立时的权限设置.


参见\fI directory mask\fR 来获得关于建立目录时的掩码的详细资料。


另外也参见\fI inherit permissions\fR参数.


缺省设置: \fBforce directory mode = 000\fR


示例: \fBforce directory mode = 0755\fR


这个例子中, 将迫使所有被建立的目录对"同组/其它(用户)"有读和进入权. 对用户自己有读/写/进入权力.

.TP
force directory security mode (S)
此选项控制NT用户通过本地NT安全对话框可以操作哪些目录上的unix权限位.

此选项以掩码('or')来实现权限位的改变,所以它强制了任何掩码中用户可以更改的位.实际上,当在修改目录的安全性时,这个掩码中的一个0位可以作为一组用户已经设为'on'的位来看待.

如果没有明确设定的话,这个选项会用与force directory mode选项同样的值.要允许用户在目录中可以修改所有的user/group/world权限,可以把这个选项设为0000.

\fB注意\fR,能访问samba服务器的用户通过其它方法也可以很容易地绕过这个限制,所以这个参数只对独立工作的应用系统来说有用.很多系统管理的管理员都会把它设为默认的0000.

参见\fI directory security mask\fR, \fIsecurity mask\fR, \fIforce security mode \fR 参数。


缺省设置: \fBforce directory security mode = 0\fR


示例: \fBforce directory security mode = 700\fR


.TP
force group (S)
这个选项指定一个UNIX组, 所有连接到服务上的用户都被强迫使用这个组作为"主组". 所有访问文件的用户都使用这个组的访问权限做权限检查. 因此, 通过分配文件和目录的访问权限给这个用户组, Samba的管理员可以限制或允许对共享文件的访问.


在samba 2.0.5及更新的版本中这个选项已经按下面的方法有了一些扩展功能.如果在此列出的组名有一个'+'字符加在名称前的话,当前用户正在访问的共享资源只有初始组被缺省分配到这个组中,而可能的情况是用户已经是其它组成员了.这样,管理员可以决定只有在特殊组里的用户才能以设定的组身份建立文件,更有益于所有权分配管理.例如,设定\fIforce group = +sys\fR的话,只有在sys组里的用户才能在访问samba共享资源时拥有缺省的初始组标识.而其它所有用户保留他们原始的组标识.


如果又设定了 \fIforce user\fR选项的话,\fIforce group\fR选项中指定的组将会越过在 \fIforce user\fR中指定的初始组.
If the \fIforce user\fR parameter is also set the group specified in \fIforce group\fR will override the primary group set in \fIforce user\fR\&.


参见 \fIforce user\fR选项.


缺省设置: \fBno forced group\fR


示例: \fBforce group = agroup\fR


.TP
force security mode (S)
此选项控制NT用户通过本地NT安全对话框可以操作哪些目录上的unix权限位.

此选项以掩码('or')来实现权限位的改变,所以它强制了任何掩码中用户可以更改的位.实际上,当在修改目录的安全性时,这个掩码中的一个0位可以作为一组用户已经设为'on'的位来看待.

如果没有明确设定的话,这个选项会用与force create mode选项同样的值.要允许用户在文件上可以修改所有的user/group/world权限,可以把这个选项设为000.


\fB注意\fR,能访问samba服务器的用户通过其它方法可以很容易地绕过这个限制,所以这个选项对独立工作的系统来说才有用的.很多系统管理的管理员都会把它设为默认的0000.

参见\fI force directory security mode\fR, \fIdirectory security mask\fR, \fI security mask\fR 参数。


缺省设置: \fBforce security mode = 0\fR


示例: \fBforce security mode = 700\fR


.TP
force user (S)
这个选项指定一个UNIX用户的名字, 所有连接到服务上的用户的缺省名字就使用这个名字. (由于权限的原因)在共享文件时这个选项是有用的.你必须小心使用这个选项, 它有可能带来安全上的问题. 


这个选项只有当一个连接建立起来后才有用. 在建立连接的使用, 用户还是必须有合法的用户名和口令. 一旦连接建立起来, 所有的操作将强迫以这个名字进行, 而不管它是以什么名字登录的.


samba 2.0.5和更新的版本中这个选项会导致用户的初始组被作为所有文件操作的初始组.2.0.5以前的初始组被允许作为联接用户的初始组(这是个bug)


参见 \fIforce group\fR 选项。


缺省设置: \fBno forced user\fR


示例: \fBforce user = auser\fR


.TP
fstype (S)
这个选项允许管理员设置一个字符串说明共享的文件系统的类型, 当客户端有查询时, \fBsmbd\fR(8)将这个字符串作为正在使用的文件系统的类型报告给客户端. 为了和\fIWindows NT\fR兼容缺省值设置是\fBNTFS\fR, 当然,如果必要的话,也可以改变为其它的字符串,例如\fBSamba\fR或\fBFAT\fR.


缺省设置: \fBfstype = NTFS\fR


示例: \fBfstype = Samba\fR


.TP
get quota command (G)
The \fBget quota command\fR should only be used whenever there is no operating system API available from the OS that samba can use\&.


This parameter should specify the path to a script that queries the quota information for the specified user/group for the partition that the specified directory is on\&.


Such a script should take 3 arguments:


directory

type of query

uid of user or gid of group

The type of query can be one of :


1 - user quotas

2 - user default quotas (uid = -1)

3 - group quotas

4 - group default quotas (gid = -1)

This script should print its output according to the following format:


Line 1 - quota flags (0 = no quotas, 1 = quotas enabled, 2 = quotas enabled and enforced)

Line 2 - number of currently used blocks

Line 3 - the softlimit number of blocks

Line 4 - the hardlimit number of blocks

Line 5 - currently used number of inodes

Line 6 - the softlimit number of inodes

Line 7 - the hardlimit number of inodes

Line 8(optional) - the number of bytes in a block(default is 1024)

参见 \fIset quota command\fR 选项。


缺省设置: \fBget quota command = \fR


示例: \fBget quota command = /usr/local/sbin/query_quota\fR


.TP
getwd cache (G)
这是一个性能调节选项. 当这个选项允许时, 一个高速缓冲算法将被用来减少调用"getwd()"的时间. 这个选项对性能会产生很大的影响, 特别是在\fIwide links\fR选项设为\fBno\fR的时候.


缺省设置: \fBgetwd cache = yes\fR


.TP
group (S)
与 \fIforce group\fR 同义。


.TP
guest account (G,S)
这是一个用来访问服务的用户名(作为客户来访账户,区别于系统上的用户), 当然, 被访问的服务必须先设置了选项fI guest ok\fR. 这个账户所拥有的所有权利都会反映到以"访问客户(guest)"身份连接进来的客户身上. 典型的, 这个客户必须在passwd文件中存在, 但是没有有效的登录权限.通常系统中存在着名为"ftp"的账户,把这个账户名使用在这里是个好主意.注意:如果一个服务指定了一个专用的访问用户名,这个专用名将代替这里的用户名.


在某些系统上,缺省的访问用户名"nobody"账户可能不能打印.如果遇到这种情况,请使用其它的账户名(例如ftp)。想要测试这种情况,可以试着用来访账户登录(可以用\fBsu -\fR命令),然后,使用系统打印命令\fBlpr\fR(1)或\fBlp\fR(1).


这个参数不接受%宏，因为Samba系统的很多组件要正确工作都需要这个值是一个常量。


缺省设置: \fB编译时指定，通常是"nobody"\fR


示例: \fBguest account = ftp\fR


.TP
guest ok (S)
如果一个服务的这个选项的值设为\fByes\fR, 那末, 连接到这个服务不需要口令, 权限设置为\fI guest account\fR的权限.

这个选项抵消了设置 \fIrestrict anonymous\fR = 2 的好处。


参见下面的\fI security\fR来获得更多信息。


缺省设置: \fBguest ok = no\fR


.TP
guest only (S)
如果一个服务的这个选项设置为 \fByes\fR, 那末, 只有客户(guest)访问被允许, 也就是说, 不允许以其他用户的身份访问.如果没有设置\fIguest ok\fR选项, 则此选项无效. 


参见下面的\fI security\fR 参数来获得更多信息。


缺省设置: \fBguest only = no\fR


.TP
hide dot files (S)
这是一个布尔值选项. 控制文件名最前面一个字符为"."的文件是否表现为隐含文件(UNIX文件系统中, 最前面为"."的文件是隐含文件). 


缺省设置: \fBhide dot files = yes\fR


.TP
hide files (S)
这是一个隐藏文件或目录的列表.这些文件不能被看见但是能被访问.列表中的文件或目录将被赋予DOS下的"隐藏"属性.


每个条目必须以"/"分隔以便允许在条目中使用空格.可以使用DOS风格的通配符"*"和"?"匹配多个目录和文件。


每一个条目必须使用UNIX格式的路径,而不是DOS格式的路径,同时,不能包含UNIX路径分隔符"/".


注意:大小写敏感的特性也适用于隐含文件.


设置这个选项会影响Samba的性能,它会迫使系统检查所有的文件和目录以确定是否与它的所要寻找的项目匹配.


参见 \fIhide dot files\fR, \fI veto files\fR 和 \fIcase sensitive\fR.


缺省设置: \fB没有隐藏文件\fR


示例: \fBhide files = /.*/DesktopFolderDB/TrashFor%m/resource.frk/\fR

上面的例子中的文件从Thursby共享出来,给Macintosh的SMB客户端(DAVE),供内部使用,仍然隐藏了"."打头的文件. 


.TP
hide local users (G)
This parameter toggles the hiding of local UNIX users (root, wheel, floppy, etc) from remote clients\&.


缺省设置: \fBhide local users = no\fR


.TP
hide special files (S)
This parameter prevents clients from seeing special files such as sockets, devices and fifo's in directory listings\&.


缺省设置: \fBhide special files = no\fR


.TP
hide unreadable (S)
This parameter prevents clients from seeing the existance of files that cannot be read\&. Defaults to off\&.


缺省设置: \fBhide unreadable = no\fR


.TP
hide unwriteable files (S)
This parameter prevents clients from seeing the existance of files that cannot be written to\&. Defaults to off\&. Note that unwriteable directories are shown as usual\&.


缺省设置: \fBhide unwriteable = no\fR


.TP
homedir map (G)
如果\fInis homedir \fR选项的值为\fByes\fR,同时, \fBsmbd\fR(8)也作为win95/98的\fI登录服务器\fR,那么,这个选项指明一个NIS(或者YP)映射.指向用户主目录所在的服务器.目前,只认识Sun的auto.home映射格式.映射格式如下:


\fBusername server:/some/file/system\fR


程序从":"号前取得服务器名字.将来也许会有更好的解释系统来处理不同的映射格式,当然,也包括Amd(另一种自动装载方式)映射.


需要系统中有一个运行的NIS客户来使这个选项工作。

参见 \fInis homedir\fR , \fIdomain logons\fR .


缺省设置: \fBhomedir map = <空字符串>\fR


示例: \fBhomedir map = amd.homedir\fR


.TP
host msdfs (G)
If set to \fByes\fR, Samba will act as a Dfs server, and allow Dfs-aware clients to browse Dfs trees hosted on the server\&.


参见 \fI msdfs root\fR share level 选项。 For more information on setting up a Dfs tree on Samba, refer to ???\&.


缺省设置: \fBhost msdfs = no\fR


.TP
hostname lookups (G)
Specifies whether samba should use (expensive) hostname lookups or use the ip addresses instead\&. An example place where hostname lookups are currently used is when checking the \fBhosts deny\fR and \fBhosts allow\fR\&.


缺省设置: \fBhostname lookups = yes\fR


示例: \fBhostname lookups = no\fR


.TP
hosts allow (S)
与\fIallow hosts\fR 同义.

这个选项是一个由逗号,空格或者tab字符隔开的一组主机名.列入其中的主机才允许访问.

如果该选项出现在[global]段中,它会作用于所有服务而忽略单个服务所作的不同设置.


你可以用ip地址或主机名来指定主机.比如,你可以用类似 \fBallow hosts = 150.203.5. \fR来限定只允许访问在这个c类子网中的主机.\fIhosts_access(5)\fR中详细描述了关于这个选项设置的完整语法.注意到你的系统中也许没有这个参考手册,这里也作一个简单的说明.

注意，本机地址127.0.0.1 总是允许连接,除非在\fIhosts deny\fR 选项中加以禁止.

你也可以使用子网号/子网掩码对来指定主机.如果你的网络支持网络组,你还可以用网络组名来指定组内的主机.\fBEXCEPT\fR(除了...)关键字可以在使用了通配符的情况下起到限定作用.


Example 1: 允许150.203.*.* 中除了一台机器之外的所有IP访问


\fBhosts allow = 150.203. EXCEPT 150.203.6.66\fR


Example 2: 允许满足给定的子网号/子网掩码的IP访问


\fBhosts allow = 150.203.15.0/255.255.255.0\fR


Example 3: 允许一系列主机访问


\fBhosts allow = lapland, arvidsjaur\fR


Example 4: 允许NIS网络组"foonet"访问,但是禁止其中的一台主机


\fBhosts allow = @foonet\fR


\fBhosts deny = pirate\fR


注意,访问时还是需要有适当的用户级口令.


参见\fBtestparm\fR(1) 来检测主机是否可以按照你希望的方式被访问.


缺省设置: \fBnone (也就是说,所有机器都可以访问)\fR


示例: \fBallow hosts = 150.203.5. myhost.mynet.edu.au\fR


.TP
hosts deny (S)
\fIhosts allow\fR选项的反义词.所有被列入这个选项中的主机的服务都\fB不\fR允许被访问,除非这个被访问的服务定义了自己的允许列表.当允许的主机列表和禁止的主机列表发生冲突的时候,\fIallow\fR优先.


缺省设置: \fBnone (没有禁止访问的主机)\fR


示例: \fBhosts deny = 150.203.4. badhost.mynet.edu.au\fR


.TP
hosts equiv (G)
如果这个选项值不是空字符串,就指定了一个文件名.这个文件中列出了可以不用口令就允许访问的主机和用户的名字.


不要把这个选项和\fIhosts allow\fR 搞混了,那是关于控制主机对服务的访问的,用于管理对来访者的服务.而\fI hosts equiv\fR是用于支持那些不对samba提供口令的NT客户的.


注意:使用\fIhosts equiv \fR 可能会成为一个很大的安全漏洞.这是因为你相信发起访问的PC提供了正确的用户名.找一台PC来提供一个假的用户名是很容易的.我建议你只有在完全明白你在干什么的情况下才使用\fIhosts equiv\fR选项,或者在你自己的家里(那里有你可以完全信任的配偶和孩子)使用它.仅仅是在你\fB完全\fR可以信任他们的时候才用 :-) 


缺省设置: \fBno host equivalences\fR


示例: \fBhosts equiv = /etc/hosts.equiv\fR


.TP
idmap backend (G)
The purpose of the idmap backend parameter is to allow idmap to NOT use the local idmap tdb file to obtain SID to UID / GID mappings, but instead to obtain them from a common LDAP backend\&. This way all domain members and controllers will have the same UID and GID to SID mappings\&. This avoids the risk of UID / GID inconsistencies across UNIX / Linux systems that are sharing information over protocols other than SMB/CIFS (ie: NFS)\&.


缺省设置: \fBidmap backend = <空字符串>\fR


示例: \fBidmap backend = ldap:ldap://ldapslave.example.com\fR


.TP
idmap gid (G)
The idmap gid parameter specifies the range of group ids that are allocated for the purpose of mapping UNX groups to NT group SIDs\&. This range of group ids should have no existing local or NIS groups within it as strange conflicts can occur otherwise\&.


The availability of an idmap gid range is essential for correct operation of all group mapping\&.


缺省设置: \fBidmap gid = <空字符串>\fR


示例: \fBidmap gid = 10000-20000\fR


.TP
idmap uid (G)
The idmap uid parameter specifies the range of user ids that are allocated for use in mapping UNIX users to NT user SIDs\&. This range of ids should have no existing local or NIS users within it as strange conflicts can occur otherwise\&.


缺省设置: \fBidmap uid = <空字符串>\fR


示例: \fBidmap uid = 10000-20000\fR


.TP
include (G)
这个选项使得你可以把一个配置文件插入到另一个配置文件中去.这只是一种文本替换,就在好像被插入的文件的那个位置直接写入那个插入文件一样.

它支持标准替换,除\fI%u \fR, \fI%P\fR 和 \fI%S\fR以外.


缺省设置: \fB没有包含其他文件\fR


示例: \fBinclude = /usr/local/samba/lib/admin_smb.conf\fR


.TP
inherit acls (S)
This parameter can be used to ensure that if default acls exist on parent directories, they are always honored when creating a subdirectory\&. The default behavior is to use the mode specified when creating the directory\&. Enabling this option sets the mode to 0777, thus guaranteeing that default directory acls are propagated\&.


缺省设置: \fBinherit acls = no\fR


.TP
inherit permissions (S)
The permissions on new files and directories are normally governed by \fI create mask\fR, \fIdirectory mask\fR, \fIforce create mode\fR and \fIforce directory mode\fR but the boolean inherit permissions parameter overrides this\&.


New directories inherit the mode of the parent directory, including bits such as setgid\&.


New files inherit their read/write bits from the parent directory\&. Their execute bits continue to be determined by \fImap archive\fR , \fImap hidden\fR and \fImap system\fR as usual\&.


Note that the setuid bit is \fBnever\fR set via inheritance (the code explicitly prohibits this)\&.


This can be particularly useful on large systems with many users, perhaps several thousand, to allow a single [homes] share to be used flexibly by each user\&.


参见 \fIcreate mask \fR, \fI directory mask\fR, \fIforce create mode\fR and \fIforce directory mode\fR \&.


缺省设置: \fBinherit permissions = no\fR


.TP
interfaces (G)
这个选项允许你超越默认的Samba用来处理浏览,名字注册和其他NBT网络流量的网络借口列表. 默认情况Samba向内核查询所有活动的接口列表并且使用除了127.0.0.1 之外的接口.


这个选项的内容是一个接口字符串的列表, 每个字符串可以是下列任何一种格式:

一个网络接口名(例如eth0).它可以包含象在shell风格的通配符如eth*来匹配任何以子字符品"eth"起始的网络接口.

一个IP地址.这种情况下,网络掩码是从内核中获得的接口列表中检测的.

一个IP/掩码对.

一个广播地址/掩码对.

"mask"选项可以是一个位长度(例如C类网络可以是24)或者是以点分格式出现的完整网络地址掩码.


"IP"选项可以是完整点分十六进制IP地址或是按操作系统通常使用的主机名解析机制查找的主机名.


例如,下面这一行:


\fBinterfaces = eth0 192.168.2.10/24 192.168.3.10/255.255.255.0\fR


将配置三个网络接口,对应eth0设备以及IP地址192.168.2.10 和192.168.3.10。后两个接口的网络掩码将设置为255.255.255.0。


参见\fIbind interfaces only\fR.


缺省设置: \fB除了127.0.0.1 之外的所有活动接口 that are broadcast capable\fR


.TP
invalid users (S)
这是一个不允许在这个服务上登录的用户的名单.这的确是一个非常严格的(\fBparanoid\fR)检查,确保任何可能的不适当的设置都不会破坏你的系统的安全.


以@开头的用户名首先被当作NIS网络组名(如果你的系统支持NIS的话),如果在NIS的网络组数据库中找不到这个组,那么这个名字就被当作一个UNIX用户组名来处理.


以+开头的用户名仅表示UNIX用户组名,以&开头的用户名仅表示NIX网络组名(这个设置要求你的系统中有NIS在运行).'+'和'&'符号可以以任何顺序出现在用户组名前,因此,你可以指定对这个名称的查找次序,比如\fI+&group\fR表示先在UNIX用户组中查找,再在NIS网络组中查找,而\fI&+group\fR则相反,先在NIX网络组中查找,再到UNIX用户组中查找.(这与使用@前缀的效果相同).

当前的服务名可以用\fI%S\fR来表示,这在[homes]段中是很有用的.


参见 \fIvalid users \fR.


缺省设置: \fB没有非法用户\fR


示例: \fBinvalid users = root fred admin @wheel\fR


.TP
keepalive (G)
这个选项是一个整数,它表示用于\fIkeepalive\fR包间隔的秒数.如果这个选项是0,那么就不发送保持连接的包.发送保持连接的包使得主机可以确定客户端是否还在响应。

通常,如果用于连接的socket使用了SO_KEEPALIVE属性设置(参见\fIsocket options\fR),那么发送保持连接的包是不需要的.基本上,除非你遇到了某些困难,这个选项是用不到的.


缺省设置: \fBkeepalive = 300\fR


示例: \fBkeepalive = 600\fR


.TP
kernel change notify (G)
This parameter specifies whether Samba should ask the kernel for change notifications in directories so that SMB clients can refresh whenever the data on the server changes\&.


This parameter is only usd when your kernel supports change notification to user programs, using the F_NOTIFY fcntl\&.


缺省设置: \fBYes\fR


.TP
kernel oplocks (G)
在支持基于内核的 \fIoplocks\fR(opportunistic lock)的UNIX系统上(目前只有IRIX 和Linux2.4内核),这个选项允许打开或关闭对这个特性的利用.

内核机会性锁定操作使得本地UNIX进程或NFS对文件进行操作时可以锁定(冻结)\fBsmbd\fR(8)对同一个文件的\fIoplocks \fR操作.这可以保持SMB/CIFS,NFS和本地文件操作之间的数据一致性.(这是一个很cool的特性哦 :-)


如果你的系统支持这个设置,缺省设置就是\fBon\fR(打开),如果系统不支持,缺省设置就是\fBOff\fR(关闭).你根本不必去管这个选项.


参见 \fIoplocks\fR 和 \fIlevel2 oplocks \fR 参数.


缺省设置: \fBkernel oplocks = yes\fR


.TP
lanman auth (G)
This parameter determines whether or not \fBsmbd\fR(8) will attempt to authenticate users using the LANMAN password hash\&. If disabled, only clients which support NT password hashes (e\&.g\&. Windows NT/2000 clients, smbclient, etc\&.\&.\&. but not Windows 95/98 or the MS DOS network client) will be able to connect to the Samba host\&.


The LANMAN encrypted response is easily broken, due to it's case-insensitive nature, and the choice of algorithm\&. Servers without Windows 95/98 or MS DOS clients are advised to disable this option\&.


Unlike the \fBencypt passwords\fR option, this parameter cannot alter client behaviour, and the LANMAN response will still be sent over the network\&. See the \fBclient lanman auth\fR to disable this for Samba's clients (such as smbclient)


If this option, and \fBntlm auth\fR are both disabled, then only NTLMv2 logins will be permited\&. Not all clients support NTLMv2, and most will require special configuration to us it\&.


Default : \fBlanman auth = yes\fR


.TP
large readwrite (G)
This parameter determines whether or not \fBsmbd\fR(8) supports the new 64k streaming read and write varient SMB requests introduced with Windows 2000\&. Note that due to Windows 2000 client redirector bugs this requires Samba to be running on a 64-bit capable operating system such as IRIX, Solaris or a Linux 2\&.4 kernel\&. Can improve performance by 10% with Windows 2000 clients\&. Defaults to on\&. Not as tested as some other Samba code paths\&.


缺省设置: \fBlarge readwrite = yes\fR


.TP
ldap admin dn (G)
The \fIldap admin dn\fR defines the Distinguished Name (DN) name used by Samba to contact the ldap server when retreiving user account information\&. The \fIldap admin dn\fR is used in conjunction with the admin dn password stored in the \fIprivate/secrets\&.tdb\fR file\&. See the \fBsmbpasswd\fR(8) man page for more information on how to accmplish this\&.


.TP
ldap delete dn (G)
This parameter specifies whether a delete operation in the ldapsam deletes the complete entry or only the attributes specific to Samba\&.


缺省设置: \fBldap delete dn = no\fR


.TP
ldap filter (G)
这个选项指定了RFC2254兼容的LDAP搜索过滤器。默认对所有匹配\fBsambaAccount\fR对象类的条目进行登录名和 \fBuid\fR 属性之间的匹配。注意这个过滤器只应当返回一个条目.


缺省设置: \fBldap filter = (&(uid=%u)(objectclass=sambaAccount))\fR


.TP
ldap group suffix (G)
This parameters specifies the suffix that is used for groups when these are added to the LDAP directory\&. If this parameter is unset, the value of \fIldap suffix\fR will be used instead\&.


缺省设置: \fBnone\fR


示例: \fBdc=samba,ou=Groups\fR


.TP
ldap idmap suffix (G)
This parameters specifies the suffix that is used when storing idmap mappings\&. If this parameter is unset, the value of \fIldap suffix\fR will be used instead\&.


缺省设置: \fBnone\fR


示例: \fBou=Idmap,dc=samba,dc=org\fR


.TP
ldap machine suffix (G)
It specifies where machines should be added to the ldap tree\&.


缺省设置: \fBnone\fR


.TP
ldap passwd sync (G)
This option is used to define whether or not Samba should sync the LDAP password with the NT and LM hashes for normal accounts (NOT for workstation, server or domain trusts) on a password change via SAMBA\&.


The \fIldap passwd sync\fR can be set to one of three values:


\fIYes\fR = Try to update the LDAP, NT and LM passwords and update the pwdLastSet time\&.

\fINo\fR = Update NT and LM passwords and update the pwdLastSet time\&.

\fIOnly\fR = Only update the LDAP password and let the LDAP server do the rest\&.

缺省设置: \fBldap passwd sync = no\fR


.TP
ldap port (G)
这个选项只有在编译时配置了"--with-ldap"选项的情况下才可用.

这个选项控制用于和LDAP服务器通讯的tcp端口号。默认应用标准的LDAP端口636。


参见: ldap ssl


Default : \fBldap port = 636 ; 如果 ldap ssl = on\fR


Default : \fBldap port = 389 ; 如果 ldap ssl = off\fR


.TP
ldap server (G)
这个选项只有在编译时配置了"--with-ldapsam"选项的情况下才可用.

这个选项应当包含ldap目录服务器的FQDN，用来查询和定位用户帐户信息。


Default : \fBldap server = localhost\fR


.TP
ldap ssl (G)
This option is used to define whether or not Samba should use SSL when connecting to the ldap server This is \fBNOT\fR related to Samba's previous SSL support which was enabled by specifying the \fB--with-ssl\fR option to the \fIconfigure\fR script\&.


The \fIldap ssl\fR can be set to one of three values:


\fIOff\fR = Never use SSL when querying the directory\&.

\fIStart_tls\fR = Use the LDAPv3 StartTLS extended operation (RFC2830) for communicating with the directory server\&.

\fIOn\fR = Use SSL on the ldaps port when contacting the \fIldap server\fR\&. Only available when the backwards-compatiblity \fB--with-ldapsam\fR option is specified to configure\&. See \fIpassdb backend\fR

Default : \fBldap ssl = start_tls\fR


.TP
ldap suffix (G)
指定用户和机器帐号从哪里加入树中。可以被\fBldap user suffix\fR和\fBldap machine suffix\fR选项越过。它也用作所有ldap搜索的base dn。


缺省设置: \fBnone\fR


.TP
ldap user suffix (G)
This parameter specifies where users are added to the tree\&. If this parameter is not specified, the value from \fBldap suffix\fR\&.


缺省设置: \fBnone\fR


.TP
level2 oplocks (S)
这个参数控制了是否Samba在一个共享上支持第二级(只读)oplocks。

2级,或者只读oplocks允许Windows NT客户在文件中可以保持一个oplocks,一旦第二个用户请求同一文件时可以从读写oplocks级降为只读oplocks(而不是像传统的做法，保持唯一的oplocks，在第二次打开时释放所有的oplocks).这样就可以允许支持2级oplocks的文件打开者缓存用于只读的文件(也就是说,他们的写和锁定请求不可能被缓冲),并且使只读文件的大量访问提升性能(例如.exe文件).

一旦在拥有只读oplocks的客户中有一位对文件进行了写操作,所有的客户都会被通知(不需要回复及等待), told to break their oplocks to "none",然后删除所有read-ahead caches.

推荐打开这个选项，为共享的可执行程序提高访问速度。

更多关于2级oplocks的讨论请查看CIFS的规约.

当前,如果使用了\fIkernel oplocks\fR的话,就不会认可2级oplocks(即使把那个选项设为\fByes\fR也没用).还要注意,\fIoplocks\fR 选项必须在共享上被设成\fByes\fR才有效果.

参见 \fIoplocks\fR 和 \fIkernel oplocks\fR 选项。


缺省设置: \fBlevel2 oplocks = yes\fR


.TP
lm announce (G)
这个选项决定\fBnmbd\fR(8)是否产生"Lanman宣告广播",OS/2的客户端需要这个广播用以在它们的浏览列表里看到Samba服务器.这个选项有3个值:\fByes\fR、\fBno\fR、\fBauto\fR.缺省值是\fBauto\fR.如果这值为\fBno\fR,Samba将不会产生这种广播.如果设置为\fByes\fR,Samba将以\fIlm interval\fR选项的值为频率产生这种广播.如果设置为\fBauto\fR,Samba并不发出这类广播,但是侦听他们.如果收到这样的广播,它就开始发送这种广播,频率还是以\fIlm interval\fR选项设定的为准.


参见 \fIlm interval\fR.


缺省设置: \fBlm announce = auto\fR


示例: \fBlm announce = yes\fR


.TP
lm interval (G)
如果Samba设置为产生"Lanman宣告广播（给OS/2客户端使用,参见\fIlm announce\fR选项）.那么,这里的选项设定了以秒为单位的发生频率.如果这个选项设置为"0",则不管\fIlm announce\fR选项的值,永远不会发出任何"Lanman宣告广播".


参见\fIlm announce\fR.


缺省设置: \fBlm interval = 60\fR


示例: \fBlm interval = 120\fR


.TP
load printers (G)
这个布尔值控制是否在"printcap"文件中的所有打印机将会被缺省的安装到Samba环境,并且可以被浏览.参见"printers"段获得更多细节.


缺省设置: \fBload printers = yes\fR


.TP
local master (G)
这个选项允许\fBnmbd\fR(8)试着去成为本地子网的主控浏览器.如果选项值为\fBno\fR,\fB nmbd\fR不会去争取这个权利.在缺省情况下,这个值为\fByes\fR.设置这个值为\fByes\fR,并不意味着\fBbecome\fR 就一定会成为本地的主浏览器,只是意味着\fBbecome\fR 会参加成为主浏览器的选举.


设置这个值为 \fBno\fR 将使 \fBnmbd\fR \fB永远不会\fR 成为主控浏览器。


缺省设置: \fBlocal master = yes\fR


.TP
lock dir (G)
与 \fI lock directory\fR 同义.


.TP
lock directory (G)
这个选项指出"加锁文件"放置的目录.加锁文件用以实现最大连接数\fImax connections\fR.


缺省设置: \fBlock directory = ${prefix}/var/locks\fR


示例: \fBlock directory = /var/run/samba/locks\fR


.TP
locking (S)
这个选项控制当客户端发出锁定请求时,服务器是否执行"锁定".

如果 \fBlocking = no\fR ,所有的锁定请求和解除锁定请求将表现为成功执行.对锁定的查询将会显示没有锁定.

如果\fBlocking = yes\fR 服务器将执行真正的锁定。

这个选项\fB可能\fR对只读文件系统有用,因为它\fB可能\fR不需要锁定（例如:CDROM）.即使在这种情况下,我们也不真正推荐使用\fBno\fR.

要特别小心,不管是全局的关闭这个选项或者在某个服务上关闭这个选项,都有可能由于缺少锁定而导致数据损坏.其实,你根本就不需要设置这个选项.


缺省设置: \fBlocking = yes\fR


.TP
lock spin count (G)
This parameter controls the number of times that smbd should attempt to gain a byte range lock on the behalf of a client request\&. Experiments have shown that Windows 2k servers do not reply with a failure if the lock could not be immediately granted, but try a few more times in case the lock could later be aquired\&. This behavior is used to support PC database formats such as MS Access and FoxPro\&.


缺省设置: \fBlock spin count = 3\fR


.TP
lock spin time (G)
The time in microseconds that smbd should pause before attempting to gain a failed lock\&. See \fIlock spin count\fR for more details\&.


缺省设置: \fBlock spin time = 10\fR


.TP
log file (G)
这个选项允许设置其它的文件名字来替代Samba日志文件（也就是调试文件).

这个选项支持标准的文件名代换变量,允许方便的为每个用户或者机器设置专用的日志文件.


示例: \fBlog file = /usr/local/samba/var/log.%m\fR


.TP
log level (G)
这个值(字符串)允许在\fIsmb.conf\fR里定义调试水平(记录水平).This parameter has been extended since the 2.2.x series, now it allow to specify the debug level for multiple debug classes. 这给系统配置带来更大的灵活性.


缺省的调试水平将在命令行里定义,如果没有定义,调试水平为零.



示例: \fBlog level = 3 passdb:5 auth:10 winbind:2\fR


.TP
logon drive (G)
这个选项设置一个本地路径（可以理解为网络映射盘）,当登录时,用户的主目录就连接到这个本地路径(参见\fIlogon home\fR).

注意:这个选项只有在Samba是登录服务器时才有用.


缺省设置: \fBlogon drive = z:\fR


示例: \fBlogon drive = h:\fR


.TP
logon home (G)
当Win95/98或Win NT工作站登录到Samba PDC时,它们的主目录的位置.设置了这个选项,就允许在(DOS)提示符下使用形如:


C:\\> \fBNET USE H: /HOME\fR

这样的命令。

这个选项支持标准的命令选项替换,方便为每个用户或者机器提供登录脚本.


This parameter can be used with Win9X workstations to ensure that roaming profiles are stored in a subdirectory of the user's home directory\&. This is done in the following way:


\fBlogon home = \\%N\%U\profile\fR


This tells Samba to return the above string, with substitutions made when a client requests the info, generally in a NetUserGetInfo request\&. Win9X clients truncate the info to \\\\server\\share when a user does \fBnet use /home\fR but use the whole string when dealing with profiles\&.


Note that in prior versions of Samba, the \fIlogon path\fR was returned rather than \fIlogon home\fR\&. This broke \fBnet use /home\fR but allowed profiles outside the home directory\&. The current implementation is correct, and can be used for profiles if you use the above trick\&.

注意,这个选项只在Samba被设置成为登录服务器logon server时才起作用.


缺省设置: \fBlogon home = "\\%N\%U"\fR


示例: \fBlogon home = "\\remote_smb_server\%U"\fR


.TP
logon path (G)
这个选项指定了存放roaming profile(WindowsNT的NTuser.dat 等文件)的用户目录.Contrary to previous versions of these manual pages, it has nothing to do with Win 9X roaming profiles. To find out how to handle roaming profiles for Win 9X system, see the \fIlogon home\fR parameter.

这个选项支持标准替换,允许你为每一个用户或机器设置不同的登录脚本.它也可以指定那些显示在Windows NT客户端上的"应用程序数据"(\fI桌面\fR,\fI开始菜单\fR,\fI网上邻居\fR和\fI程序\fR等文件夹和他们的内容).

指定的共享资源和路径必须是用户可读的,这样,设定的选项和目录才能被Windows NT客户端装载使用.这个共享资源在用户第一次登录时必须是可写的,这样Windows NT客户端才能建立NTuser.dat文件及其他目录.

然后,这些目录以及其中的任何内容都可以根据需要设置为只读的.把NTuser.dat文件设置成只读是不明智的,你应该把它改名成NTuser.man(一个强制使用(\fBMAN\fRdatory)的user.dat)来达到同样的目的.

Windows终端有时候即使没有用户登录也会保持对[homes]共享资源的连接.因此,logon path不能包含对homes共享资源的任何参照(也就是说,把这个选项设置成类似\\\\%N\\HOMES\\profile_path会引起问题).


这个选项支持标准替换,允许你为不同的机器或用户设置不同的登录脚本.


注意,这个选项只有在Samba被设置成为登录服务器logon server的时候才起作用.


缺省设置: \fBlogon path = \\\\%N\\%U\\profile\fR


示例: \fBlogon path = \\\\PROFILESERVER\\PROFILE\\%U\fR


.TP
logon script (G)
这个选项指明,当一个用户成功的登录后,将会自动下载到本地执行的脚本文件,这个脚本文件可能是一个批处理文件（.bat）或者一个NT命令文件（.cmd）.这个脚本文件必须使用DOS风格的回车/换行（CR/LF）来结束每一行,因此,我们推荐使用DOS风格的文本编辑器来建立这个文件.


脚本文件的存放位置必须是相对于[netlogon]服务中指明的目录路径,举例来说,如果[netlogon]服务指定了了一个\fIpath\fR是\fI/usr/local/samba/netlogon\fR,而\fBlogon script \fR = STARTUP.BAT, 那么将要下载到客户端执行的文件的实际存放位置是:


\fI/usr/local/samba/netlogon/STARTUP.BAT\fR


登录脚本的内容包含什么,完全由你决定.我们建议包含这个指令:\fBNET TIME \\SERVER /SET /YES\fR,它强迫每一台机器的时间和服务器的时间同步（以服务器的时间为准）；另一个建议是映射公共工具盘:\fBNET USE U:\\\\SERVER\\"公共工具目录"\fR 例如:

.nf
NET USE Q:\\SERVER\ISO9001_QA
.fi

注意:在一个有安全要求的系统环境中,特别重要的是要记住不要允许客户在[netlogon]上有写的权限,也不要给以客户改写登录脚本文件的权利.如果允许客户随意的修改,安全规则就给撕裂了一个口子.


这个选项支持标准的置换规则,允许你为每个不同的用户或机器定制不同的登录脚本.


注意,这个选项只有在Samba设置为登录服务器时才起作用.



缺省设置: \fBno logon script defined\fR


示例: \fBlogon script = scripts\%U.bat\fR


.TP
lppause command (S)
这个选项指定在服务器上中断指定的打印作业的打印或假脱机打印操作所使用的指令.


这个指令应该是一个可以根据打印机名和作业号中断打印作业的程序或脚本.实现这个操作的一个办法是使用作业优先级,优先级别太低的作业不会被发送到打印机上.


用\fI%p\fR置换可以取得打印机名,而\fI%j\fR会被打印作业号(一个整数)置换.在HPUX系统中(参见\fIprinting=hpux \fR),如果给lpq命令加上\fI-p%p\fR选项,打印作业会显示其执行状态,具体的说,如果作业的优先级低于阻塞级别,它会显示'PAUSED'状态,反之,如果作业的优先级等于或高于阻塞级别,它会显示'SPOOLED'或'PRINTING'状态.


注意,在这个设置中使用绝对路径是一个好习惯,因为这个路径有可能不在服务器的PATH环境变量中.


参见 \fIprinting \fR parameter选项.


缺省设置: 目前这个选项没有缺省设置,除非\fIprinting\fR选项设置\fBSYSV\fR,在这种情况下,缺省参
数是:


\fBlp -i %p-%j -H hold\fR


或者在\fIprinting\fR选项设置为\fBsoftq\fR时,缺省选项是:


\fBqstat -s -j%j -h\fR


在HPUX系统中的例子: \fBlppause command = /usr/bin/lpalt %p-%j -p0\fR


.TP
lpq cache time (G)
此选项控制了\fBlpq\fR信息多长时间被缓冲一次,以防止频繁调用\fBlpq\fR命令.每一次系统使用\fBlpq\fR命令会保留一个单独的缓冲,所以如果不同的用户分别使用了不同的\fBlpq\fR命令的话,他们不可能共享缓冲信息.


缓冲文件被存放在\fI/tmp/lpq.xxxx\fR文件中,其中的xxxx是正在使用的\fBlpq\fR命令哈希表.


这个选项的缺省值是10秒,这就是说以前相同的\fBlpq\fR命令的缓冲内容将在周期为10秒内被使用.如果\fBlpq\fR命令非常慢的话,可以取稍大的值.


把这个值设为0就完全禁止了缓冲技术的使用.


参见 \fIprinting\fR 选项.


缺省设置: \fBlpq cache time = 10\fR


示例: \fBlpq cache time = 30\fR


.TP
lpq command (S)
这个选项指定为了获得\fBlpq\fR风格的打印机状态信息而要在服务器上要执行的命令.


这个命令应该是一个只以打印机名作为选项并可以输出打印机状态信息的程序或脚本.


通常支持九种打印机状态信息:CUPS, BSD,AIX,LPRNG,PLP,SYSV,HPUX,QNX和SOFTQ.而这些正好覆盖了大多数的UNIX系统.你可以用\fIprinting =\fR选项来控制到底要用哪种类型.


有些客户端(特别是Windows for Workgroups)可能不能正确地向打印机发送联接号以获得状态信息.对此,服务器会向客户报告它所联接的首个打印服务.这样的情况只当联接号发送非法时才会发生.


如果使用\fI%p\fR变量的话,系统会在此处放置打印机名.否则在命令后放置打印机名.


注意,当服务器不能获得\fBPATH\fR变量的话,以绝对路径来描述\fIlpq command\fR是个好习惯. 当与CUPS库编译连接时，不需要\fIlpq command\fR，因为smbd将使用库调用来获得打印队列列表。


参见 \fIprinting \fR 选项.


缺省设置: \fB依赖于 \fI printing\fR 的设置情况\fR


示例: \fBlpq command = /usr/bin/lpq -P%p\fR


.TP
lpresume command (S)
此选项指定为了继续连续打印或假脱机一个指定的打印任务时要在服务器上执行的命令.


此命令应该是一个以打印机名和要恢复的打印任务号作为选项的程序或脚本.参见\fIlppause command \fR参数。


如果使用\fI%p\fR变量的话,系统会在此处放置打印机名.用\fI%j\fR来代替打印任务号,当然是用整数形
式罗.


注意,当服务器不能获得PATH变量的话,以绝对路径来描述\fIlpresume command\fR是个好习惯


参见 \fIprinting \fR 选项.


缺省设置: 当前没有缺省设置，除非 \fIprinting\fR 选项是 \fBSYSV\fR, 此时默认是


\fBlp -i %p-%j -H resume\fR


或者如果\fIprinting\fR 选项是 \fBSOFTQ\fR, 那么默认是:


\fBqstat -s -j%j -r\fR


HPUX的示例: \fBlpresume command = /usr/bin/lpalt %p-%j -p2\fR


.TP
lprm command (S)
此选项指定为了要删除一个打印任务而需要在服务器上执行的命令.


此命令应该是一个使用打印机名和打印任务号的程序或脚本,并且执行它们可以删掉打印任务.

如果使用\fI%p\fR变量的话,系统会在此处放置打印机名.用\fI%j\fR来代替打印任务号,当然是也用整数形式罗.

注意,当不能从服务器获得PATH变量的话,以绝对路径来描述\fIlprm command\fR是个好习惯.


参见\fIprinting \fR 选项.


缺省设置: \fB依赖于 \fIprinting \fR 选项设置\fR


示例 1: \fBlprm command = /usr/bin/lprm -P%p %j\fR


示例 2: \fBlprm command = /usr/bin/cancel %p-%j\fR


.TP
machine password timeout (G)
如果samba服务器是Windows NT域成员的话(参见\fIsecurity=domain\fR选项),那么运行中的smbd进程会周期性地试着改变储存在叫做\fIprivate/secrets.tdb\fR的TDB中的MACHINE ACCOUNT PASSWORD.这个参数指定了密码将多久更换一次，以秒为单位。缺省值是一个星期(当然要以秒来表示),这与NT域成员服务器是一样的.


参见 \fBsmbpasswd\fR(8), 和 \fIsecurity = domain\fR 选项.


缺省设置: \fBmachine password timeout = 604800\fR


.TP
magic output (S)
此选项指定了一个用magic脚本输出内容而建立的文件的名称,参见下面对\fImagic script\fR选项的描述.


警告:如果两个客户在同样的目录下用相同的\fImagic script\fR,输出文件内容是无法确定的.


缺省设置: \fBmagic output = <magic script name>.out\fR


示例: \fBmagic output = myfile.txt\fR


.TP
magic script (S)
这个选项用来指定将被服务器执行的文件的名字,这个文件如果已经打开,那么,当这个文件关闭后服务器同样也可以运行.这样就允许了一个UNIX脚本可以传送到samba主机,并为所连接的用户运行.


以这种方式运行的脚本将会在完成以后被删除,只要权限允许的话.


如果脚本产生了输出的话,这些信息就被送到\fImagic  output\fR选项指定的文件中(见以上描述).


注意,一些命令解释器不能解释包含CR/LF而不是CR回车换行符的脚本.magic脚本必须是可以被运行的（\fB就象\fR在本地主机运行一样）,而有些脚本在某些主机上或某些shell下可能会在dos客户端进行过滤处理.


magic脚本仍处于\fB实验\fR阶段,所以\fB不能\fR对此完全依赖.


缺省设置: \fB无。禁止使用magic script.\fR


示例: \fBmagic script = user.csh\fR


.TP
mangle case (S)
参见NAME MANGLING部分.


缺省设置: \fBmangle case = no\fR


.TP
mangled map (S)
这个选项是用来直接映射那些不能在Windows/DOS上描述的unix文件名.不过并不经常出现这样的情况,只有一些特殊的扩展名在DOS和UNIX之间才会不同,例如,HTML文件在UNIX下通常都是\fI.html\fR,而在Windows/DOS下通常却是\fI.htm\fR.


所以如果要将 \fIhtml\fR 映射为 \fIhtm\fR 你应当这样:


\fBmangled map = (*.html *.htm)\fR


有一个非常有用的经验是删掉在CDROM光盘上一些文件名后面讨人厌的\fI;1\fR(只有在一些UNIX可以看到它们).为此可以这样映射：(*;1 *;).


缺省设置: \fI没有 mangled map\fR


示例: \fBmangled map = (*;1 *;)\fR


.TP
mangled names (S)
这个选项控制是否要把UNIX下的非DOS文件名映射为DOS兼容的形式("mangled")并使得它们可以查阅,或者简单地忽略掉这些非DOS文件名.


NAME MANGLING部分有更多关于如何控制这类处理的详细信息.


如果使用了这种映射,那么其算法就象下面这样：


把文件名最后一个点符号前面首五个字母数字字符强制转换成大写,作为要映射名字的首五个字符.


在要映射名字的起始部分加上"~"符号,后面跟两个字符的特殊序列字串,而这个序列字串是由原始的文件名而来（也就是：原文件名去掉最后的文件扩展名）.只有当文件的扩展名含有大写字母或长于三个字符时,文件的最后扩展名才被包含在散列计算中.


注意,如果你不喜欢'~'的话,可以用\fImangling char\fR选项来指定你想要的字符.


最后,扩展名部分的前三个字符会被保留,强制转换到大写并作为映射后名字的扩展名.最后的扩展名就是原始文件名中最后一个'.'右面的那部分.如果文件名中没有'.',那么映射后的文件名也没有扩展名部分(除非用了"hidden files" - 参见后面的介绍).

unix的文件名如果以点开始,那么好比DOS中的隐藏文件.这些文件映射后的文件名就会拿掉点符号并用"___"来作为它的扩展名,而不管原来的扩展名是什么("___"是三个下划线).


大写字母数字字符组成了两位散列值.

如果目录中的文件与要映射的文件名使用了相同的前五位字符,这样的算法会导致名称冲突,不过发生冲突的可能性是1/1300.


名称映射允许当需要保留unix长文件名时在unix目录与Windows/DOS之间拷贝文件.从Windows/DOS中拷过来的unix文件可以更换新的扩展名并保留同样的主文件名.名称映射并不会在转换时更改什么东西.


缺省设置: \fBmangled names = yes\fR


.TP
mangled stack (G)
这个选项控制了映射文件名的数量,以便让Samba服务器\fBsmbd\fR(8)对其进行缓存.


栈里保存了最近映射的基本文件名(扩展名只有在超过3个字符或者包含大写字符时才会保留).


栈值设得稍大一些,对于映射unix的长文件名操作会更顺利一些.但是,它会使目录访问变得更慢；小一些的栈可以保存在服务器的内存中(每个栈元素占256个字节).


并不保证在转换长文件名时绝对正确无误,准备好面对可能出现的惊奇.


缺省设置: \fBmangled stack = 50\fR


示例: \fBmangled stack = 100\fR


.TP
mangle prefix (G)
controls the number of prefix characters from the original name used when generating the mangled names\&. A larger value will give a weaker hash and therefore more name collisions\&. The minimum value is 1 and the maximum value is 6\&.


mangle prefix is effective only when mangling method is hash2\&.


缺省设置: \fBmangle prefix = 1\fR


示例: \fBmangle prefix = 4\fR


.TP
mangling char (S)
这个选项指定在name mangling操作中使用什么样的字符作为\fBmagic\fR字符.缺省是用了'~',不过有些软件可能会在使用上受到某些妨碍.可以设定为你想要的字符.


缺省设置: \fBmangling char = ~\fR


示例: \fBmangling char = ^\fR


.TP
mangling method (G)
controls the algorithm used for the generating the mangled names\&. Can take two different values, "hash" and "hash2"\&. "hash" is the default and is the algorithm that has been used in Samba for many years\&. "hash2" is a newer and considered a better algorithm (generates less collisions) in the names\&. However, many Win32 applications store the mangled names and so changing to the new algorithm must not be done lightly as these applications may break unless reinstalled\&.


缺省设置: \fBmangling method = hash2\fR


示例: \fBmangling method = hash\fR


.TP
map acl inherit (S)
This boolean parameter controls whether \fBsmbd\fR(8) will attempt to map the 'inherit' and 'protected' access control entry flags stored in Windows ACLs into an extended attribute called user\&.SAMBA_PAI\&. This parameter only takes effect if Samba is being run on a platform that supports extended attributes (Linux and IRIX so far) and allows the Windows 2000 ACL editor to correctly use inheritance with the Samba POSIX ACL mapping code\&.


缺省设置: \fBmap acl inherit = no\fR


.TP
map archive (S)
这个选项决定了是否把DOS的归档属性映射为UNIX可执行位.在文件修改后DOS的归档位会被设定到文件上.保持归档位的一个理由是使得Samba或者你的PC在新建任何文件的时候，不会为它们设置UNIX可执行属性。那样对于共享源代码、文档等等非常让人厌烦。


注意这个选项需要在\fIcreate mask\f中没有排除文件属主的执行权限位(也就是说它必须包含100).参见\fIcreate mask\fR选项中的描述.


缺省设置: \fBmap archive = yes\fR


.TP
map hidden (S)
这个选项决定DOS下的隐藏文件是否要映射为UNIX全局可执行位.


注意这个选项需要在\fIcreate mask\fR中没有排除所有用户的执行权限位(也就是说它必须包含001).参见\fIcreate mask\fR选项中的描述.


缺省设置: \fBmap hidden = no\fR


.TP
map system (S)
这个选项决定DOS下的系统文件是否要映射为UNIX组可执行位.

注意这个选项需要在\fIcreate mask\fR中没有排除组用户的执行权限位(也就是说它必须包含010).参见\fIcreate mask\fR选项中的描述.


缺省设置: \fBmap system = no\fR


.TP
map to guest (G)
这个选项只在安全模式不是共享级(\fIsecurity=share\fR)时才有用,也就是选用了用户安全级,服务器安全级或者域安全级(\fBuser\fR, \fBserver\fR, 和\fBdomain\fR).


这时,选项会有三种不同的值,分别通知\fBsmbd\fR(8)在用户以非法身份登录时作何相应处理.


这三种设定是:


\fBNever\fR - 意思是用户登录时用了个非法口令并且被服务器所拒.这是个缺省值.


\fBBad User\fR - 意思是用户登录时用了非法口令并且被服务器所拒,除非用户名不存在,否则也可以以来宾身份登录并映射到对应的\fIguest account\fB账号.


\fBBad Password\fR - 意思是用户登录时即使用了非法口令,但是还会以来宾身份登录并映射到对应的guest账号.可能出现这样的问题,就是用户虽然输错了口令,却非常平静地以\(lq来宾\(rq身份登录到系统上。他们不明白为什么他们不能访问那些他们认为可以访问的资源,因为在登录时没有任何信息提示他们输错了口令。所以应该小心使用它,以避免不必要的麻烦. Helpdesk services will \fBhate\fR you if you set the \fImap to guest\fR parameter this way :-).


注意当使用共享级以外的其它安全模式时,要设定这个选项，以使"Guest"共享资源服务发挥作用.因为在这些安全级模式中,用户请求的共享资源名在服务器成功验证用户登录前\fB不会\fR发送到服务器作处理,所以服务器就在不能处理联接验证结果时为联接提供"Guest"共享.


对于那些以前的版本,这个选项会映射到编译时所用的local.h文件里定义的\fBGUEST_SESSSETUP\fR变量的值.


缺省设置: \fBmap to guest = Never\fR


示例: \fBmap to guest = Bad User\fR


.TP
max connections (S)
最大联接数就是允许同时联接到一个资源服务的最大数量限制.在\fImax connections\fR大于0的情况下,如果联接数超过了最大联接数设定时,超出的联接将被拒绝.如果设为0的话就没有这样的联接限制了.


为了实现这样的功能,系统会使用记录锁定文件.锁定文件存放在\fIlock directory\fR选项指定的目录中.


缺省设置: \fBmax connections = 0\fR


示例: \fBmax connections = 10\fR


.TP
max disk size (G)
控制磁盘使用的上限.如果把它设为100的话,所有的共享资源容量都不会超过100M.


注意这个选项并不是限制管理员往磁盘上存放数据的容量.在上面所说的情况中,管理员仍然可以存放超过100M的数据到磁盘上,但如果客户查询剩余磁盘空间或磁盘总空间的话,所得到的结果就只在这个 \fImax disk size\fR指定的容量范围之内.


使用这个选项主要是为了对一些疯狂使用磁盘空间的软件进行一定的限制,特别是它们可能会使用超过1G上以的磁盘空间.


把这个选项设为0说明没有限制.


缺省设置: \fBmax disk size = 0\fR


示例: \fBmax disk size = 1000\fR


.TP
max log size (G)
这个选项(一个kB为单位的整数)用来指定使用的记录文件最大到多少容量.samba会周期性地检查这个容量,如果超过这个选项值就把老的文件换名成扩展名为\fI.old\fR的文件.


把这个选项设为0说明没有限制.


缺省设置: \fBmax log size = 5000\fR


示例: \fBmax log size = 1000\fR


.TP
max mux (G)
这个选项控制了对用户允许的最大SMB并发操作数.你应该不需要设定这个选项的.


缺省设置: \fBmax mux = 50\fR


.TP
max open files (G)
这个选项限定了在任意时间客户端用一个 \fBsmbd\fR(8)文件服务进程可以打开的最大文件数.缺省的值非常高(10,000),因为对于每个未打开的文件只使用其中的一位.


打开文件极限通常用UNIX每进程最大文件描述符数来限制更好,所以你不需要去碰这个选项的.


缺省设置: \fBmax open files = 10000\fR


.TP
max print jobs (S)
This parameter limits the maximum number of jobs allowable in a Samba printer queue at any given moment\&. If this number is exceeded, \fBsmbd\fR(8) will remote "Out of Space" to the client\&. See all \fItotal print jobs\fR\&.


缺省设置: \fBmax print jobs = 1000\fR


示例: \fBmax print jobs = 5000\fR


.TP
max protocol (G)
此项的值是一个字符串,定义了服务器支持的最高协议等级.

可能的值是:

\fBCORE\fR: 早期版本,不接受用户名.

\fBCOREPLUS\fR: 在CORE的基础上改进了一些性能.

\fBLANMAN1\fR: 第一个比较流行的协议,支持长文件名.

\fBLANMAN2\fR: 对LANMAN1进行了更新. 

\fBNT1\fR: 目前用于Windows NT,一般称为CIFS.

通常,此选项不必设定,因为在SMB协议中会自动协商并选择合适的协议.


参见 \fImin protocol\fR


缺省设置: \fBmax protocol = NT1\fR


示例: \fBmax protocol = LANMAN1\fR


.TP
max reported print jobs (S)
This parameter limits the maximum number of jobs displayed in a port monitor for Samba printer queue at any given moment\&. If this number is exceeded, the excess jobs will not be shown\&. A value of zero means there is no limit on the number of print jobs reported\&. See all \fItotal print jobs\fR and \fImax print jobs\fR parameters\&.


缺省设置: \fBmax reported print jobs = 0\fR


示例: \fBmax reported print jobs = 1000\fR


.TP
max smbd processes (G)
This parameter limits the maximum number of \fBsmbd\fR(8) processes concurrently running on a system and is intended as a stopgap to prevent degrading service to clients in the event that the server has insufficient resources to handle more than this number of connections\&. Remember that under normal operating conditions, each user will have an \fBsmbd\fR(8) associated with him or her to handle connections to all shares from a given host\&.


缺省设置: \fBmax smbd processes = 0\fR ## no limit


示例: \fBmax smbd processes = 1000\fR


.TP
max ttl (G)
这个选项通知\fBnmbd\fR(8) 当它用广播或从WINS服务器请求一个名字时,这个NetBIOS名字的有效时间('time to live', 以秒计)是多长.你不需要去碰这个选项,缺省值是3天.


缺省设置: \fBmax ttl = 259200\fR


.TP
max wins ttl (G)
这个选项通知\fBsmbd\fR(8)程序当它作为一个WINS服务器时(\fIwins support =true\fR),nmbd承认的最长NetBIOS名字生存时间('time to live',以秒计).你不需要去改变这个选项的,缺省值是6天(518400秒).


参见 \fImin wins ttl\fR 选项.


缺省设置: \fBmax wins ttl = 518400\fR


.TP
max xmit (G)
这个选项控制通过samba的最大包容量.缺省值是65535,同时这也是最大值.有时你可能用一个较小的值可以得到更好的性能.不过低于2048通常会有一些问题.


缺省设置: \fBmax xmit = 65535\fR


示例: \fBmax xmit = 8192\fR


.TP
message command (G)
当服务器接收到一个WinPopup类似的信息时运行一个指定的命令.


通常这个命令所做之事都取决于你的想象.


例如:

\fBmessage command = csh -c 'xedit %s;rm %s' &\fR

这个命令用\fBxedit\fR发出一条信息,然后再删除它.\fB注意很重要的一点是这个命令应该立即返回\fR.这就是为什么在行末用'&'的原因.如果它没有立即返回的话,计算机可能会在发送信息时当掉的(不过一般都会在30秒后恢复).


所有信息都被以全局访客用户身份发送.命令可以使用标准的替换符,不过\fI%u\fR将不会有效(在这里用\fI%U\fR可能更好).


除了标准替换的部分,还可以应用一些附加的替换,比如:


\fI%s\fR =包含消息的文件名

\fI%t\fR = 发送信息的目标(很可能是服务器名).

\fI%f\fR = 信息的来源.

你可以用这个命令来发送邮件或者你想要的内容.如果你有关于发送内容的好主意请通知开发人员.


有个例子可以以邮件形式发送信息给root：


\fBmessage command = /bin/mail -s 'message from %f on %m' root < %s; rm %s\fR


如果没有指定发送信息所用的命令,那么这个信息并不会被发出,同时Samba向发送者报告出错.不幸的是WfWg(Windows for Workgrups)完全忽略出错代码,提示信息已被发出.


如果你想要悄悄地删掉它的话请用：


\fBmessage command = rm %s\fR


缺省设置: \fB没有 message command\fR


示例: \fBmessage command = csh -c 'xedit %s; rm %s' &\fR


.TP
min passwd length (G)
与 \fImin password length\fR 同义.


.TP
min password length (G)
此项设定当执行变更UNIX口令时\fBsmbd\fR接受的明文口令的最小字符长度.


参见 \fIunix password sync\fR, \fIpasswd program\fR和 \fIpasswd chat debug\fR 选项.


缺省设置: \fBmin password length = 5\fR


.TP
min print space (S)
此项设定一个用户假脱机打印作业必须的最小剩余磁盘空间.当然是用kB 为单位.缺省设为0,就是说用户总是可以假脱机打印作业.


参见 \fIprinting \fR 选项。


缺省设置: \fBmin print space = 0\fR


示例: \fBmin print space = 2000\fR


.TP
min protocol (G)
The value of the parameter (a string) is the lowest SMB protocol dialect than Samba will support\&. Please refer to the \fImax protocol\fR parameter for a list of valid protocol names and a brief description of each\&. You may also wish to refer to the C source code in \fIsource/smbd/negprot\&.c\fR for a listing of known protocol dialects supported by clients\&.


If you are viewing this parameter as a security measure, you should also refer to the \fIlanman auth\fR 选项。 Otherwise, you should never need to change this 选项。


Default : \fBmin protocol = CORE\fR


Example : \fBmin protocol = NT1\fR # disable DOS clients


.TP
min wins ttl (G)
此项通知\fBnmbd\fR(8)当以WINS服务器的形式(\fIwins support = yes\fR)执行时,它所承认的NetBIOS名字的最小有效时间(以秒为单位).这个选项无需更改,缺省是6小时(21600秒)


缺省设置: \fBmin wins ttl = 21600\fR


.TP
msdfs proxy (S)
This parameter indicates that the share is a stand-in for another CIFS share whose location is specified by the value of the 选项。 When clients attempt to connect to this share, they are redirected to the proxied share using the SMB-Dfs protocol\&.


Only Dfs roots can act as proxy shares\&. Take a look at the \fImsdfs root\fR and \fIhost msdfs\fR options to find out how to set up a Dfs root share\&.


示例: \fBmsdfs proxy = \\\\otherserver\\someshare\fR


.TP
msdfs root (S)
If set to \fByes\fR, Samba treats the share as a Dfs root and allows clients to browse the distributed file system tree rooted at the share directory\&. Dfs links are specified in the share directory by symbolic links of the form \fImsdfs:serverA\\\\shareA,serverB\\\\shareB\fR and so on\&. For more information on setting up a Dfs tree on Samba, refer to ???\&.


参见 \fIhost msdfs\fR


缺省设置: \fBmsdfs root = no\fR


.TP
name cache timeout (G)
Specifies the number of seconds it takes before entries in samba's hostname resolve cache time out\&. If the timeout is set to 0\&. the caching is disabled\&.


缺省设置: \fBname cache timeout = 660\fR


示例: \fBname cache timeout = 0\fR


.TP
name resolve order (G)
samba套件中的一些程序使用此项来决定使用的名字服务以及解析主机名到IP地址的次序.主要目的是控制netbios名称怎样解析。此选项列出不同的名字解析选项，以空格为分隔符.


这些名字解析选项是："lmhosts","host","wins"和"bcast".它们决定了名字解析是以如下方式的：


\fBlmhosts\fR : 在samba的lmhosts文件中查找IP地址.如果lmhosts文件的内容行中没有名字类型附加在NetBIOS名上时(参见\fBlmhosts\fR (5)中的详细描述),任何类型的名字都可以匹配这个查询.

\fBhost\fR : 执行标准的主机名到IP地址的解析操作,此操作会使用系统的\fI/etc/hosts\fR,NIS或者是DNS来查询.具体方法取决于操作系统,在IRIX和Solaris中解析名字的方法可能是由\fI/etc/nsswitch.conf\fR文件来控制的.注意此方法只适用于对被查询的NetBIOS名字类型为0x20(服务器)或者是0x1c(域控制器)时才有用,其它类型都会被忽略.后一种情况只在活动目录域中有用，返回一个匹配_ldap._tcp.domain 的SRV RR条目的DNS 查询。

\fBwins\fR : 向列在\fIwins server\fR选项中的服务器查询一个名字对应的IP地址.如果没有指定WINS服务器,那么此方法就被略过了.

\fBbcast\fR : 向在\fIinterfaces\fR选项中列出的每一个已知本地网络接口进行广播来作查询.这是最不可信的名字解析方法,除非目标主机就在本地子网中.

缺省设置: \fBname resolve order = lmhosts host wins bcast\fR


示例: \fBname resolve order = lmhosts bcast host\fR


在上例中首先检查本地lmhosts文件,然后尝试广播,接下来就是用通常的系统主机名查询方式了. 


When Samba is functioning in ADS security mode (\fBsecurity = ads\fR) it is advised to use following settings for \fIname resolve order\fR:


\fBname resolve order = wins bcast\fR


DC lookups will still be done via DNS, but fallbacks to netbios names will not inundate your DNS servers with needless querys for DOMAIN<0x1c> lookups\&.


.TP
netbios aliases (G)
此项指定一串NetBIOS名字让nmbd作为附加的名字进行宣布.这样就使一个机器在可浏览列表中可以出现多个名字形式.如果主机是浏览服务器或登录服务器, 就不会出现这些附加的别名,而只会使用它的初始名字.


参见 \fInetbios name\fR 选项。


缺省设置: \fB空字符串 (没有附加的名字)\fR


示例: \fBnetbios aliases = TEST TEST1 TEST2\fR


.TP
netbios name (G)
此项对一已知的samba服务器设置它的NetBIOS名.缺省情况下会使用此主机DNS名字的主机名部分.如果这个服务器是作浏览服务器或登录服务器时(或是主机DNS名的第一个成分时),这个服务器名将成为这些服务对外宣布时所用的名字.

参见 \fInetbios aliases\fR 选项


缺省设置: \fBmachine DNS name\fR


示例: \fBnetbios name = MYNAME\fR


.TP
netbios scope (G)
This sets the NetBIOS scope that Samba will operate under\&. This should not be set unless every machine on your LAN also sets this value\&.


.TP
nis homedir (G)
此项从NIS映射表中取得有效共享服务器.对于用自动装载程序的UNIX系统来说,用户的主目录经常根据需要从远程服务器装载到一个需要的工作站上.


如果samba登录服务器不是作为真正主目录服务器而是通过NFS来实现,却通知用户以SMB服务器来使用主目录时,用户装载主目录来进行访问需要两个网络跳步(一个以SMB方式,另一个以NFS方式装载).这样的使用方式是非常慢的.


此选项允许当Samba在主目录服务器方式运行时让samba反馈目录服务器而非登录服务器上的主共享资源,这样samba用户可以直接从目录服务器上装载目录.当samba把目录共享资源反馈给用户,这时它会参考\fIhomedir map\fR选项指定的NIS映射表然后再反馈表中列出的服务.


注意要使此项起作用必须有一个运作中的NIS系统,并且samba服务器必须是一个登录服务器。


缺省设置: \fBnis homedir = no\fR


.TP
nt acl support (S)
此布尔量选项控制是否让\fBsmbd\fR(8)尝试把UNIX权限映射到NT的访问控制列表.这个参数在2.2.2之前是一个全局选项。


缺省设置: \fBnt acl support = yes\fR


.TP
ntlm auth (G)
This parameter determines whether or not \fBsmbd\fR(8) will attempt to authenticate users using the NTLM encrypted password response\&. If disabled, either the lanman password hash or an NTLMv2 response will need to be sent by the client\&.


If this option, and \fBlanman auth\fR are both disabled, then only NTLMv2 logins will be permited\&. Not all clients support NTLMv2, and most will require special configuration to us it\&.


Default : \fBntlm auth = yes\fR


.TP
nt pipe support (G)
此布尔量选项控制是否让\fBsmbd\fR(8)允许Windows NT用户联接到NT的特殊SMB管道\fBIPC$\fR.这通常是开发者所用的调试项,其它用户可以不管.


缺省设置: \fBnt pipe support = yes\fR


.TP
nt status support (G)
This boolean parameter controls whether \fBsmbd\fR(8) will negotiate NT specific status support with Windows NT/2k/XP clients\&. This is a developer debugging option and should be left alone\&. If this option is set to \fBno\fR then Samba offers exactly the same DOS error codes that versions prior to Samba 2\&.2\&.3 reported\&.


You should not need to ever disable this 选项。


缺省设置: \fBnt status support = yes\fR


.TP
null passwords (G)
Allow or disallow client access to accounts that have null passwords\&.
允许或禁止用户以空口令使用账号.

参见\fBsmbpasswd\fR(5).


缺省设置: \fBnull passwords = no\fR


.TP
obey pam restrictions (G)
When Samba 3\&.0 is configured to enable PAM support (i\&.e\&. --with-pam), this parameter will control whether or not Samba should obey PAM's account and session management directives\&. The default behavior is to use PAM for clear text authentication only and to ignore any account or session management\&. Note that Samba always ignores PAM for authentication in the case of \fIencrypt passwords = yes\fR\&. The reason is that PAM modules cannot support the challenge/response authentication mechanism needed in the presence of SMB password encryption\&.


缺省设置: \fBobey pam restrictions = no\fR


.TP
only guest (S)
与 \fI guest only\fR同义.


.TP
only user (S)
此布尔量选项控制是否允许当前进行联接所用的用户名没有列在\fIuser\fR列表中.缺省情况下此项是被禁止了,这样用户只要提供服务需要的用户名就可以了.设置这个选项将强制服务器使用\fIuser\fR列表中的登录用户名，这只在共享级安全中有效。


要注意的是上面的说法也表明了samba并不会从服务名而推演出相应的用户名.这样的话对于[homes]段就比较麻烦了.要避免麻烦的话需要用\fBuser = %S\fR,这句就表明你的用户列表\fIuser\fR正好就是这个服务资源名,这时的主目录名就是用户名.


参见 \fIuser\fR 选项。


缺省设置: \fBonly user = no\fR


.TP
oplock break wait time (G)
此项调整性的选项以适应在Windows 9x和WinNT中可能出现的错误.当用户发起一个会导致oplock暂停请求(oplock break request)的SMB对话时,如果samba对其响应太快的话,客户端将会失败并且不能响应此请求.这个可调整的选项(以毫秒为单位)是一个samba在向这样的客户发送oplock暂停请求前等待的时间量.


\fB除非你理解了samba的oplock代码,否则不要改变这个选项！\fR


缺省设置: \fBoplock break wait time = 0\fR


.TP
oplock contention limit (S)
这是个\fB非常\fR高级的\fBsmbd\fR(8)调整选项,用以改进在多个用户争夺相同文件时oplocks认可操作的效率.

简单地说，这个选项指定了一个数字,如果争夺相同文件的用户数量超过了此设定极限的话，即使有请求，\fBsmbd\fR(8)也不再认可oplock的操作了.这样的话\fBsmbd\fR就象Windows NT一样的运行.


\fB除非你理解了samba的oplock代码,否则不要改变这个选项! \fR


缺省设置: \fBoplock contention limit = 2\fR


.TP
oplocks (S)
此布尔量通知\fBsmbd\fR是否对当前请求的共享资源上的文件打开操作启用oplocks(机会性的锁定操作).oplock代码可以明显改善访问samba服务器文件的速度(approx.30% 甚至更多).它允许本地缓存文件,对于不可信赖的网络环境来说可能需要禁止掉这个选项(在Windows NT服务器上它是缺省打开的).请参考samba \fIdocs/\fR目录下的\fISpeed.txt\fR文件.


oplocks会有选择性地关闭每一个基本共享资源上的特定文件.参见\fI veto oplock files\fR 选项.在有些系统上会通过最底层的操作系统确认oplocks.这样就可以在所有的访问与oplocked文件中进行数据同步,而不管此访问是通过samba或NFS或者是本地的UNIX进程.参见\fIkernel oplocks\fR选项查看细节.


参见 \fIkernel oplocks\fR 以及 \fI level2 oplocks\fR parameters.


缺省设置: \fBoplocks = yes\fR


.TP
os2 driver map (G)
The parameter is used to define the absolute path to a file containing a mapping of Windows NT printer driver names to OS/2 printer driver names\&. The format is:


<nt driver name> = <os2 driver name>\&.<device name>


For example, a valid entry using the HP LaserJet 5 printer driver would appear as \fBHP LaserJet 5L = LASERJET.HP LaserJet 5L\fR\&.


The need for the file is due to the printer driver namespace problem described in ???\&. For more details on OS/2 clients, please refer to ???\&.


缺省设置: \fBos2 driver map = <空字符串>\fR


.TP
os level (G)
这个整数值控制在浏览器选举中Samba宣布它本身是什么系统级别. 此选项的值决定了\fBnmbd\fR(8是否有机会成为本地广播区域内工作组\fI WORKGROUP\fR中的主控浏览器.

\fB注意\fR: 默认情况下，Samba将在本地主控浏览器选举中超越所有M$操作系统并且获胜，除非还有Windows NT4.0/2000 域控制器。这意味着Samba主机的错误配置将使一个子网的浏览无效。参见Samba \fIdocs/\fR 目录中的\fIBROWSING.txt \fR来获取详细信息。


缺省设置: \fBos level = 20\fR


示例: \fBos level = 65 \fR


.TP
pam password change (G)
With the addition of better PAM support in Samba 2\&.2, this parameter, it is possible to use PAM's password change control flag for Samba\&. If enabled, then PAM will be used for password changes when requested by an SMB client instead of the program listed in \fIpasswd program\fR\&. It should be possible to enable this without changing your \fIpasswd chat\fR parameter for most setups\&.


缺省设置: \fBpam password change = no\fR


.TP
panic action (G)
此项是一个samba开发者使用的选项以允许当\fBsmbd\fR(8)或\fBsmbd\fR(8)程序崩溃时可以调用一个系统命令.通常这种功能被用于发出对问题的警告.


缺省设置: \fBpanic action = <空字符串>\fR


示例: \fBpanic action = "/bin/sleep 90000"\fR


.TP
paranoid server security (G)
Some version of NT 4\&.x allow non-guest users with a bad passowrd\&. When this option is enabled, samba will not use a broken NT 4\&.x server as password server, but instead complain to the logs and exit\&.


Disabling this option prevents Samba from making this check, which involves deliberatly attempting a bad logon to the remote server\&.


缺省设置: \fBparanoid server security = yes\fR


.TP
passdb backend (G)
This option allows the administrator to chose which backends to retrieve and store passwords with\&. This allows (for example) both smbpasswd and tdbsam to be used without a recompile\&. Multiple backends can be specified, separated by spaces\&. The backends will be searched in the order they are specified\&. New users are always added to the first backend specified\&.


This parameter is in two parts, the backend's name, and a 'location' string that has meaning only to that particular backed\&. These are separated by a : character\&.


Available backends can include: .TP 3 \(bu \fBsmbpasswd\fR - The default smbpasswd backend\&. Takes a path to the smbpasswd file as an optional argument\&. .TP \(bu \fBtdbsam\fR - The TDB based password storage backend\&. Takes a path to the TDB as an optional argument (defaults to passdb\&.tdb in the \fIprivate dir\fR directory\&. .TP \(bu \fBldapsam\fR - The LDAP based passdb backend\&. Takes an LDAP URL as an optional argument (defaults to \fBldap://localhost\fR) LDAP connections should be secured where possible\&. This may be done using either Start-TLS (see \fIldap ssl\fR) or by specifying \fIldaps://\fR in the URL argument\&. .TP \(bu \fBnisplussam\fR - The NIS+ based passdb backend\&. Takes name NIS domain as an optional argument\&. Only works with sun NIS+ servers\&. .TP \(bu \fBmysql\fR - The MySQL based passdb backend\&. Takes an identifier as argument\&. Read the Samba HOWTO Collection for configuration details\&. .LP


缺省设置: \fBpassdb backend = smbpasswd\fR


示例: \fBpassdb backend = tdbsam:/etc/samba/private/passdb.tdb smbpasswd:/etc/samba/smbpasswd\fR


示例: \fBpassdb backend = ldapsam:ldaps://ldap.example.com\fR


示例: \fBpassdb backend = mysql:my_plugin_args tdbsam\fR


.TP
passwd chat (G)
这个字串控制在\fBsmbd\fR(8)和本地口令更改程序间更用户口令时发生的\fB"chat"\fR对话.字符串描述一个应答接收对的序列,让\fBsmbd\fR(8)用于决定对\fIpasswd program\fR发送并等待接收哪些具体的内容.如果没有收到预计的输出时不会更改口令.


这个chat序列一般发生在特定的主机上，取决于本地口令控制的方法(就象NIS或者别的).


注意这个选项仅仅在\fIunix password sync\fR选项设置为\fByes\fR的时候有用。当smbpasswd文件中的SMB口令被更改时是\fB以root身份\fR运行的，不必输入旧密码文本. 这意味着root必须可以在不知道用户密码时重置他的密码。在NIS/YP 中这意味着passwd程序必须在NIS主控服务器上运行。


这个字符串可以包含\fI%n\fR宏，用于替换新密码。chat序列还可以包含标准宏\fB\\\\n\fR, \fB\\\\r\fR, \fB\\\\t\fR 和\fB\\\\s\fR 来给出换行，回车，tab和空格。chat序列字符串还可以包含'*' 来匹配任何字符序列。双引号用来将带空格的字符串设为一个单独的字符串。


如果在对话序列的任何部分发送的字符串为一个句号".",那么不会发送任何内容.同样,如果等待接收部分有字符串是一个".",那么不等待任何的内容.


如果\fIpam password change\fR参数设置为\fByes\fR，chat可以以任何顺序进行，没有特定的输出，是否成功可以由PAM结果得到。在PAM会话中宏\\n被忽略。


参见 \fIunix password sync\fR, \fI passwd program\fR , \fIpasswd chat debug\fR 和 \fIpam password change\fR.


缺省设置: \fBpasswd chat = *new*password* %n\\n *new*password* %n\\n *changed*\fR


示例: \fBpasswd chat = "*Enter OLD password*" %o\\n "*Enter NEW password*" %n\\n "*Reenter NEW password*" %n\\n "*Password changed*"\fR


.TP
passwd chat debug (G)
此布尔量指定口令对话脚本选项是否以 \fBdebug\fR模式运行.在调试模式下,发送和接收的口令对话字符串会打印到\fIdebug level\fR为100时的\fBsmbd\fR(8)记录文件中.由于在\fBsmbd\fR 记录中允许使用明文口令,所以这是个危险的选项.不过这个选项可以帮助Samba管理员在调用\fIpasswd program\fR设好的口令程序时调试其\fIpasswd chat\fR 对话脚本,并且应该在完成以后把它关闭.这个选项在设置了\fIpam password change\fR选项时无效。缺省情况下这个选项是关闭的.


参见 \fIpasswd chat\fR , \fIpam password change\fR , \fIpasswd program\fR .


缺省设置: \fBpasswd chat debug = no\fR


.TP
passwd program (G)
指定用于设定UNIX用户口令的程序名.出现\fI%u\fR的地方表示以用户名替换.在调用口令更改程序前会先检查用户名是否存在.


需要注意的是很多口令程序强调口令要\fB合法\fR,例如应该有最小长度或者是字母与数字的混合.这可能在一些客户端(如WfWg)总将口令转为大写发送时,引起一些问题.


\fB注意\fR如果把\fIunix password sync\fR选项设为\fByes\fR的话,在改变smbpasswd文件中的SMB口令时是\fB以root身份\fR调用改口令程序的.如果口令更改失败的话,\fBsmbd\fR对SMB口令的更改也会失败,这是设计时的机制.


如果设定了\fIunix password sync\fR选项的话,指定口令程序时\fB必须使用\fB所有\fR程序的绝对路径,必须检查安全问题.缺省的\fIunix password sync\fR选项值是 \fBno\fR.


参见 \fIunix password sync\fR.


缺省设置: \fBpasswd program = /bin/passwd\fR


示例: \fBpasswd program = /sbin/npasswd %u\fR


.TP
password level (G)
在一些客户端/服务器群体中使用大小写混合口令存在着困难.其中比较麻烦的一类客户是WfWg,因为它在使用LANMAN1协议时出于某些理由而强调要使用大写口令.不过当使用COREPLUS时不要修改它!
另外在Windows95/98 操作系统中会出问题: 即使选择了会话中的NTLM0.12协议，这些客户端也会将明文口令转为大写。


此选项定义了口令字中大写字母的最大数量.


例如,假定给出的口令是"FRED".如果\fI password level\fR设为1的话,在"FRED"验证失败时会尝试以下的口令组合：

"Fred", "fred", "fRed", "frEd","freD"

如果\fIpassword level\fR设为2的话,就会尝试下面的组合：

"FRed", "FrEd", "FreD", "fREd", "fReD", "frED", \&.\&.

等等。


把此选项设成的值越高，相对单一大小写口令来说大小写混合的口令越容易匹配。.不过,要小心使用这个选项会降低安全性,同时增加处理新联接所花的时间量.


如果把选项设为0时会使处理口令时只作两种尝试 - 先与给出的口令比较,再比较它的全部小写形式.


缺省设置: \fBpassword level = 0\fR


示例: \fBpassword level = 4\fR


.TP
password server (G)
通过在这里指定其它的SMB服务器或者活动目录域控制器,同时使用\fBsecurity = [ads|domain|server]\fR,能把联接samba的用户名/口令合法性验证交给指定的远程服务器去干.


此选项设定上面所说的其它口令服务器的名字或者IP地址. 新的语法允许在连接到ADS realm服务器时指定端口号。要指定默认的LDAP 389端口之外的号码，可以将端口号放在名字或ip后面，中间用一个冒号连接(比如说，192.168.1.100:389)。如果你不指定一个端口，Samba将使用标准的LDAP端口tcp/389. 注意端口号在WindowsNT4.0 域或者netbios连接的服务器上无效

如果参数是一个名称，它将使用 \fIname resolve order\fR 中指定的方式来解析。


口令服务器应该是使用"LM1.2X002"或"LM NT 0.12"协议的主机,而且它本身必须使用用户级安全模式.


注意：使用口令服务器表明你的UNIX主机(就是运行Samba的那台)就只与你指定的口令服务器具有相同的安全等级了.\fB在没有完全信任的情况下不要选择使用其它的口令服务器\fR.


不要把口令服务指向Samba服务器本身,这产生一个循环而去查找你的Samba服务器,导致死锁.


在指定口令服务器名时可以使用标准的替换符,而实际能用的可能只是\fI%m\fR这一个,这个替换符说明Samba服务器会用联入的客户作为口令服务器.如果这样用的话说明你非常信任你的客户,同时最好以主机允许策略对他们进行限制！


如果把安全级\fIsecurity\fR选项设为\fBdomain\fR或者\fBads\fR的话,指定的其它口令服务器必须是在这个Domain中的一个主域控制器或备份域控制器或者'*'.另外指定字符'*'的话就以samba服务器会在整个域中使用加密验证RPC调用来验证用户登录.使用\fB security = domain\fR的好处是,如果指定了几个\fIpassword server\fR时,\fBsmbd \fR会对每一个进行尝试直到它收到回应,对于初始服务器当机时这就很有用了.


如果\fIpassword server\fR选项设为字符'*'的话,samba将尝试通过查询\fBWORKGROUP<1C>\fR名字来自动查找主或者备份域控制器并联系经过名字解析得到的IP地址列表中的每个服务器来进行用户验证.


如果服务器列表包含名字或IP同时也包含'*'时，列表将视为首选域控制器的列表，但是也会添加一个自动的对所有其余DC的查找。Samba不会通过定位最近的DC来优化这张列表。


如果\fIsecurity\fR是\fBserver\fR的话,会有一些安全级为\fBsecurity = domain\fR时所没有的限制：


如果在\fIpassword server\fR选项中指定了几个口令服务器的话,\fBsmbd\fR在联接具体的服务器时会失败,也不能验证任何的用户账号.这是安全级为\fBsecurity = server \fR模式时SMB/CIFS协议的一个限制,并且Samba无法修改.


如果把Windows NT服务器作为口令服务器,你必须确保用户可以从Samba服务器上进行登录.当使用\fB security = server\fR模式时,网络登录看起来是从那里处理的,而不是从用户工作站.

参见 \fIsecurity \fR 选项。


缺省设置: \fBpassword server = <空字符串>\fR


示例: \fBpassword server = NT-PDC, NT-BDC1, NT-BDC2, *\fR


示例: \fBpassword server = windc.mydomain.com:389 192.168.1.101 *\fR


示例: \fBpassword server = *\fR


.TP
path (S)
此项指定给出的服务项所用的系统路径.在服务项具有可打印属性时,打印假脱机数据会先存放在这个路径所指的位置中.
This parameter specifies a directory to which the user of the service is to be given access\&. In the case of printable services, this is where print data will spool prior to being submitted to the host for printing\&.


对于那些要对访客提供的可打印服务来说,服务项应该设为只读,而且路径应该设为全局可写属性并具有粘性(s)位.这当然不是强制性的,不过不这样做的话可能会无法得到你所希望的结果.


路径出现\fI%u\fR的地方将以正处于联接状态的UNIX用户名来替换；同样出现\fI%m\fR的地方将以请求联接的主机NetBIOS名替换.在设定伪主目录时,这种替换项很有用的.


所指定的路径都是基于根目录\fIroot dir\fR(如果有的话)的.


缺省设置: \fB无\fR


示例: \fBpath = /home/fred\fR


.TP
pid directory (G)
This option specifies the directory where pid files will be placed\&.


缺省设置: \fBpid directory = ${prefix}/var/locks\fR


示例: \fBpid directory = /var/run/\fR


.TP
posix locking (S)
The \fBsmbd\fR(8) daemon maintains an database of file locks obtained by SMB clients\&. The default behavior is to map this internal database to POSIX locks\&. This means that file locks obtained by SMB clients are consistent with those seen by POSIX compliant applications accessing the files via a non-SMB method (e\&.g\&. NFS or local file access)\&. You should never need to disable this 选项。


缺省设置: \fBposix locking = yes\fR


.TP
postexec (S)
此项指定在断开服务时运行的一个命令.它使用通常的替换项.此命令在一些系统中可能是以root身份来运行的.


一个有趣的示例，用于卸载服务器资源：


\fBpostexec = /etc/umount /cdrom\fR


参见 \fIpreexec\fR.


缺省设置: \fB无 (不执行命令)\fR


示例: \fBpostexec = echo \"%u disconnected from %S from %m (%I)\" >> /tmp/log\fR


.TP
preexec (S)
此项指定在联接到服务时运行一个命令.通常这也可以用一些替换项.


一个有趣的示例，在用户每一次登录时向对方发送一个欢迎信息：(一条格言？)


\fBpreexec = csh -c 'echo \"Welcome to %S!\" | /usr/local/samba/bin/smbclient -M %m -I %I' & \fR


当然,一段时间以后这类信息可能就比较讨厌了:-)


参见 \fIpreexec close\fR 和 \fIpostexec \fR.


缺省设置: \fB无 (不执行命令)\fR


示例: \fBpreexec = echo \"%u connected to %S from %m (%I)\" >> /tmp/log\fR


.TP
preexec close (S)
此布尔量选项控制是否从\fIpreexec \fR返回的非零代码会关闭所联接的服务.


缺省设置: \fBpreexec close = no\fR


.TP
prefered master (G)
这是为拼写错误准备的。请查看 \fI preferred master\fR :-)


.TP
preferred master (G)
此布尔量选项控制\fBnmbd\fR(8)是否作为工作组里的首选主浏览器.


如果设此选项为\fByes\fR时,\fBnmbd\fR会在启动时强制进行一次选举,它有一些有利条件来赢得选举.推荐把此选项与\fB domain master = yes\fR联合使用,这样\fBnmbd\fR可以保证成为一个域浏览器.


小心使用此项,因为如果在相同的子网内有多个主机(不管是Samba服务器，Windows95还是NT)参加选举的话,他们每个都会周期性不断地尝试成为本地主浏览器,这时会造成不必须的广播交通流量并降低浏览性能.

参见 \fIos level\fR.


缺省设置: \fBpreferred master = auto\fR


.TP
preload (G)
此选项定义了要自动加入到浏览列表的服务项清单.这对于homes和printers服务项非常有用,否则这些服务将是不可见的.

注意,如果你想加载printcap里所有的打印机,那么用\fIload printers\fR会更容易.

缺省设置: \fBno preloaded services\fR


示例: \fBpreload = fred lp colorlp\fR


.TP
preload modules (G)
This is a list of paths to modules that should be loaded into smbd before a client connects. This improves the speed of smbd when reacting to new connections somewhat\&.


缺省设置: \fBpreload modules = \fR


示例: \fBpreload modules = /usr/lib/samba/passdb/mysql.so+++ \fR


.TP
preserve case (S)
此项控制建立新的文件时取名是否使用用户传递的大小写,还是强制使用\fIdefault case \fR.


缺省设置: \fBpreserve case = yes\fR


参见NAME MANGLING段中的完整讨论.

.TP
printable (S)
如果此项设为\fByes\fR,那么用户可以读写并发送打印缓存文件到服务项指定的目录中.


注意一个可打印的服务\fB总是\fR允许通过缓存打印数据的方法向服务项路径中执行写操作(需要用户有可写权限).\fIread only\fR选项控制只允许不可打印地访问资源.


缺省设置: \fBprintable = no\fR


.TP
printcap (G)
与 \fI printcap name\fR 同义.


.TP
printcap name (S)
此项用于覆盖掉编译时产生的缺省printcap名(通常是\fI/etc/printcap\fR).参见[printers]段的讨论,它说明了为什么要这样做的理由.

To use the CUPS printing interface set \fBprintcap name = cups \fR\&. This should be supplemented by an addtional setting printing = cups in the [global] section\&. \fBprintcap name = cups\fR will use the "dummy" printcap created by CUPS, as specified in your CUPS configuration file\&.


在可以用\fBlpstat\fR命令列出可用打印机的列表的System V系统上,可以用\fBprintcap name = lpstat \fR来自动获得可用打印机列表.这对于配置samba时定义成SYSV的系统(这就包括了很多基于System V的系统)来说是缺省情况.如果在这些系统上设好\fIprintcap name\fR为\fIlpstat\fR的话,samba就会执行\fBlpstat -v\fR并尝试分析输出信息以获得一份打印机列表.

通常最小的printcap文件看起来就象下面这样：

.nf
print1|My Printer 1
print2|My Printer 2
print3|My Printer 3
print4|My Printer 4
print5|My Printer 5
.fi


我们看到'|'符号用来定义打印机的别名.第二个带有空格的别名其实是提示Samba它是注释.


在AIX中默认的printcap文件名是\fI/etc/qconfig\fR. 如果在文件名中找到\fIqconfig\fR字样，Samba将假定文件是AIX 的\fIqconfig\fR格式。

缺省设置: \fBprintcap name = /etc/printcap\fR

示例: \fBprintcap name = /etc/myprintcap\fR


.TP
print command (S)
当一个打印作业完全缓冲到了服务项时,此项指定的命令就能过调用\fBsystem()\fR来处理那些缓存文件.通常我们指定典型的命令来发送缓存文件到主机的打印子系统,不过也不一定要这样.服务器不会删除那些缓存文件,所以你指定的任何命令都应当在处理完以后删除文件,否则的话就需要手工来删除旧的缓存文件了.

打印命令是一个简单的文本字符串。它可以在宏替换之后逐字传递给系统。


%s, %f - 缓冲文件名路径


%p - 适当的打印机名


%J - 客户提交的作业名


%c - 缓冲的作业需要打印的页数

%z -缓冲的打印作业的大小(以字节计)


打印命令至少\fB必须\fR包含\fI%s\fR或\fI%f\fR替换符中的一个,而\fI%p\fR是个可选项.在提交打印作业时,如果不提供打印机名的话,\fI%p\fR替换符会从打印命令中删掉.


如果在[global]段中指定了打印命令,它将被用于任何可打印性的服务项,而不再需要在它们之中单独指定了.


如果既没有对可打印性服务项单独指定打印命令又没有指定一个全局的打印命令时,假脱机文件虽然会建立却不会被处理也不会被删除(这很重要哦).


注意在某些UNIX上以\fBnobody\fR账号身份进行打印会导致失败.如果发生了这样的情况请建立一个单独的有打印权的访客账号并在[global]段里设置\fIguest account\fR选项.


如果你明白命令是直接传递给shell的话，你可以组织非常复杂的打印命令.举例来说,下面的命令会记录一个打印作业,打印这个文件然后删掉它.注意这里的';'是shell脚本命令常用的分隔符.


\fBprint command = echo Printing %s >> /tmp/print.log; lpr -P %p %s; rm %s\fR

你可能必须根据平时在系统上打印文件的方式来改变这个命令.缺省情况下,此选项会根据\fIprinting\fR选项的设定而变化.

缺省设置: 对于 \fBprinting = BSD, AIX, QNX, LPRNG 或者 PLP :\fR


\fBprint command = lpr -r -P%p %s\fR


对于 \fBprinting = SYSV 或者 HPUX :\fR


\fBprint command = lp -c -d%p %s; rm %s\fR


对于 \fBprinting = SOFTQ :\fR


\fBprint command = lp -d%p -s %s; rm %s\fR


对于 \fBprinting = CUPS :\fR

如果Samba 编译时加入了libcups, 那么\fIprintcap=cups\fR将使用CUPS API来提交作业等等。否则它用-oraw选项，使用SystemV命令来打印，也就是说它会用\fBlp -c -d%p -o raw; rm %s\fR.当\fBprinting = cups\fR, 并且Samba编译时加入了libcups时，任何手工设置的打印命令将被忽略。


示例: \fBprint command = /usr/local/samba/bin/myprintscript %p %s\fR


.TP
printer (S)
与 \fI printer name\fR 同义。


.TP
printer admin (S)
This is a list of users that can do anything to printers via the remote administration interfaces offered by MS-RPC (usually using a NT workstation)\&. Note that the root user always has admin rights\&.


缺省设置: \fBprinter admin = <空字符串>\fR


示例: \fBprinter admin = admin, @staff\fR


.TP
printer name (S)
此选项指定可打印性服务项用来打印缓存作业数据的打印机.

如果在[global]段里指定了打印机名称,那么给出的打印机就用于任何可打印性服务项而不需个别的指定打印机名称了.


缺省设置: \fB空 (在很多系统中可能是 \fBlp\fR )\fR


示例: \fBprinter name = laserwriter\fR


.TP
printing (S)
此选项控制系统上如何解释打印机状态信息,而如果在[global]段中定义，它也会影响\fIprint command\fR,\fIlpq command\fR,\fIlppause command\fR,\fIlpresume command\fR和\fIlprm command\fR这些选项的缺省值

通常系统支持九种打印机风格,它们是\fBBSD\fR, \fBAIX\fR, \fBLPRNG\fR, \fBPLP\fR, \fBSYSV\fR, \fBHPUX\fR, \fBQNX\fR, \fBSOFTQ\fR,还有 \fBCUPS\fR

要在系统上查看使用了不同的选项后其它打印命令的缺省值,可以用\fBtestparm\fR(1)程序.

此项可以在每一台打印机上分别设置.


参见[printers]段的讨论。


.TP
print ok (S)
与 \fIprintable\fR 同义。

.TP
private dir (G)
This parameters defines the directory smbd will use for storing such files as \fIsmbpasswd\fR and \fIsecrets\&.tdb\fR\&.


Default :\fBprivate dir = ${prefix}/private\fR


.TP
profile acls (S)
This boolean parameter controls whether \fBsmbd\fR(8) This boolean parameter was added to fix the problems that people have been having with storing user profiles on Samba shares from Windows 2000 or Windows XP clients\&. New versions of Windows 2000 or Windows XP service packs do security ACL checking on the owner and ability to write of the profile directory stored on a local workstation when copied from a Samba share\&.


When not in domain mode with winbindd then the security info copied onto the local workstation has no meaning to the logged in user (SID) on that workstation so the profile storing fails\&. Adding this parameter onto a share used for profile storage changes two things about the returned Windows ACL\&. Firstly it changes the owner and group owner of all reported files and directories to be BUILTIN\\\\Administrators, BUILTIN\\\\Users respectively (SIDs S-1-5-32-544, S-1-5-32-545)\&. Secondly it adds an ACE entry of "Full Control" to the SID BUILTIN\\\\Users to every returned ACL\&. This will allow any Windows 2000 or XP workstation user to access the profile\&.


Note that if you have multiple users logging on to a workstation then in order to prevent them from being able to access each others profiles you must remove the "Bypass traverse checking" advanced user right\&. This will prevent access to other users profile directories as the top level profile directory (named after the user) is created by the workstation profile code and has an ACL restricting entry to the directory tree to the owning user\&.


缺省设置: \fBprofile acls = no\fR


.TP
protocol (G)
与 \fImax protocol\fR 同义


.TP
public (S)
与 \fIguest ok\fR 同义


.TP
queuepause command (S)
定义服务器暂停打印队列时要执行的命令.


此命令应该是个只用打印机名作为选项的程序或脚本,以便用来停止打印队列,使打印作业不再向打印机发送.


此命令不支持Windows for Workgroups,但可以在Windows 95和NT的打印机窗口中发送.

此处用替换符\fI%p\fR可以替代打印机名称.否则这个名称将被放置在命令后面.

注意,在命令中使用绝对路径是个好习惯,因为不一定可以获得服务器的PATH变量.


缺省设置: \fB依赖于 \fIprinting\fR 选项的设置\fR


示例: \fBqueuepause command = disable %p\fR


.TP
queueresume command (S)
定义服务器恢复暂停了的打印队列时要执行的命令.就是用于恢复因为上面的选项(\fI queuepause command\fR)而导致的结果的.

此命令应该是个只用打印机名作为选项的程序或脚本,以便用来恢复打印队列,使打印作业继续向打印机发送.


此命令不支持Windows for Workgroups,但可以在Windows 95和NT的打印机窗口中发送.

此处用替换符\fI%p\fR可以替代打印机名称.否则这个名称将被放置在命令后面.

注意,在命令中使用绝对路径是个好习惯,因为不一定可以获得服务器的PATH变量.


缺省设置: \fB依赖于 \fIprinting\fR 选项的设置\fR

示例: \fBqueuepause command = enable %p\fR

.TP
read bmpx (G)
此布尔量选项控制是否让\fBsmbd\fR(8)支持"多工读块"(Read Block Multiplex)的SMB.现在这种方式已经很少用了,所以缺省是\fBno\fR.一般你不需要设定此选项.


缺省设置: \fBread bmpx = no\fR


.TP
read list (S)
此处给出对服务项有只读权限的用户清单.如果正在联接的用户属于此列表,那么他们将没有写权限,此时是不管\fIread only\fR选项是否设置的.此列表可以包括用在\fI invalid users\fR 选项中描述的语法定义的组名称.


参见 \fI write list\fR 和 \fIinvalid users\fR 选项。


缺省设置: \fBread list = <空字符串>\fR


示例: \fBread list = mary, @students\fR


.TP
read only (S)
注意它与 \fIwriteable\fR 反义.

如果这个参数是\fByes\fR, 那么服务的用户不能建立或修改服务目录中的文件。

注意一个可打印的服务(\fBprintable = yes\fR) 的目录\fB 总是\fR 可写的(需要用户可写权限)但是只能通过缓冲操作来写.


缺省设置: \fBread only = yes\fR


.TP
read raw (G)
此选项控制着是否让服务器在传送数据到客户端时支持读取原始的SMB请求.


如果允许,那么它会以65535 字节为单位来读取一个数据包的65535字节.这会带来较多的性能方面的好处.


但是,有些客户端使用不正确的包容量(虽然是可允许的),或者它们不支持大容量包,所以对这些客户端你应该禁止这一选项.

通常将此选项作为一种系统调试工具,而且严格来说不应修改.参见\fIwrite raw\fR选项.


缺省设置: \fBread raw = yes\fR


.TP
read size (G)
此项影响着磁盘读/写与网络读/写的轮流交替.如果在若干个SMB命令(通常是SMBwrite,SMBwriteX和SMBreadbraw)中传送的数据量超过此项设定的值时,服务器开始就会在从网络接收整个数据包之前进行写操作；在执行SMBreadbraw的情况下,服务器在从磁盘上读出所有数据之前就开始向网络中写数据.


在磁盘与网络的访问速度相近时,这种交迭式的工作就会做得非常好,不过当其中一类设备的速度大大高于另一类时,它只会有那么一点点效果.

缺省的值是16384,但没有做过测试最优值的实验。根据已经了解的情况来看,在使用不同的系统时,最优化值的差别很大.一个大于65536的值是没有任何意义的,它只会造成不必要的内存分配.


缺省设置: \fBread size = 16384\fR


示例: \fBread size = 8192\fR


.TP
realm (G)
This option specifies the kerberos realm to use\&. The realm is used as the ADS equivalent of the NT4 \fBdomain\fR\&. It is usually set to the DNS name of the kerberos server\&.


缺省设置: \fBrealm = \fR


示例: \fBrealm = mysambabox.mycompany.com\fR


.TP
remote announce (G)
此项允许你设置\fBnmbd\fR(8)周期性地向任意工作组的任意IP地址申明自己的存在.


如果你要samba服务器处在一个通常浏览传播规则没有正常工作的远程工作组里时,用此项就很有用了.此远程工作组可以位于IP包到得到的任何地方.


例如: 

\fBremote announce = 192.168.2.255/SERVERS 192.168.4.255/STAFF\fR

以上这行说明\fBnmbd\fR 对两个给出的使用工作组名的IP地址进行申明.如果你只用了IP地址的话,那么会用\fIworkgroup\fR选项里给出的工作组名来替代.

你选用的IP地址通常应该是远程网络的广播地址,不过也可以用配置稳定的网络中的已知主浏览器IP地址.


缺省设置: \fBremote announce = <空字符串>\fR


.TP
remote browse sync (G)
此项允许你设定\fBnmbd\fR(8)周期性地同步位于远程(remote segment)的Samba主浏览器上的浏览列表.同时也允许你收集位于具有交叉路由子网中主浏览器上的浏览列表.这是以一种和其他非Samba的服务器不兼容的方式进行的。


This is useful if you want your Samba server and all local clients to appear in a remote workgroup for which the normal browse propagation rules don't work\&. The remote workgroup can be anywhere that you can send IP packets to.


例如: 

\fBremote browse sync = 192.168.2.255 192.168.4.255\fR


以上行会使\fBnmbd\fR向位于指定子网或地址中的主浏览器请求同步他们本地服务器中的浏览列表


你选用的IP地址通常应该是远程网络的广播地址,不过也可以用配置非常稳定的网络中的已知主浏览器IP地址.如果给出一个主机的IP地址,或者主控浏览器事实上在自己的网段中, samba就\fB不\fR验证远程主机是否有效、是否正在侦听了。


缺省设置: \fBremote browse sync = <空字符串>\fR


.TP
restrict anonymous (G)
这个选项限制了是否在匿名连接中返回用户和组列表信息，仿照了Windows2000 和NT在注册表键值\fBHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\LSA\\RestrictAnonymous\fR 中的做法。设置为0的时候，任何请求都返回用户和组列表。设置为1的时候，只有认证的用户可以获得用户和组列表。设置为2的时候，只有Windows2000/XP和Samba支持，不允许匿名连接。这样做会阻止需要匿名操作的M$或第三方程序运行。

The security advantage of using restrict anonymous = 1 is dubious, as user and group list information can be obtained using other means.

The security advantage of using restrict anonymous = 2 is removed by setting \fIguest ok\fR = yes on any share.

缺省设置: \fBrestrict anonymous = 0\fR


.TP
root (G)
与 \fIroot directory"\fR 同义


.TP
root dir (G)
与 \fIroot directory"\fR 同义.


.TP
root directory (G)
服务器将在启动时对此项所设之目录进行\fBchroot()\fR(也就是改变根目录) 操作.对于安全操作来说,这并不是十分必要的.如果没有这步操作,服务器会拒绝对服务项以外的文件进行访问.同时也检查并拒绝那些文件系统其它部分的软链接或者尝试在其它目录(取决于选项\fIwide links\fR的设置情况)中使用".."这些操作.


加入一个\fIroot directory\fR,注意不是实际的"/"目录,可以增加额外的安全级别,但是代价就高了.这样完全确保了所指定的\fIroot directory\fR及所属子目录外的文件都是不能访问的,\fB包括\fR服务器正常运行时所需的一些文件也是如此.因此要想维护服务器整体的可操作性,你需要镜像一些系统文件到所指定的\fIroot directory\fR下.特别是要镜像 \fI/etc/passwd\fR文件或此文件的子集,如果需要的话,任何打印操作要用到的二进制文件或配置文件也要镜像.当然,应该由操作系统决定必须被镜像的文件集合.

缺省设置: \fBroot directory = /\fR


示例: \fBroot directory = /homes/smb\fR


.TP
root postexec (S)
此项与 \fIpostexec\fR选项含义相同,只是以root身份来运行命令而已.在一次联接关闭之后对文件系统,特别是光盘驱动器进行卸载是非常有用的.


参见 \fI postexec\fR.


缺省设置: \fBroot postexec = <空字符串>\fR


.TP
root preexec (S)
此项与 \fIpreexec\fR选项含义相同,只是以root身份来运行命令而已.在一次联接稳定建立之后装载文件系统,特别是光盘驱动器是非常有用的.


参见 \fI preexec\fR 和 \fIpreexec close\fR 选项.


缺省设置: \fBroot preexec = <空字符串>\fR


.TP
root preexec close (S)
此项与\fIpreexec close \fR选项含义相同,只是以root身份来运行命令而已.


参见 \fI preexec\fR 和\fIpreexec close\fR.


缺省设置: \fBroot preexec close = no\fR


.TP
security (G)
此项是\fIsmb.conf\fR文件中最重要的一个设定之一,它影响了客户是如何应答Samba服务器的.

这个选项设置了\(lq安全模式位\(rq用于答复协议协商以使\fBsmbd\fR(8) 调整共享安全级是开或者关.客户端根据此位决定是否(以及如何)向服务器传送用户和口令信息.

缺省值是\fBsecurity = user\fR,这也是在Windows 98和Windows NT环境中最常用的设定.

可选的值 \fBsecurity = share\fR, \fBsecurity = server\fR 或者\fBsecurity = domain \fR.


 2.0.0版本之前的Samba中,缺省值是 \fBsecurity = share\fR 主要因为当时只有这一个值可选。

在WfWg里有一个错误,当在使用用户和服务器安全级时,WfWg客户将会完全忽略你在"connect 
drive"对话框里键入的口令.这就使除了在WfWg里已登录的用户以外的任何人要联接Samba服务项变得非常困难.


如果你的主机使用与UNIX主机上相同的用户名时,就应当使用\fBsecurity = user\fR.如果你用的用户名通常在UNIX上不存在时就应该用\fBsecurity = share\fR.

如果你想设置共享而不用口令的话(访客级共享)也应该用\fBsecurity=share\fR.这通常用于提供共享打印的服务器.在\fBsecurity=user\fR里设定guest帐户非常困难,详细的情况请参见\fImap to guest\fR选项.

\fBsmbd\fR可能会使用一种\fB混杂模式(hybrid)\fR,这样就可以在不同的\fINetBIOS aliases\fR下提供用户和共享级的安全特性.

现在解释各个不同的设定.


\fBSECURITY = SHARE\fR

当客户联接到一个共享安全级的服务器,在联接共享资源之前无需用一个合法的用户名和口令登录到服务器(虽然现在的客户端象WIN95/95及NT在与\fBsecurity = share \fR的服务器交谈时都会以用户名发送一个登录请求,但却没有带口令).相反,客户端会在每一个共享上发送认证信息(口令)以尝试联接到这个共享项.

注意 \fBsmbd\fR \fB总是\fR 用合法的UNIX用户代表客户进行操作, 即使是在 \fBsecurity = share\fR 的时候.


因为在共享安全级中,客户无需向服务器发送用户名,所以\fBsmbd\fR用一些技术来为客户决定正确的UNIX用户账号.

用于匹配给出客户口令的可能的UNIX用户名列表可以用以下方法建立：

如果设置了\fIguest only\fR选项,则跳过所有其它步骤只检查\fIguest account\fR用户名.

如果通过共享连接请求发送一个用户名,则此用户名(映射后 - 参见\fIusername map\fR)被作为潜在用户名加入.

如果客户使用一个先前的 \fBlogon \fR 请求(SessionSetup SMB调用)则在SMB中发送的用户名将作为潜在用户名加入.

客户请求的服务项名被作为潜在用户名加入.

客户的NetBIOS名被作为潜在用户名加入到列表中.

在\fIuser\fR列表中的任何用户都被作为潜在用户名加入.

如果未设\fIguest only\fR选项,则使用提供的口令来尝试此列表.对于匹配到口令的第一个用户将作为UNIX用户身份使用.

如果设置了\fIguest only\fR选项或未检测到用户名,则如果共享项中标志为可以使用\fIguest account\fR,那么使用此访客用户账号,否则拒绝访问.

注意,在共享安全级中关于哪个UNIX用户名最后将在允许访问中使用\fB非常\fR混淆.

参见NOTE ABOUT USERNAME/PASSWORD VALIDATION段.


\fBSECURITY = USER\fR
这是samba2.0/3.0缺省安全级设置.对于用户安全级,一个客户必须先以合法的用户名和口令(也可以用\fIusername map\fR选项进程映射)\(lq登录\(rq.在此安全模式中也可使用加密口令(参见\fIencrypted passwords\fR选项).如果设置了如\fIuser\fR和\fIguest only\fR这样的选项,则它们会被应用并且在此连接上更改UNIX用户账号,但只能在用户账号被成功验证之后才行.

\fB注意\fR,当服务器成功验证客户身份之前,请求的资源名称是\fB不\fR发送到服务器上的.这就是为什么用户安全级中在没有允许服务器自动把未知用户映射为\fIguest account\fR的情况下,访客共享无法工作.参见\fImap to guest\fR选项获得完成映射的细节.


参见NOTE ABOUT USERNAME/PASSWORD VALIDATION段.


\fBSECURITY = DOMAIN\fR


只有已经用 \fBnet\fR(8)把服务器添加进一个Windows NT的域中,此安全模式才能正常工作.它要求\fIencrypted passwords\fR选项设为\fByes\fR.在此模式中Samba将试图把用户名/口令传送到一个WindowsNT主域或备份域控制器进行验证像一台真正的WindowsNT服务器那样。

\fB注意\fR,仍然需要存在一个和域控制器上的用户名一致的有效的UNIX用户，来使Samba拥有一个有效的UNIX帐户来映射存取文件操作。

\fB注意\fR,对于客户端来说,\fIsecurity=domain\fR模式与\fIsecurity=user\fR是一样的.它只影响
服务器处理验证工作的方式.对于客户端无任何影响.

\fB注意\fR,当服务器成功验证客户身份之前,请求的资源名称是不发送到服务器上的.这就是为什么域安全级中在没有允许服务器自动把未知用户映射为\fBguest account\fR的情况下,访客共享无法工作.参见\fImap to guest\fR选项获得完成映射的细节

参见 NOTE ABOUT USERNAME/PASSWORD VALIDATION 段.


参见 \fIpassword server\fR parameter 和 \fIencrypted passwords\fR 选项。


\fBSECURITY = SERVER\fR

在此模式中Samba将试图把用户名/口令传送到其它SMB服务器,比如一台NT服务器,进行验证.如果验证失败则回到\fBsecurity = user\fR模式,它需要\fIencrypted passwords\fR 参数设置为\fByes\fR，除非远端系统不支持它们。但是要注意，如果使用了加密口令的话,samba不会再去检查UNIX系统口令文件的,它必须有一个合法的\fIsmbpasswd\fR文件以再次检查用户账号.参见Samba HOWTO Collection 中关于User Database 的章节来获得如何设置的信息。

This mode of operation has significant pitfalls, due to the fact that is activly initiates a man-in-the-middle attack on the remote SMB server\&. In particular, this mode of operation can cause significant resource consuption on the PDC, as it must maintain an active connection for the duration of the user's session\&. Furthermore, if this connection is lost, there is no way to reestablish it, and futher authenticaions to the Samba server may fail. (From a single client, till it disconnects).

\fB注意\fR,对于客户端来说,\fBsecurity=server\fR模式与\fBsecurity=user\fR是一样的.它只影响服务器处理验证工作的方式.对于客户端无任何影响.

\fB注意\fR,当服务器成功验证客户身份之前,请求的资源名称是\fB不\fR发送到服务器上的.这就是为什么服务器安全级中在没有允许服务器自动把未知用户映射为\fIguest account\fR的情况下,访客共享无法工作.参见 \fImap to guest\fR选项获得完成映射的细节.


参见 NOTE ABOUT USERNAME/PASSWORD VALIDATION 段.


参见 \fIpassword server\fR parameter 和 \fIencrypted passwords\fR 选项。


\fBSECURITY = ADS\fR


In this mode, Samba will act as a domain member in an ADS realm\&. To operate in this mode, the machine running Samba will need to have Kerberos installed and configured and Samba will need to be joined to the ADS realm using the net utility.


Note that this mode does NOT make Samba operate as a Active Directory Domain Controller.


Read the chapter about Domain Membership in the HOWTO for details.


参见 \fIads server \fR parameter, the \fIrealm \fR paramter 和\fIencrypted passwords\fR 选项。


缺省设置: \fBsecurity = USER\fR


示例: \fBsecurity = DOMAIN\fR


.TP
security mask (S)
此选项控制NT客户用本地NT安全对话框操作UNIX权限时对权限所作的修改情况.
This parameter controls what UNIX permission bits can be modified when a Windows NT client is manipulating the UNIX permission on a file using the native NT security dialog box\&.

此选项用掩码值'与'实现对权限位的更改,从而防止修改未出现在此掩码中的任何位.可以将掩码中的0看作用户无权更改的位值.
This parameter is applied as a mask (AND'ed with) to the changed permission bits, thus preventing any bits not in this mask from being modified\&. Essentially, zero bits in this mask may be treated as a set of bits the user is not allowed to change\&.

如未明确设定此选项,则把此选项设为0777，允许用户修改文件的所有user/group/world这些权限.

\fB注意\fR,可通过其它手段访问到Samba服务器的用户可以轻而易举地绕过此限制,所以此选项只对独立的服务器系统有用.多数普通系统的管理员可以将它保留为\fB0777\fR.

参见 \fIforce directory security mode\fR, \fIdirectory security mask\fR, \fIforce security mode\fR 选项.


缺省设置: \fBsecurity mask = 0777\fR


示例: \fBsecurity mask = 0770\fR


.TP
server schannel (G)
This controls whether the server offers or even demands the use of the netlogon schannel\&. \fIserver schannel = no\fR does not offer the schannel, \fIserver schannel = auto\fR offers the schannel but does not enforce it, and \fIserver schannel = yes\fR denies access if the client is not able to speak netlogon schannel\&. This is only the case for Windows NT4 before SP4\&.


Please note that with this set to \fIno\fR you will have to apply the WindowsXP requireSignOrSeal-Registry patch found in the docs/Registry subdirectory\&.


缺省设置: \fBserver schannel = auto\fR


示例: \fBserver schannel = yes\fR


.TP
server signing (G)
This controls whether the server offers or requires the client it talks to to use SMB signing\&. Possible values are \fBauto\fR, \fBmandatory\fR and \fBdisabled\fR\&.


When set to auto, SMB signing is offered, but not enforced\&. When set to mandatory, SMB signing is required and if set to disabled, SMB signing is not offered either\&.


缺省设置: \fBclient signing = False\fR


.TP
server string (G)
此选项在打印管理器中的打印机信息对话框以及在\fBnet view\fR(网上邻居)的IPC连接中显示的服务器信息.它可以是任何你希望向用户显示的字串.

它还设置显示在浏览列表中主机名后的内容.

\fI%v\fR 将替换为Samba版本号


\fI%h\fR 将替换为主机名


缺省设置: \fBserver string = Samba %v\fR


示例: \fBserver string = University of GNUs Samba Server\fR


.TP
set directory (S)
如果 \fBset directory = no\fR，则使用服务的用户不能用setdir命令更变目录.

\fBsetdir\fR命令只在Digital Pathworks客户端中实现.参见Pathworks文档的细节.


缺省设置: \fBset directory = no\fR


.TP
set primary group script (G)
Thanks to the Posix subsystem in NT a Windows User has a primary group in addition to the auxiliary groups\&. This script sets the primary group in the unix userdatase when an administrator sets the primary group from the windows user manager or when fetching a SAM with \fBnet rpc vampire\fR\&. \fI%u\fR will be replaced with the user whose primary group is to be set\&. \fI%g\fR will be replaced with the group to set\&.


缺省设置: \fBNo default value\fR


示例: \fBset primary group script = /usr/sbin/usermod -g '%g' '%u'\fR


.TP
set quota command (G)
The \fBset quota command\fR should only be used whenever there is no operating system API available from the OS that samba can use\&.


This parameter should specify the path to a script that can set quota for the specified arguments\&.


The specified script should take the following arguments:


1 - quota type .TP 3 \(bu 1 - user quotas .TP \(bu 2 - user default quotas (uid = -1) .TP \(bu 3 - group quotas .TP \(bu 4 - group default quotas (gid = -1) .LP

2 - id (uid for user, gid for group, -1 if N/A)

3 - quota state (0 = disable, 1 = enable, 2 = enable and enforce)

4 - block softlimit

5 - block hardlimit

6 - inode softlimit

7 - inode hardlimit

8(optional) - block size, defaults to 1024

The script should output at least one line of data\&.


参见 \fIget quota command\fR 选项。


缺省设置: \fBset quota command = \fR


示例: \fBset quota command = /usr/local/sbin/set_quota\fR


.TP
share modes (S)
此选项在一个文件打开时允许或禁止\fIshare modes\fR.此模式可用于使客户获得对一个文件独占的读或写访问.

这些打开模式UNIX是不直接支持的,所以要用共享内存或在UNIX不支持共享内存时(一般都支持)用锁定文件来模拟.


允许共享模式的选项是\fBDENY_DOS\fR, \fBDENY_ALL\fR, \fBDENY_READ\fR,\fBDENY_WRITE\fR, \fBDENY_NONE\fR 和\fBDENY_FCB\fR.


缺省情况下此选项提供了完全的共享兼容和许可.


你 \fB不应\fR 把此选项关闭因为很多Windows应用会因此停止运行。


缺省设置: \fBshare modes = yes\fR


.TP
short preserve case (S)
此布尔值选项控制着如果新文件符合8.3文件名格式(所有字母都为大写且长度适当),则以大写字母建立文件，否则就转换为\fIdefault case \fR.此选项可与\fBpreserve case = yes\fR选项联用,以允许长文件名保留大小写，同时短文件名转换为小写。

参见 NAME MANGLING 段.


缺省设置: \fBshort preserve case = yes\fR


.TP
show add printer wizard (G)
With the introduction of MS-RPC based printing support for Windows NT/2000 client in Samba 2\&.2, a "Printers\&.\&.\&." folder will appear on Samba hosts in the share listing\&. Normally this folder will contain an icon for the MS Add Printer Wizard (APW)\&. However, it is possible to disable this feature regardless of the level of privilege of the connected user\&.


Under normal circumstances, the Windows NT/2000 client will open a handle on the printer server with OpenPrinterEx() asking for Administrator privileges\&. If the user does not have administrative access on the print server (i\&.e is not root or a member of the \fIprinter admin\fR group), the OpenPrinterEx() call fails and the client makes another open call with a request for a lower privilege level\&. This should succeed, however the APW icon will not be displayed\&.


Disabling the \fIshow add printer wizard\fR parameter will always cause the OpenPrinterEx() on the server to fail\&. Thus the APW icon will never be displayed\&. \fB Note :\fRThis does not prevent the same user from having administrative privilege on an individual printer\&.


参见 \fIaddprinter command\fR, \fIdeleteprinter command\fR, \fIprinter admin\fR


Default :\fBshow add printer wizard = yes\fR


.TP
shutdown script (G)
\fBThis parameter only exists in the HEAD cvs branch\fR This a full path name to a script called by \fBsmbd\fR(8) that should start a shutdown procedure\&.


This command will be run as the user connected to the server\&.


%m %t %r %f parameters are expanded:


\fI%m\fR will be substituted with the shutdown message sent to the server\&.

\fI%t\fR will be substituted with the number of seconds to wait before effectively starting the shutdown procedure\&.

\fI%r\fR will be substituted with the switch \fB-r\fR\&. It means reboot after shutdown for NT\&.

\fI%f\fR will be substituted with the switch \fB-f\fR\&. It means force the shutdown even if applications do not respond for NT\&.

缺省设置: \fBNone\fR\&.


示例: \fBshutdown script = /usr/local/samba/sbin/shutdown %m %t %r %f\fR


Shutdown script example:
.nf

#!/bin/bash
		
$time=0
let "time/60"
let "time++"

/sbin/shutdown $3 $4 +$time $1 &
.fi

Shutdown does not return so we need to launch it in background\&.


参见 \fIabort shutdown script\fR\&.


.TP
smb passwd file (G)
此选项设置加密口令文件smbpasswd的路径.缺省路径在编译samba时指定.


缺省设置: \fBsmb passwd file = ${prefix}/private/smbpasswd\fR


示例: \fBsmb passwd file = /etc/samba/smbpasswd\fR


.TP
smb ports (G)
Specifies which ports the server should listen on for SMB traffic\&.


缺省设置: \fBsmb ports = 445 139\fR


.TP
socket address (G)
此选项允许你控制samba监听连接所用的地址.它用于在一个服务器上支持多个配置不同的虚拟接口.缺省情况下samba会在任何地址上都接受连接请求.


By default Samba will accept connections on any address\&.


示例: \fBsocket address = 192.168.2.20\fR


.TP
socket options (G)
此选项设置用于与客户端交谈的套接字选项.

套接字选项是使用在允许调整连接的操作系统的网络层的控制命令.

此选项通常用于在局域网上优化调整samba服务器的性能.因为samba无法知道与你的网络所对应的优化选项,所以你必须自己进行试验并作出选择.我们强烈推荐你先阅读与你的操作系统有关的相应文件(也许\fBman setsockopt\fR会有帮助).

你可能会发现在有些系统上samba会在你使用一个选项时发出"Unknown socket option"的信息.这就说明你没有正确拼写或者需要为操作系统添加一个包含文件到includes.h中.如有后面指出的问题请写信到samba-bugs@samba.org.

只要操作系统允许,你可以以任何方法组合任何所支持的套接字选项.

当前可用于此选项的可设置套接字选项列表有：

SO_KEEPALIVE

SO_REUSEADDR

SO_BROADCAST

TCP_NODELAY

IPTOS_LOWDELAY

IPTOS_THROUGHPUT

SO_SNDBUF *

SO_RCVBUF *

SO_SNDLOWAT *

SO_RCVLOWAT *

标有\fB'*'\fR的要使用一个整数参数.其它的有时使用1或0代表允许或禁止该选项,如未指定1或0则缺省值都为允许.

要指定一个变量，用"SOME_OPTION=VALUE"格式。比如可以是SO_SNDBUF=8192.注意,在"="前后不能有任何空格.

如在局域网上,则使用下面这个是比较明智的：

\fBsocket options = IPTOS_LOWDELAY\fR

如有一个局域网则可以试一下：

\fBsocket options = IPTOS_LOWDELAY TCP_NODELAY\fR

如有一个广域网,则试一下IPTOS_THROUGHPU.

注意有些选项可导致samba服务器完全失效.小心使用它们！

缺省设置: \fBsocket options = TCP_NODELAY\fR

示例: \fBsocket options = IPTOS_LOWDELAY\fR


.TP
source environment (G)
This parameter causes Samba to set environment variables as per the content of the file named\&.


If the value of this parameter starts with a "|" character then Samba will treat that value as a pipe command to open and will set the environment variables from the output of the pipe\&.


The contents of the file or the output of the pipe should be formatted as the output of the standard Unix \fBenv(1)\fR command\&. This is of the form:


Example environment entry:


\fBSAMBA_NETBIOS_NAME = myhostname\fR


缺省设置: \fBNo default value\fR


Examples: \fBsource environment = |/etc/smb.conf.sh\fR


示例: \fBsource environment = /usr/local/smb_env_vars\fR


.TP
stat cache (G)
此选项检测\fBsmbd\fR(8)是否使用缓存以提升映射不分大小写名称的速度.你无须更改此选项.


缺省设置: \fBstat cache = yes\fR


.TP
strict allocate (S)
This is a boolean that controls the handling of disk space allocation in the server\&. When this is set to \fByes\fR the server will change from UNIX behaviour of not committing real disk storage blocks when a file is extended to the Windows behaviour of actually forcing the disk system to allocate real storage blocks when a file is created or extended to be a given size\&. In UNIX terminology this means that Samba will stop creating sparse files\&. This can be slow on some systems\&.


When strict allocate is \fBno\fR the server does sparse disk block allocation when a file is extended\&.


Setting this to \fByes\fR can help Samba return out of quota messages on systems that are restricting the disk quota of users\&.


缺省设置: \fBstrict allocate = no\fR


.TP
strict locking (S)
此布尔量选项控制服务器对文件锁的处理.当设为\fByes\fR,则服务器对文件锁检查每次读写访问,并拒绝锁存在时的访问.在有些系统上这可能会很慢.

当禁用strict locking时,服务器只在客户明确要求时才为他们检查文件锁.

循规蹈矩的客户总是在重要的时候要求检查文件锁,所以在多数情况下\fBstrict locking = no\fR是可取的.

缺省设置: \fBstrict locking = no\fR


.TP
strict sync (S)
很多Windows应用(包括Windows 98浏览器)都会干扰对刷新缓冲区内容到磁盘的操作.在UNIX下,一次同步调用强制进程挂起,直到内核确保把所有磁盘缓存区中的未完成数据安全地存到固定存储设备中为止.此操作很慢,而且只能很少用到.把此选项设为\fBno\fR (缺省值)说明\fBsmbd\fR(8) 忽略Windows应用请求的一次同步调用.这样只有在Samba运行的操作系统崩溃时才可能丢失数据,因此缺省设置危险性很小.另外,它修正人们报告的很多关于Windows98浏览器拷贝文件的性能问题.

参见 \fIsync always\fR 选项。


缺省设置: \fBstrict sync = no\fR


.TP
sync always (S)
此布尔量选项控制是否在写操作结束前把所写的内容写到固定存储设备上.如果为\fBno\fR则服务器将在每次写调用中让客户请求来操纵它(客户可以设置一个位码来指出要同步一次特殊的写操作).如果为\fByes\fR则在每次写操作后调用一次\fBfsync() \fR以确保将数据写到磁盘上.注意必须把\fIstrict sync\fR选项设为\fByes\fR以使本选项产生效果.


参见 \fIstrict sync\fR 选项。


缺省设置: \fBsync always = no\fR


.TP
syslog (G)
此选项决定samba调试信息号如何映射为系统syslog的记录等级.调试级0映射为syslog的\fBLOG_ERR\fR,调试级1映射为 \fBLOG_WARNING\fR,调试级2映射为\fBLOG_NOTICE\fR,调试级3映射为\fBLOG_INFO\fR.所有更高的级别号映射为\fB LOG_DEBUG\fR.

此选项设置了对syslog发送信息的阈值.只有小于此值的调试级信息号才发给syslog.


缺省设置: \fBsyslog = 1\fR


.TP
syslog only (G)
此选项使samba只把调试级别号记录到系统syslog,而不是调试记录文件.

缺省设置: \fBsyslog only = no\fR


.TP
template homedir (G)
When filling out the user information for a Windows NT user, the \fBwinbindd\fR(8) daemon uses this parameter to fill in the home directory for that user\&. If the string \fI%D\fR is present it is substituted with the user's Windows NT domain name\&. If the string \fI%U\fR is present it is substituted with the user's Windows NT user name\&.


缺省设置: \fBtemplate homedir = /home/%D/%U\fR


.TP
template primary group (G)
This option defines the default primary group for each user created by \fBwinbindd\fR(8)'s local account management functions (similar to the 'add user script')\&.


缺省设置: \fBtemplate primary group = nobody\fR


.TP
template shell (G)
When filling out the user information for a Windows NT user, the \fBwinbindd\fR(8) daemon uses this parameter to fill in the login shell for that user\&.


缺省设置: \fBtemplate shell = /bin/false\fR


.TP
time offset (G)
此选项是个加入到转换标准GMT为当地时间操作的分钟数.如果你向很多有不正确保存时间操作的主机提供服务时这就很有用了.


缺省设置: \fBtime offset = 0\fR


示例: \fBtime offset = 60\fR


.TP
time server (G)
此选项检测\fBnmbd\fR(8) 是否以时间服务器身份向Windows客户通告自身.

缺省设置: \fBtime server = no\fR


.TP
timestamp logs (G)
与 \fI debug timestamp\fR 同义.


.TP
unicode (G)
Specifies whether Samba should try to use unicode on the wire by default\&. Note: This does NOT mean that samba will assume that the unix machine uses unicode!


缺省设置: \fBunicode = yes\fR


.TP
unix charset (G)
Specifies the charset the unix machine Samba runs on uses\&. Samba needs to know this in order to be able to convert text to the charsets other SMB clients use\&.


缺省设置: \fBunix charset = UTF8\fR


示例: \fBunix charset = ASCII\fR


.TP
unix extensions (G)
This boolean parameter controls whether Samba implments the CIFS UNIX extensions, as defined by HP\&. These extensions enable Samba to better serve UNIX CIFS clients by supporting features such as symbolic links, hard links, etc\&.\&.\&. These extensions require a similarly enabled client, and are of no current use to Windows clients\&.


缺省设置: \fBunix extensions = yes\fR


.TP
unix password sync (G)
此布尔量选项控制samba是否在smbpasswd文件中的加密SMB口令被更改时尝试用SMB口令来同步UNIX口令.如设为\fByes\fR则\fB以root身份\fR调用\fIpasswd program\fR选项中指定的程序 - 以允许设置新的UNIX口令而无需访问原UNIX口令(因为更改SMB口令时代码不访问明文的原口令而只涉及新口令).

参见 \fIpasswd program\fR, \fI passwd chat\fR.


缺省设置: \fBunix password sync = no\fR


.TP
update encrypted (G)
此布尔量选项使以明文口令登录的用户在登录时自动更新smbpasswd文件中的加密
(散列计算过的)口令.此选项允许一个站点从明文口令验证方式(以明文口令验证用
户账号并再次检查UNIX账号数据库)移植到加密口令验证方式(SMB的询问/响应验证
机制)而无需强制所有用户在移植时通过smbpasswd重新输入他们的口令.这对改变加
密口令移交要较长周期这种状况来说很方便.一旦所有用户都在smbpasswd文件中拥
有他们加密过的口令,则此应该把此选项设为\fBno\fR.

为了让此选项正确工作,当它设为\fByes\fR时必须把 \fIencrypt passwords\fR选项设为\fBno\fR .

注意即使设置了此选项,\fBsmbd\fR还是必须验证用户账号,直到输入合法的口令后才能正确连接并更新他们的散列计算(由smbpasswd完成)后的口令字.


缺省设置: \fBupdate encrypted = no\fR


.TP
use client driver (S)
This parameter applies only to Windows NT/2000 clients\&. It has no effect on Windows 95/98/ME clients\&. When serving a printer to Windows NT/2000 clients without first installing a valid printer driver on the Samba host, the client will be required to install a local printer driver\&. From this point on, the client will treat the print as a local printer and not a network printer connection\&. This is much the same behavior that will occur when \fBdisable spoolss = yes\fR\&.


The differentiating factor is that under normal circumstances, the NT/2000 client will attempt to open the network printer using MS-RPC\&. The problem is that because the client considers the printer to be local, it will attempt to issue the OpenPrinterEx() call requesting access rights associated with the logged on user\&. If the user possesses local administator rights but not root privilegde on the Samba host (often the case), the OpenPrinterEx() call will fail\&. The result is that the client will now display an "Access Denied; Unable to connect" message in the printer queue window (even though jobs may successfully be printed)\&.


If this parameter is enabled for a printer, then any attempt to open the printer with the PRINTER_ACCESS_ADMINISTER right is mapped to PRINTER_ACCESS_USE instead\&. Thus allowing the OpenPrinterEx() call to succeed\&. \fBThis parameter MUST not be able enabled on a print share which has valid print driver installed on the Samba server\&.\fR


参见 \fIdisable spoolss\fR


缺省设置: \fBuse client driver = no\fR


.TP
use mmap (G)
This global parameter determines if the tdb internals of Samba can depend on mmap working correctly on the running system\&. Samba requires a coherent mmap/read-write system memory cache\&. Currently only HPUX does not have such a coherent cache, and so this parameter is set to \fBno\fR by default on HPUX\&. On all other systems this parameter should be left alone\&. This parameter is provided to help the Samba developers track down problems with the tdb internal code\&.


缺省设置: \fBuse mmap = yes\fR


.TP
user (S)
与 \fIusername\fR 同义


.TP
username (S)
在逗号分隔的列表中指定多个用户以用于轮流(从左到右)测试所提供的口令.

只有当主机无法提供它自己的用户名时才需要\fIusername\fR选项。当用COREPLUS
协议或你的用户拥有与UNIX用户名不同的WfWg用户名时就会有这样的情况.在这两种
情况下,用\\\\server\\share%user语句代替会更好的.

在大多数情况下\fIusername\fR选项并不是最好的解决方案,因为它意味着Samba会
尝试对\fIusername\fR选项行中的每个用户名轮流作测试.这样做是很慢的,而且万
一很多用户重复口令的话这就是个坏主意了.错误使用此选项可能会带来超时或安全
缺陷.

samba依靠底层的UNIX安全.此选项不限制登录者,它只对Samba服务器提供响应所提
供口令的用户名的线索.任何喜欢的人都可以登录,而且如果他们只是启动一次
telnet对话的话不会造成破坏.进程以登录的用户身份运行,所以他们无法做任何他
们不能做的事儿.

要对一组特殊的用户限制一个服务的话可以用 \fIvalid users \fR 选项.

如果任何用户名以'@'字符开始则此用户名将首先在NIS网络组列表(如果Samba编译
时加入了网络组支持的话)中进行查找,然后在UNIX用户组数据库中查找并展开成属
于以此名为组的所有用户的列表.

如果任何用户名以'+'字符开始则此用户名只在UNIX用户组数据库中进行查找并展开成属于以此名为组的所有用户的列表.

如果任何用户名以'&'字符开始则此用户名只在NIS网络组列表(如果Samba编译时加入了网络组支持的话)中进行查找并展开成属于以此名为组的所有用户的列表.

注意通过用户组数据库进行查找要花很长时间,在此期间有些客户可能会超时.


查看 NOTE ABOUT USERNAME/PASSWORD VALIDATION 段来获得这个选项如何决定访问服务方面的信息。


缺省设置: \fB如果是guest服务就是guest帐号,否则是空字符串.\fR


示例:\fBusername = fred, mary, jack, jane, @users, @pcgroup\fR


.TP
username level (G)
此选项在很多DOS客户发送全大写的用户名时,帮助samba尝试和\(lq猜测\(rq实际
UNIX用户名.对于缺省情况,Samba尝试所有小写形式,然后是首字母大写形式,如果该
用户名在UNIX主机上没有找到则失败.

如果把此选项设为非0,则情况就改变了.此选项指定的是用于尝试同时检测UNIX用户名的大写字母的组合数.数字越高,则尝试的组合数越多,但用户名的发现也越慢.当在你的UNIX主机上有奇特的用户名如\fBAstrangeUser \fR时使用此选项.

缺省设置: \fBusername level = 0\fR


示例: \fBusername level = 5\fR


.TP
username map (G)
此选项允许你指定一个包含对客户机到服务器上的用户名映射的文件.它可用于几个目的.最常见的是把用DOS或Windows主机的用户的名称映射到UNIX主机上的用户.其它还有把多个用户映射到单个用户名上以使他们可以更简单地共享文件.

映射文件被逐行解析.每个行都应该在'='号左边包含一个UNIX用户名,而在右边跟上一列用户名.右边的用户名列表可以包含@group形式的名称,它表示匹配任何组中的UNIX用户名.特殊客户名'*'是一个通配符用于匹配任何名称.映射文件的每个行可以达到1023个字符的长度.

对文件的处理是在每个行上取得提供的用户名并把它与'='号右边的每个用户名进行比较.如果提供的名称匹配右边的任何名称则用左边的名称替换右边的.然后继续处理下一行.

忽略以'#' 或 ';'号开始的行.

当在行中发现了匹配,则在以'!'开始的行后中止处理,否则继续处理每一行的映射.当你在文件中用了通配映射的话'!'就很有用了.

例如把名称\fBadmin\fR 或 \fBadministrator\fR映射为UNIX名\fB root\fR,你可以这样：

\fBroot = admin administrator\fR

或把UNIX组 \fBsystem\fR中的任何人映射为UNIX名\fBsys\fR就可以这样：

\fBsys = @system\fR

可以在一个用户名映射文件中包含很多映射关系.

如果你的系统支持NIS NETGROUP选项,则在使用\fI/etc/group \fR匹配组之前先检查网络组数据库.

你可以通过在名称上使用双引号来映射含有空格的Windows用户名.例如：

\fBtridge = "Andrew Tridgell"\fR

将把windows用户名"Andrew Tridgell"映射为unix用户名"tridge".

以下示例将把mary和fred映射为unix用户sys,然后把其余的映射为guest.注意使用'!'符号可以告诉Samba如果在该行获得一个匹配的话就停止处理.

.nf
!sys = mary fred
guest = *
.fi

注意重映射作用于所有出现用户名的地方.因此如果你连接到\\\\server\\fred而\fB fred\fR已被重映射为 \fBmary\fR,则你实际会连接到\\\\server\\mary"并需要提供\fBmary\fR的口令而不是 \fBfred\fR的.这种情况只有一个例外,那就是用户名是被传到\fI password server\fR(如果你有一个的话)验证的.口令服务器会接收客户提供的未经修改的用户名.

同时要注意反向映射是不会出现的.这主要影响的是打印任务.已经被映射的用户会在删除打印任务时遇到麻烦,因为WfWg上的打印管理器会认为他们不是打印任务的属主.

缺省设置: \fBno username map\fR


示例: \fBusername map = /usr/local/samba/lib/users.map\fR


.TP
users (S)
与 \fI username\fR 同义.


.TP
use sendfile (S)
If this parameter is \fByes\fR, and Samba was built with the --with-sendfile-support option, and the underlying operating system supports sendfile system call, then some SMB read calls (mainly ReadAndX and ReadRaw) will use the more efficient sendfile system call for files that are exclusively oplocked\&. This may make more efficient use of the system CPU's and cause Samba to be faster\&. This is off by default as it's effects are unknown as yet\&.


缺省设置: \fBuse sendfile = no\fR


.TP
use spnego (G)
This variable controls controls whether samba will try to use Simple and Protected NEGOciation (as specified by rfc2478) with WindowsXP and Windows2000 clients to agree upon an authentication mechanism\&. Unless further issues are discovered with our SPNEGO implementation, there is no reason this should ever be disabled\&.


缺省设置: \fBuse spnego = yes\fR


.TP
utmp (G)
This boolean parameter is only available if Samba has been configured and compiled with the option \fB --with-utmp\fR\&. If set to \fByes\fR then Samba will attempt to add utmp or utmpx records (depending on the UNIX system) whenever a connection is made to a Samba server\&. Sites may use this to record the user connecting to a Samba share\&.


Due to the requirements of the utmp record, we are required to create a unique identifier for the incoming user\&. Enabling this option creates an n^2 algorithm to find this number\&. This may impede performance on large installations\&.


参见 \fI utmp directory\fR 选项。


缺省设置: \fButmp = no\fR


.TP
utmp directory (G)
This parameter is only available if Samba has been configured and compiled with the option \fB --with-utmp\fR\&. It specifies a directory pathname that is used to store the utmp or utmpx files (depending on the UNIX system) that record user connections to a Samba server\&. 参见 \fIutmp\fR 选项。 By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually \fI/var/run/utmp\fR on Linux)\&.


缺省设置: \fBno utmp directory\fR


示例: \fButmp directory = /var/run/utmp\fR


.TP
-valid (S)
This parameter indicates whether a share is valid and thus can be used\&. When this parameter is set to false, the share will be in no way visible nor accessible\&.


This option should not be used by regular users but might be of help to developers\&. Samba uses this option internally to mark shares as deleted\&.


缺省设置: \fBTrue\fR


.TP
valid users (S)
这是一份允许登录服务项的用户列表.以'@','+'和'&'开始的名称用\fIinvalid users\fR 选项中的规则进行解析.

如果此项为空(缺省)则任何用户都可以登录.如果一个用户名同时存在于此列表及\fIinvalid users\fR列表,则拒绝此用户访问.


\fI%S \fR替换为当前服务名. 这在[homes]段里非常有用.

参见 \fIinvalid users \fR


缺省设置: \fB空 (任何人都不会被拒绝) \fR


示例: \fBvalid users = greg, @pcusers\fR


.TP
veto files (S)
这是一份既不可见又不可访问的文件及目录的列表.在列表中的每一项必须用'/'进行分隔,项目中允许有空格.可以用DOS通配符'*'和'?'来指定多个文件或目录.

每项必须是一个UNIX路径,而非一个DOS路径,同时\fB必须不含\fR UNIX目录分隔符'/'.

注意\fIcase sensitive\fR选项适用于对文件的禁止目的.

需要明白这个选项的很重要的一个特点: 在Samba删除一个目录时的行为。如果一个目录除了veto files之外不包含任何内容，删除操作将\fB失败\fR，除非设置了\fIdelete veto files\fR 是\fIyes\fR.

设置此选项会影响Samba的性能,因为它将强制在扫描所有文件和目录时检查是否匹配.

参见 \fIhide files \fR 和 \fI case sensitive\fR.


缺省设置: \fB没有隐藏任何文件. \fR


示例:

.nf
; 隐藏任何文件名带有'Security'的文件，
; 任何扩展名是.tmp的文件,任何文件名带有'root'的文件
veto files = /*Security*/*\&.tmp/*root*/

; 隐藏NetAtalk服务器创建的Apple专用的文件
veto files = /\&.AppleDouble/\&.bin/\&.AppleDesktop/Network Trash Folder/
.fi


.TP
veto oplock files (S)
此选项只在对一个共享打开了\fIoplocks\fR选项时才有效.它允许Samba管理员在所选文件上选择性地关闭允许oplocks,这些文件可以用通配符列表来匹配,类拟于在\fIveto files\fR 选项中所用的通配符列表.

缺省设置: \fB没有隐藏oplocks许可\fR

你可能想在已知客户会猛烈争夺的文件上使用此项.在NetBench SMB基准程序下面就是个好例子,它导致客户猛烈地对以\fI.SEM\fR后缀的文件进行连接.为使Samba不在这些文件上允许oplocks,你可以在[global]段或特定的NetBench共享中使用此行：

示例: \fBveto oplock files = /*.SEM/\fR


.TP
vfs object (S)
与 \fIvfs objects\fR 同义.


.TP
vfs objects (S)
This parameter specifies the backend names which are used for Samba VFS I/O operations\&. By default, normal disk I/O operations are used but these can be overloaded with one or more VFS objects\&.


缺省设置: \fBno value\fR


示例: \fBvfs objects = extd_audit recycle\fR


.TP
volume (S)
此选项允许你忽略共享项提供的卷标.这对于那些坚持要使用一个特殊卷标的安装程序光盘来说很有用.缺省就是共享项的卷标.

缺省设置: \fB共享的名称\fR

.TP
wide links (S)
此选项控制服务器是否跟踪UNIX文件系统中的符号链接.指向服务器导出的目录树的链接总是被允许的；此选项只是控制对导出目录树以外的区域的访问情况.

注意设置此选项可对服务器性能产生负面影响,因为samba必须做一些额外的系统调用以检查那些链接.

缺省设置: \fBwide links = yes\fR


.TP
winbind cache time (G)
This parameter specifies the number of seconds the \fBwinbindd\fR(8) daemon will cache user and group information before querying a Windows NT server again\&.


缺省设置: \fBwinbind cache type = 300\fR


.TP
winbind enable local accounts (G)
This parameter controls whether or not winbindd will act as a stand in replacement for the various account management hooks in smb\&.conf (e\&.g\&. 'add user script')\&. If enabled, winbindd will support the creation of local users and groups as another source of UNIX account information available via getpwnam() or getgrgid(), etc\&.\&.\&.


缺省设置: \fBwinbind enable local accounts = yes\fR


.TP
winbind enum groups (G)
On large installations using \fBwinbindd\fR(8) it may be necessary to suppress the enumeration of groups through the \fBsetgrent()\fR, \fBgetgrent()\fR and \fBendgrent()\fR group of system calls\&. If the \fIwinbind enum groups\fR parameter is \fBno\fR, calls to the \fBgetgrent()\fR system call will not return any data\&.


\fBWarning:\fR Turning off group enumeration may cause some programs to behave oddly\&.


缺省设置: \fBwinbind enum groups = yes \fR


.TP
winbind enum users (G)
On large installations using \fBwinbindd\fR(8) it may be necessary to suppress the enumeration of users through the \fBsetpwent()\fR, \fBgetpwent()\fR and \fBendpwent()\fR group of system calls\&. If the \fIwinbind enum users\fR parameter is \fBno\fR, calls to the \fBgetpwent\fR system call will not return any data\&.


\fBWarning:\fR Turning off user enumeration may cause some programs to behave oddly\&. For example, the finger program relies on having access to the full user list when searching for matching usernames\&.


缺省设置: \fBwinbind enum users = yes \fR


.TP
winbind gid (G)
This parameter is now an alias for \fBidmap gid\fR


The winbind gid parameter specifies the range of group ids that are allocated by the \fBwinbindd\fR(8) daemon\&. This range of group ids should have no existing local or NIS groups within it as strange conflicts can occur otherwise\&.


缺省设置: \fBwinbind gid = <空字符串>\fR


示例: \fBwinbind gid = 10000-20000\fR


.TP
winbind separator (G)
This parameter allows an admin to define the character used when listing a username of the form of \fIDOMAIN \fR\\\fIuser\fR\&. This parameter is only applicable when using the \fIpam_winbind\&.so\fR and \fInss_winbind\&.so\fR modules for UNIX services\&.


Please note that setting this parameter to + causes problems with group membership at least on glibc systems, as the character + is used as a special character for NIS in /etc/group\&.


缺省设置: \fBwinbind separator = '\'\fR


示例: \fBwinbind separator = +\fR


.TP
winbind trusted domains only (G)
This parameter is designed to allow Samba servers that are members of a Samba controlled domain to use UNIX accounts distributed vi NIS, rsync, or LDAP as the uid's for winbindd users in the hosts primary domain\&. Therefore, the user 'SAMBA\\user1' would be mapped to the account 'user1' in /etc/passwd instead of allocating a new uid for him or her\&.


缺省设置: \fBwinbind trusted domains only = <no>\fR


.TP
winbind uid (G)
This parameter is now an alias for \fBidmap uid\fR


The winbind gid parameter specifies the range of user ids that are allocated by the \fBwinbindd\fR(8) daemon\&. This range of ids should have no existing local or NIS users within it as strange conflicts can occur otherwise\&.


缺省设置: \fBwinbind uid = <空字符串>\fR


示例: \fBwinbind uid = 10000-20000\fR


.TP
winbind use default domain (G)
This parameter specifies whether the \fBwinbindd\fR(8) daemon should operate on users without domain component in their username\&. Users without a domain component are treated as is part of the winbindd server's own domain\&. While this does not benifit Windows users, it makes SSH, FTP and e-mail function in a way much closer to the way they would in a native unix system\&.


缺省设置: \fBwinbind use default domain = <no>\fR


示例: \fBwinbind use default domain = yes\fR


.TP
wins hook (G)
当把Samba作为一台WINS服务器运行时,此选项允许你调用一个外部程序更改WINS数据库.此项主要用于动态更新外部名字解析数据库,如动态DNS.

此选项以如下形式指定要调用的一个脚本名或可执行程序：


\fBwins_hook operation name nametype ttl IP_list\fR

第一部分参数是opration(操作符),它有三种："add"、"delete"和"refresh".在很多情况下该操作符可以忽略,因为其它选项可提供足够的信息.注意当有名称以前没有加入过,则有时会用到"refresh",在这种情况下,它应该和"add"有同样含义.

第二部分参数是netbios名.如果该名称不是合法名的话,该功能就不运行.合法的名称应只包含字母,数字,减号,下划线和句点.

第三部分参数是用2位十六进制数字表示的netbios名称类型.

第四部分参数是以秒计算的名称有效时间TTL (time to live).

第五部分是当前该名称所注册的IP地址表.如果表为空则该名称被删除.

一个调用BIND动态DNS更新程序\fBnsupdate\fR的脚本示例在samba源代码的示例目录可以找到.

.TP
wins partners (G)
A space separated list of partners' IP addresses for WINS replication\&. WINS partners are always defined as push/pull partners as defining only one way WINS replication is unreliable\&. WINS replication is currently experimental and unreliable between samba servers\&.


缺省设置: \fBwins partners = \fR


示例: \fBwins partners = 192.168.0.1 172.16.1.2\fR


.TP
wins proxy (G)
此布尔量选项控制\fBnmbd\fR(8) 是否代替其它主机响应广播名字查询.对一些旧版本客户就可能需要把它设为\fByes\fR .

缺省设置: \fBwins proxy = no\fR


.TP
wins server (G)
此选项指定nmbd要注册的WINS服务器的IP地址(或DNS域名：IP地址优先(for preference)).如果在你的网络上有一台WINS服务器,就应该把此项设为该服务器的IP地址.

如果你有多个子网的话,应该指定向你的WINS服务器

If you want to work in multiple namespaces, you can give every wins server a 'tag'. For each tag, only one (working) server will be queried for a name. The tag should be seperated from the ip address by a colon.

注意,如有多子网并希望跨子网浏览工作正常的话,应该设置Samba指向一台WINS服务器.


缺省设置: \fB未启用\fR


示例: \fBwins server = mary:192.9.200.1 fred:192.168.3.199 mary:192.168.2.61\fR


For this example when querying a certain name, 192.19.200.1 will be asked first and if that doesn't respond 192.168.2.61 . If either of those doesn't know the name 192.168.3.199 will be queried.

示例: \fBwins server = 192.9.200.1 192.168.2.61\fR


.TP
wins support (G)
此布尔量选项控制\fBnmbd\fR(8)进程是否作为WINS服务器.你不应该把它设为\fByes\fR,除非有多子网或希望特定的\fBnmbd\fR作为你的WINS服务器.注意在网络上有多台WINS服务器时\fB不\fR应把它设为\fByes\fR.

缺省设置: \fBwins support = no\fR


.TP
workgroup (G)
此选项规定Samba所在的工作组以便让客户查询.注意它也规定在使用\fBsecurity = domain\fR时所用的域名.

缺省设置: \fB编译时设置为 WORKGROUP\fR


示例: \fBworkgroup = MYGROUP\fR


.TP
writable (S)
与 \fI writeable\fR 相同，是为拼写错误者准备的 :-)


.TP
writeable (S)
注意它与 \fIread only\fR 反义.


.TP
write cache size (S)
If this integer parameter is set to non-zero value, Samba will create an in-memory cache for each oplocked file (it does \fBnot\fR do this for non-oplocked files)\&. All writes that the client does not request to be flushed directly to disk will be stored in this cache if possible\&. The cache is flushed onto disk when a write comes in whose offset would not fit into the cache or when the file is closed by the client\&. Reads for the file are also served from this cache if the data is stored within it\&.


This cache allows Samba to batch client writes into a more efficient write size for RAID disks (i\&.e\&. writes may be tuned to be the RAID stripe size) and can improve performance on systems where the disk subsystem is a bottleneck but there is free memory for userspace programs\&.


The integer parameter specifies the size of this cache (per oplocked file) in bytes\&.


缺省设置: \fBwrite cache size = 0\fR


示例: \fBwrite cache size = 262144\fR


for a 256k cache size per file\&.


.TP
write list (S)
此选项设置对服务项有读写权的用户列表.如果正在连接的用户属于此列表,那他们就可以有写入权,而不管\fIread only\fR为何值.此列表可以用@group形式描述组名.

注意如果一个用户同时属于读列表和写列表则拥有写入权.

参见 \fIread list \fR 选项。

缺省设置: \fBwrite list = <空字符串>\fR


示例: \fBwrite list = admin, root, @staff\fR


.TP
write ok (S)
注意它与 \fIread only\fR 反义.


.TP
write raw (G)
此选项规定服务器是否在从客户端传输数据时支持原始方式写SMB消息块.你不应该更改它.


缺省设置: \fBwrite raw = yes\fR


.TP
wtmp directory (G)
This parameter is only available if Samba has been configured and compiled with the option \fB --with-utmp\fR\&. It specifies a directory pathname that is used to store the wtmp or wtmpx files (depending on the UNIX system) that record user connections to a Samba server\&. The difference with the utmp directory is the fact that user info is kept after a user has logged out\&.


参见 \fIutmp\fR 选项。 By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually \fI/var/run/wtmp\fR on Linux)\&.


缺省设置: \fBno wtmp directory\fR


示例: \fBwtmp directory = /var/log/wtmp\fR


.SH "警告 WARNINGS"

.PP
虽然配置文件允许服务项名包含空格,但你的客户端软件就不一定了.因为在比较中总是忽略空格,所以这不成问题 - 但应该认识到其它可能性.

.PP
有一条类似提示,很多客户特别是DOS客户,会限制服务项名为8个字符.虽然 \fBsmbd\fR(8)没有这样的限制,但如果这样的客户截去部分服务项名的话,他们的连接尝试会失败.为此你可能要保持你的服务项名在8个字符以内.

.PP
对于管理员来说[homes] 和 [printers]特殊段的使用很容易,但对缺省属性的多样组合应该小心.当设计这些段时要特别仔细.特别是要确保假脱机目录权限的正确性.

.SH "版本 VERSION"

.PP
此手册页是针对samba套件版本3.0的。

.SH "参见 SEE ALSO"

.PP
\fBsamba\fR(7), \fBsmbpasswd\fR(8), \fBswat\fR(8), \fBsmbd\fR(8), \fBnmbd\fR(8), \fBsmbclient\fR(1), \fBnmblookup\fR(1), \fBtestparm\fR(1), \fBtestprns\fR(1).

.SH "作者 AUTHOR"

.PP
samba软件和相关工具最初由Andrew Tridgell创建。samba现在由Samba Team 作为开源软件来发展，类似linux内核的开发方式。

.PP
最初的samba手册页是 Karl Auer写的。
手册页源码已经转换为YODL格式(另一种很好的开源软件，可以在ftp://ftp.ice.rug.nl/pub/unix找到)，由Jeremy Sllison 更新到Samba2.0 版本。
Gerald Carter 在Samba2.2中将它转化为DocBook 格式。
Alexander Bokovoy 在Samba 3.0中实现了DocBook XML4.2 格式的转换。



.SH "[中文版维护人]"
.B meaculpa <meaculpa@21cn.com>
.SH "[中文版最新更新]"
.B 2000/12/08
.SH "《中国linux论坛man手册页翻译计划》:"
.BI http://cmpp.linuxforum.net 
