.\" auto-generated by docbook2man-spec $Revision: 1.1 $
.TH "VACUUMDB" "1" "2003-11-02" "Application" "PostgreSQL Client Applications"
.SH NAME
vacuumdb \- 收集垃圾并且分析一个PostgreSQL 数据库

.SH SYNOPSIS
.sp
\fBvacuumdb\fR\fR [ \fR\fB\fIconnection-option\fB\fR...\fB \fR\fR]\fR \fR[\fR \fB--full\fR\fR | \fR\fB-f\fR\fR ]\fR \fR[\fR \fB--verbose\fR\fR | \fR\fB-v\fR\fR ]\fR \fR[\fR \fB--analyze\fR\fR | \fR\fB-z\fR\fR ]\fR\fR [ \fR\fB--table | -t \fItable\fB\fR [ \fB( \fIcolumn\fB [,...] ) \fR]\fB \fR\fR]\fR\fR [ \fR\fB\fIdbname\fB \fR\fR]\fR

\fBvacuumdb\fR\fR [ \fR\fB\fIconnection-options\fB\fR...\fB \fR\fR]\fR \fR[\fR \fB--all\fR\fR | \fR\fB-a\fR\fR ]\fR \fR[\fR \fB--full\fR\fR | \fR\fB-f\fR\fR ]\fR \fR[\fR \fB--verbose\fR\fR | \fR\fB-v\fR\fR ]\fR \fR[\fR \fB--analyze\fR\fR | \fR\fB-z\fR\fR ]\fR
.SH "DESCRIPTION 描述"
.PP
\fBvacuumdb\fR 是一个用于整理 PostgreSQL 数据库的工具。 vacuumdb 还将会生成用于 PostgreSQL 查询优化器的内部统计数据。
.PP
\fBvacuumdb\fR 是 SQL 命令 VACUUM [\fBvacuum\fR(7)] 的封装。 因此，用哪种方法清理数据库都没什么特别的。
.SH "OPTIONS 选项"
.PP
\fBvacuumdb\fR 接受下列命令行参数：
.TP
\fB-a\fR
.TP
\fB--all\fR
 清理所有数据库。
.TP
\fB[-d] \fIdbname\fB\fR
.TP
\fB[--dbname] \fIdbname\fB\fR
 声明要被清理或分析的数据库名称。 如果没有声明这个参数并且没有使用 -a（或 --all）， 那么从环境变量 PGDATABASE 里读取数据库名。 如果那个也没有设置，则使用连接的用户名。
.TP
\fB-e\fR
.TP
\fB--echo\fR
 回显 vacuumdb 生成的查询并且把它发送到服务器。
.TP
\fB-f\fR
.TP
\fB--full\fR
 执行"完全"清理．
.TP
\fB-q\fR
.TP
\fB--quiet\fR
 不显示响应。
.TP
\fB-t \fItable\fB [ (\fIcolumn\fB [,...]) ]\fR
.TP
\fB--table \fItable\fB [ (\fIcolumn\fB [,...]) ]\fR
 只是清理或分析 table。 字段名称只是在与 --analyze 选项联合使用时才需要声明。
.sp
.RS
.B "Tip:"
提示:  如果你声明了要清理的字段，你可能不得不在 shell 上逃逸圆括弧（见下面的例子）。
.RE
.sp
.TP
\fB-v\fR
.TP
\fB--verbose\fR
 在处理过程中打印详细信息。
.TP
\fB-z\fR
.TP
\fB--analyze\fR
 计算用于优化器的该数据库的统计值。
.PP
.PP
\fBvacuumdb\fR 还接受下面的命令行参数用于联接参数：
.TP
\fB-h \fIhost\fB\fR
.TP
\fB--host \fIhost\fB\fR
 声明运行服务器的机器的主机名。 如果主机名以斜扛开头，则它被用做到 Unix 域套接字的路径。
.TP
\fB-p \fIport\fB\fR
.TP
\fB--port \fIport\fB\fR
 声明服务器在侦听联接的 TCP 端口号或一个本地的 Unix 域套接字文件句柄。
.TP
\fB-U \fIusername\fB\fR
.TP
\fB--username \fIusername\fB\fR
 进行联接的用户名。
.TP
\fB-W\fR
.TP
\fB--password\fR
 强制口令输入提示。
.PP
.SH "ENVIRONMENT 环境"
.TP
\fBPGDATABASE\fR
.TP
\fBPGHOST\fR
.TP
\fBPGPORT\fR
.TP
\fBPGUSER\fR
 缺省连接参数
.SH "DIAGNOSTICS 诊断"
.PP
 如果出差错了。参阅 VACUUM [\fBvacuum\fR(7)]  和 \fBpsql\fR(1)  获取关于错误信息和可能问题的详细描述。 数据库服务器必须在目标主机上运行。同时，前端库 libpq 使用的任何缺省连接设置和环境变量都适用。
.SH "NOTES 注意"
.PP
\fBvacuumdb\fR 可能需要与 PostgreSQL  服务器连接若干次，每次都询问口令。在这种情况下，设立一个 \fI$HOME/.pgpass\fR  是比较方便的。参阅 Section 27.11 获取更多信息。
.SH "EXAMPLES 例子"
.PP
 整理数据库 test：
.sp
.nf
$ \fBvacuumdb test\fR
.sp
.fi
.PP
 为优化器清理和分析一个名为 bigdb 的数据库：
.sp
.nf
$ \fBvacuumdb --analyze bigdb\fR
.sp
.fi
.PP
 为清理数据库xyzzy里表 foo， 并且为优化器分析列 bar：
.sp
.nf
$ \fBvacuumdb --analyze --verbose --table 'foo(bar)' xyzzy\fR
.sp
.fi
.SH "SEE ALSO 参见"
VACUUM [\fBvacuum\fR(7)]

.SH "译者"
.B Postgresql 中文网站
.B 何伟平 <laser@pgsqldb.org>
